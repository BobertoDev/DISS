(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();function Hv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Yu={exports:{}},Es={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function W0(){if(Hm)return Es;Hm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(l,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var m in u)m!=="key"&&(d[m]=u[m])}else d=u;return u=d.ref,{$$typeof:i,type:l,key:f,ref:u!==void 0?u:null,props:d}}return Es.Fragment=n,Es.jsx=s,Es.jsxs=s,Es}var Gm;function e_(){return Gm||(Gm=1,Yu.exports=W0()),Yu.exports}var g=e_(),Pu={exports:{}},re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function t_(){if(qm)return re;qm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function _(A){return A===null||typeof A!="object"?null:(A=T&&A[T]||A["@@iterator"],typeof A=="function"?A:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,N={};function M(A,z,$){this.props=A,this.context=z,this.refs=N,this.updater=$||S}M.prototype.isReactComponent={},M.prototype.setState=function(A,z){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,z,"setState")},M.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function G(){}G.prototype=M.prototype;function H(A,z,$){this.props=A,this.context=z,this.refs=N,this.updater=$||S}var Y=H.prototype=new G;Y.constructor=H,O(Y,M.prototype),Y.isPureReactComponent=!0;var ce=Array.isArray;function ee(){}var V={H:null,A:null,T:null,S:null},Oe=Object.prototype.hasOwnProperty;function Se(A,z,$){var P=$.ref;return{$$typeof:i,type:A,key:z,ref:P!==void 0?P:null,props:$}}function yt(A,z){return Se(A.type,z,A.props)}function nt(A){return typeof A=="object"&&A!==null&&A.$$typeof===i}function at(A){var z={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function($){return z[$]})}var le=/\/+/g;function fe(A,z){return typeof A=="object"&&A!==null&&A.key!=null?at(""+A.key):z.toString(36)}function be(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(ee,ee):(A.status="pending",A.then(function(z){A.status==="pending"&&(A.status="fulfilled",A.value=z)},function(z){A.status==="pending"&&(A.status="rejected",A.reason=z)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function I(A,z,$,P,se){var he=typeof A;(he==="undefined"||he==="boolean")&&(A=null);var oe=!1;if(A===null)oe=!0;else switch(he){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(A.$$typeof){case i:case n:oe=!0;break;case b:return oe=A._init,I(oe(A._payload),z,$,P,se)}}if(oe)return se=se(A),oe=P===""?"."+fe(A,0):P,ce(se)?($="",oe!=null&&($=oe.replace(le,"$&/")+"/"),I(se,z,$,"",function(te){return te})):se!=null&&(nt(se)&&(se=yt(se,$+(se.key==null||A&&A.key===se.key?"":(""+se.key).replace(le,"$&/")+"/")+oe)),z.push(se)),1;oe=0;var He=P===""?".":P+":";if(ce(A))for(var Q=0;Q<A.length;Q++)P=A[Q],he=He+fe(P,Q),oe+=I(P,z,$,he,se);else if(Q=_(A),typeof Q=="function")for(A=Q.call(A),Q=0;!(P=A.next()).done;)P=P.value,he=He+fe(P,Q++),oe+=I(P,z,$,he,se);else if(he==="object"){if(typeof A.then=="function")return I(be(A),z,$,P,se);throw z=String(A),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return oe}function q(A,z,$){if(A==null)return A;var P=[],se=0;return I(A,P,"","",function(he){return z.call($,he,se++)}),P}function F(A){if(A._status===-1){var z=A._result;z=z(),z.then(function($){(A._status===0||A._status===-1)&&(A._status=1,A._result=$)},function($){(A._status===0||A._status===-1)&&(A._status=2,A._result=$)}),A._status===-1&&(A._status=0,A._result=z)}if(A._status===1)return A._result.default;throw A._result}var ge=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},we={map:q,forEach:function(A,z,$){q(A,function(){z.apply(this,arguments)},$)},count:function(A){var z=0;return q(A,function(){z++}),z},toArray:function(A){return q(A,function(z){return z})||[]},only:function(A){if(!nt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return re.Activity=E,re.Children=we,re.Component=M,re.Fragment=s,re.Profiler=u,re.PureComponent=H,re.StrictMode=l,re.Suspense=v,re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,re.__COMPILER_RUNTIME={__proto__:null,c:function(A){return V.H.useMemoCache(A)}},re.cache=function(A){return function(){return A.apply(null,arguments)}},re.cacheSignal=function(){return null},re.cloneElement=function(A,z,$){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var P=O({},A.props),se=A.key;if(z!=null)for(he in z.key!==void 0&&(se=""+z.key),z)!Oe.call(z,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&z.ref===void 0||(P[he]=z[he]);var he=arguments.length-2;if(he===1)P.children=$;else if(1<he){for(var oe=Array(he),He=0;He<he;He++)oe[He]=arguments[He+2];P.children=oe}return Se(A.type,se,P)},re.createContext=function(A){return A={$$typeof:f,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:d,_context:A},A},re.createElement=function(A,z,$){var P,se={},he=null;if(z!=null)for(P in z.key!==void 0&&(he=""+z.key),z)Oe.call(z,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(se[P]=z[P]);var oe=arguments.length-2;if(oe===1)se.children=$;else if(1<oe){for(var He=Array(oe),Q=0;Q<oe;Q++)He[Q]=arguments[Q+2];se.children=He}if(A&&A.defaultProps)for(P in oe=A.defaultProps,oe)se[P]===void 0&&(se[P]=oe[P]);return Se(A,he,se)},re.createRef=function(){return{current:null}},re.forwardRef=function(A){return{$$typeof:m,render:A}},re.isValidElement=nt,re.lazy=function(A){return{$$typeof:b,_payload:{_status:-1,_result:A},_init:F}},re.memo=function(A,z){return{$$typeof:y,type:A,compare:z===void 0?null:z}},re.startTransition=function(A){var z=V.T,$={};V.T=$;try{var P=A(),se=V.S;se!==null&&se($,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(ee,ge)}catch(he){ge(he)}finally{z!==null&&$.types!==null&&(z.types=$.types),V.T=z}},re.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},re.use=function(A){return V.H.use(A)},re.useActionState=function(A,z,$){return V.H.useActionState(A,z,$)},re.useCallback=function(A,z){return V.H.useCallback(A,z)},re.useContext=function(A){return V.H.useContext(A)},re.useDebugValue=function(){},re.useDeferredValue=function(A,z){return V.H.useDeferredValue(A,z)},re.useEffect=function(A,z){return V.H.useEffect(A,z)},re.useEffectEvent=function(A){return V.H.useEffectEvent(A)},re.useId=function(){return V.H.useId()},re.useImperativeHandle=function(A,z,$){return V.H.useImperativeHandle(A,z,$)},re.useInsertionEffect=function(A,z){return V.H.useInsertionEffect(A,z)},re.useLayoutEffect=function(A,z){return V.H.useLayoutEffect(A,z)},re.useMemo=function(A,z){return V.H.useMemo(A,z)},re.useOptimistic=function(A,z){return V.H.useOptimistic(A,z)},re.useReducer=function(A,z,$){return V.H.useReducer(A,z,$)},re.useRef=function(A){return V.H.useRef(A)},re.useState=function(A){return V.H.useState(A)},re.useSyncExternalStore=function(A,z,$){return V.H.useSyncExternalStore(A,z,$)},re.useTransition=function(){return V.H.useTransition()},re.version="19.2.4",re}var $m;function Dc(){return $m||($m=1,Pu.exports=t_()),Pu.exports}var J=Dc();const n_=Hv(J);var Ku={exports:{}},Ss={},Ju={exports:{}},Xu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function a_(){return Vm||(Vm=1,(function(i){function n(I,q){var F=I.length;I.push(q);e:for(;0<F;){var ge=F-1>>>1,we=I[ge];if(0<u(we,q))I[ge]=q,I[F]=we,F=ge;else break e}}function s(I){return I.length===0?null:I[0]}function l(I){if(I.length===0)return null;var q=I[0],F=I.pop();if(F!==q){I[0]=F;e:for(var ge=0,we=I.length,A=we>>>1;ge<A;){var z=2*(ge+1)-1,$=I[z],P=z+1,se=I[P];if(0>u($,F))P<we&&0>u(se,$)?(I[ge]=se,I[P]=F,ge=P):(I[ge]=$,I[z]=F,ge=z);else if(P<we&&0>u(se,F))I[ge]=se,I[P]=F,ge=P;else break e}}return q}function u(I,q){var F=I.sortIndex-q.sortIndex;return F!==0?F:I.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var v=[],y=[],b=1,E=null,T=3,_=!1,S=!1,O=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function Y(I){for(var q=s(y);q!==null;){if(q.callback===null)l(y);else if(q.startTime<=I)l(y),q.sortIndex=q.expirationTime,n(v,q);else break;q=s(y)}}function ce(I){if(O=!1,Y(I),!S)if(s(v)!==null)S=!0,ee||(ee=!0,at());else{var q=s(y);q!==null&&be(ce,q.startTime-I)}}var ee=!1,V=-1,Oe=5,Se=-1;function yt(){return N?!0:!(i.unstable_now()-Se<Oe)}function nt(){if(N=!1,ee){var I=i.unstable_now();Se=I;var q=!0;try{e:{S=!1,O&&(O=!1,G(V),V=-1),_=!0;var F=T;try{t:{for(Y(I),E=s(v);E!==null&&!(E.expirationTime>I&&yt());){var ge=E.callback;if(typeof ge=="function"){E.callback=null,T=E.priorityLevel;var we=ge(E.expirationTime<=I);if(I=i.unstable_now(),typeof we=="function"){E.callback=we,Y(I),q=!0;break t}E===s(v)&&l(v),Y(I)}else l(v);E=s(v)}if(E!==null)q=!0;else{var A=s(y);A!==null&&be(ce,A.startTime-I),q=!1}}break e}finally{E=null,T=F,_=!1}q=void 0}}finally{q?at():ee=!1}}}var at;if(typeof H=="function")at=function(){H(nt)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,fe=le.port2;le.port1.onmessage=nt,at=function(){fe.postMessage(null)}}else at=function(){M(nt,0)};function be(I,q){V=M(function(){I(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(I){I.callback=null},i.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Oe=0<I?Math.floor(1e3/I):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(I){switch(T){case 1:case 2:case 3:var q=3;break;default:q=T}var F=T;T=q;try{return I()}finally{T=F}},i.unstable_requestPaint=function(){N=!0},i.unstable_runWithPriority=function(I,q){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=T;T=I;try{return q()}finally{T=F}},i.unstable_scheduleCallback=function(I,q,F){var ge=i.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ge+F:ge):F=ge,I){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=F+we,I={id:b++,callback:q,priorityLevel:I,startTime:F,expirationTime:we,sortIndex:-1},F>ge?(I.sortIndex=F,n(y,I),s(v)===null&&I===s(y)&&(O?(G(V),V=-1):O=!0,be(ce,F-ge))):(I.sortIndex=we,n(v,I),S||_||(S=!0,ee||(ee=!0,at()))),I},i.unstable_shouldYield=yt,i.unstable_wrapCallback=function(I){var q=T;return function(){var F=T;T=q;try{return I.apply(this,arguments)}finally{T=F}}}})(Xu)),Xu}var Ym;function i_(){return Ym||(Ym=1,Ju.exports=a_()),Ju.exports}var Qu={exports:{}},gt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function s_(){if(Pm)return gt;Pm=1;var i=Dc();function n(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(v,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:v,containerInfo:y,implementation:b}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,gt.createPortal=function(v,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return d(v,y,null,b)},gt.flushSync=function(v){var y=f.T,b=l.p;try{if(f.T=null,l.p=2,v)return v()}finally{f.T=y,l.p=b,l.d.f()}},gt.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,l.d.C(v,y))},gt.prefetchDNS=function(v){typeof v=="string"&&l.d.D(v)},gt.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var b=y.as,E=m(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,_=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?l.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:_}):b==="script"&&l.d.X(v,{crossOrigin:E,integrity:T,fetchPriority:_,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},gt.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);l.d.M(v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&l.d.M(v)},gt.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=m(b,y.crossOrigin);l.d.L(v,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},gt.preloadModule=function(v,y){if(typeof v=="string")if(y){var b=m(y.as,y.crossOrigin);l.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else l.d.m(v)},gt.requestFormReset=function(v){l.d.r(v)},gt.unstable_batchedUpdates=function(v,y){return v(y)},gt.useFormState=function(v,y,b){return f.H.useFormState(v,y,b)},gt.useFormStatus=function(){return f.H.useHostTransitionStatus()},gt.version="19.2.4",gt}var Km;function r_(){if(Km)return Qu.exports;Km=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Qu.exports=s_(),Qu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function l_(){if(Jm)return Ss;Jm=1;var i=i_(),n=Dc(),s=r_();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(l(188))}function y(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,r=t;;){var o=a.return;if(o===null)break;var c=o.alternate;if(c===null){if(r=o.return,r!==null){a=r;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===a)return v(o),e;if(c===r)return v(o),t;c=c.sibling}throw Error(l(188))}if(a.return!==r.return)a=o,r=c;else{for(var h=!1,p=o.child;p;){if(p===a){h=!0,a=o,r=c;break}if(p===r){h=!0,r=o,a=c;break}p=p.sibling}if(!h){for(p=c.child;p;){if(p===a){h=!0,a=c,r=o;break}if(p===r){h=!0,r=c,a=o;break}p=p.sibling}if(!h)throw Error(l(189))}}if(a.alternate!==r)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),H=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Se=Symbol.for("react.activity"),yt=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function at(e){return e===null||typeof e!="object"?null:(e=nt&&e[nt]||e["@@iterator"],typeof e=="function"?e:null)}var le=Symbol.for("react.client.reference");function fe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case M:return"Profiler";case N:return"StrictMode";case ce:return"Suspense";case ee:return"SuspenseList";case Se:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case H:return e.displayName||"Context";case G:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case Oe:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}var be=Array.isArray,I=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},ge=[],we=-1;function A(e){return{current:e}}function z(e){0>we||(e.current=ge[we],ge[we]=null,we--)}function $(e,t){we++,ge[we]=e.current,e.current=t}var P=A(null),se=A(null),he=A(null),oe=A(null);function He(e,t){switch($(he,t),$(se,e),$(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?um(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=um(t),e=cm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(P),$(P,e)}function Q(){z(P),z(se),z(he)}function te(e){e.memoizedState!==null&&$(oe,e);var t=P.current,a=cm(t,e.type);t!==a&&($(se,e),$(P,a))}function me(e){se.current===e&&(z(P),z(se)),oe.current===e&&(z(oe),gs._currentValue=F)}var We,Ge;function pt(e){if(We===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);We=t&&t[1]||"",Ge=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+e+Ge}var vt=!1;function Ft(e,t){if(!e||vt)return"";vt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(U){var D=U}Reflect.construct(e,[],B)}else{try{B.call()}catch(U){D=U}e.call(B.prototype)}}else{try{throw Error()}catch(U){D=U}(B=e())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(U){if(U&&D&&typeof U.stack=="string")return[U.stack,D.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=r.DetermineComponentFrameRoot(),h=c[0],p=c[1];if(h&&p){var w=h.split(`
`),j=p.split(`
`);for(o=r=0;r<w.length&&!w[r].includes("DetermineComponentFrameRoot");)r++;for(;o<j.length&&!j[o].includes("DetermineComponentFrameRoot");)o++;if(r===w.length||o===j.length)for(r=w.length-1,o=j.length-1;1<=r&&0<=o&&w[r]!==j[o];)o--;for(;1<=r&&0<=o;r--,o--)if(w[r]!==j[o]){if(r!==1||o!==1)do if(r--,o--,0>o||w[r]!==j[o]){var L=`
`+w[r].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=r&&0<=o);break}}}finally{vt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?pt(a):""}function aa(e,t){switch(e.tag){case 26:case 27:case 5:return pt(e.type);case 16:return pt("Lazy");case 13:return e.child!==t&&t!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return Ft(e.type,!1);case 11:return Ft(e.type.render,!1);case 1:return Ft(e.type,!0);case 31:return pt("Activity");default:return""}}function Bc(e){try{var t="",a=null;do t+=aa(e,a),a=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Rl=Object.prototype.hasOwnProperty,Cl=i.unstable_scheduleCallback,jl=i.unstable_cancelCallback,jg=i.unstable_shouldYield,Dg=i.unstable_requestPaint,Rt=i.unstable_now,Ug=i.unstable_getCurrentPriorityLevel,Hc=i.unstable_ImmediatePriority,Gc=i.unstable_UserBlockingPriority,Bs=i.unstable_NormalPriority,Ig=i.unstable_LowPriority,qc=i.unstable_IdlePriority,Mg=i.log,Lg=i.unstable_setDisableYieldValue,Ri=null,Ct=null;function Cn(e){if(typeof Mg=="function"&&Lg(e),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(Ri,e)}catch{}}var jt=Math.clz32?Math.clz32:Bg,kg=Math.log,zg=Math.LN2;function Bg(e){return e>>>=0,e===0?32:31-(kg(e)/zg|0)|0}var Hs=256,Gs=262144,qs=4194304;function ia(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $s(e,t,a){var r=e.pendingLanes;if(r===0)return 0;var o=0,c=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var p=r&134217727;return p!==0?(r=p&~c,r!==0?o=ia(r):(h&=p,h!==0?o=ia(h):a||(a=p&~e,a!==0&&(o=ia(a))))):(p=r&~c,p!==0?o=ia(p):h!==0?o=ia(h):a||(a=r&~e,a!==0&&(o=ia(a)))),o===0?0:t!==0&&t!==o&&(t&c)===0&&(c=o&-o,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:o}function Ci(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Hg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $c(){var e=qs;return qs<<=1,(qs&62914560)===0&&(qs=4194304),e}function Dl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ji(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Gg(e,t,a,r,o,c){var h=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var p=e.entanglements,w=e.expirationTimes,j=e.hiddenUpdates;for(a=h&~a;0<a;){var L=31-jt(a),B=1<<L;p[L]=0,w[L]=-1;var D=j[L];if(D!==null)for(j[L]=null,L=0;L<D.length;L++){var U=D[L];U!==null&&(U.lane&=-536870913)}a&=~B}r!==0&&Vc(e,r,0),c!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=c&~(h&~t))}function Vc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-jt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|a&261930}function Yc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-jt(a),o=1<<r;o&t|e[r]&t&&(e[r]|=t),a&=~o}}function Pc(e,t){var a=t&-t;return a=(a&42)!==0?1:Ul(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ul(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Il(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Kc(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:Um(e.type))}function Jc(e,t){var a=q.p;try{return q.p=e,t()}finally{q.p=a}}var jn=Math.random().toString(36).slice(2),rt="__reactFiber$"+jn,St="__reactProps$"+jn,Ca="__reactContainer$"+jn,Ml="__reactEvents$"+jn,qg="__reactListeners$"+jn,$g="__reactHandles$"+jn,Xc="__reactResources$"+jn,Di="__reactMarker$"+jn;function Ll(e){delete e[rt],delete e[St],delete e[Ml],delete e[qg],delete e[$g]}function ja(e){var t=e[rt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ca]||a[rt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=gm(e);e!==null;){if(a=e[rt])return a;e=gm(e)}return t}e=a,a=e.parentNode}return null}function Da(e){if(e=e[rt]||e[Ca]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ui(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Ua(e){var t=e[Xc];return t||(t=e[Xc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function it(e){e[Di]=!0}var Qc=new Set,Zc={};function sa(e,t){Ia(e,t),Ia(e+"Capture",t)}function Ia(e,t){for(Zc[e]=t,e=0;e<t.length;e++)Qc.add(t[e])}var Vg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fc={},Wc={};function Yg(e){return Rl.call(Wc,e)?!0:Rl.call(Fc,e)?!1:Vg.test(e)?Wc[e]=!0:(Fc[e]=!0,!1)}function Vs(e,t,a){if(Yg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Ys(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function cn(e,t,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+r)}}function Gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ed(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pg(e,t,a){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,c=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){a=""+h,c.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kl(e){if(!e._valueTracker){var t=ed(e)?"checked":"value";e._valueTracker=Pg(e,t,""+e[t])}}function td(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=ed(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function Ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kg=/[\n"\\]/g;function qt(e){return e.replace(Kg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function zl(e,t,a,r,o,c,h,p){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Gt(t)):e.value!==""+Gt(t)&&(e.value=""+Gt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Bl(e,h,Gt(t)):a!=null?Bl(e,h,Gt(a)):r!=null&&e.removeAttribute("value"),o==null&&c!=null&&(e.defaultChecked=!!c),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+Gt(p):e.removeAttribute("name")}function nd(e,t,a,r,o,c,h,p){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){kl(e);return}a=a!=null?""+Gt(a):"",t=t!=null?""+Gt(t):a,p||t===e.value||(e.value=t),e.defaultValue=t}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=p?e.checked:!!r,e.defaultChecked=!!r,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),kl(e)}function Bl(e,t,a){t==="number"&&Ps(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ma(e,t,a,r){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&r&&(e[a].defaultSelected=!0)}else{for(a=""+Gt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ad(e,t,a){if(t!=null&&(t=""+Gt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Gt(a):""}function id(e,t,a,r){if(t==null){if(r!=null){if(a!=null)throw Error(l(92));if(be(r)){if(1<r.length)throw Error(l(93));r=r[0]}a=r}a==null&&(a=""),t=a}a=Gt(t),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r),kl(e)}function La(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Jg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sd(e,t,a){var r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a!="number"||a===0||Jg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function rd(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&a[o]!==r&&sd(e,o,r)}else for(var c in t)t.hasOwnProperty(c)&&sd(e,c,t[c])}function Hl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ks(e){return Qg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function dn(){}var Gl=null;function ql(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ka=null,za=null;function ld(e){var t=Da(e);if(t&&(e=t.stateNode)){var a=e[St]||null;e:switch(e=t.stateNode,t.type){case"input":if(zl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+qt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var o=r[St]||null;if(!o)throw Error(l(90));zl(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)r=a[t],r.form===e.form&&td(r)}break e;case"textarea":ad(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ma(e,!!a.multiple,t,!1)}}}var $l=!1;function od(e,t,a){if($l)return e(t,a);$l=!0;try{var r=e(t);return r}finally{if($l=!1,(ka!==null||za!==null)&&(Ir(),ka&&(t=ka,e=za,za=ka=null,ld(t),e)))for(t=0;t<e.length;t++)ld(e[t])}}function Ii(e,t){var a=e.stateNode;if(a===null)return null;var r=a[St]||null;if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vl=!1;if(fn)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{Vl=!1}var Dn=null,Yl=null,Js=null;function ud(){if(Js)return Js;var e,t=Yl,a=t.length,r,o="value"in Dn?Dn.value:Dn.textContent,c=o.length;for(e=0;e<a&&t[e]===o[e];e++);var h=a-e;for(r=1;r<=h&&t[a-r]===o[c-r];r++);return Js=o.slice(e,1<r?1-r:void 0)}function Xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qs(){return!0}function cd(){return!1}function wt(e){function t(a,r,o,c,h){this._reactName=a,this._targetInst=o,this.type=r,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(a=e[p],this[p]=a?a(c):c[p]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Qs:cd,this.isPropagationStopped=cd,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),t}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=wt(ra),Li=E({},ra,{view:0,detail:0}),Zg=wt(Li),Pl,Kl,ki,Fs=E({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ki&&(ki&&e.type==="mousemove"?(Pl=e.screenX-ki.screenX,Kl=e.screenY-ki.screenY):Kl=Pl=0,ki=e),Pl)},movementY:function(e){return"movementY"in e?e.movementY:Kl}}),dd=wt(Fs),Fg=E({},Fs,{dataTransfer:0}),Wg=wt(Fg),ep=E({},Li,{relatedTarget:0}),Jl=wt(ep),tp=E({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),np=wt(tp),ap=E({},ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ip=wt(ap),sp=E({},ra,{data:0}),fd=wt(sp),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},op={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function up(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=op[e])?!!t[e]:!1}function Xl(){return up}var cp=E({},Li,{key:function(e){if(e.key){var t=rp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xl,charCode:function(e){return e.type==="keypress"?Xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dp=wt(cp),fp=E({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hd=wt(fp),hp=E({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xl}),mp=wt(hp),yp=E({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),vp=wt(yp),gp=E({},Fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pp=wt(gp),_p=E({},ra,{newState:0,oldState:0}),bp=wt(_p),Ep=[9,13,27,32],Ql=fn&&"CompositionEvent"in window,zi=null;fn&&"documentMode"in document&&(zi=document.documentMode);var Sp=fn&&"TextEvent"in window&&!zi,md=fn&&(!Ql||zi&&8<zi&&11>=zi),yd=" ",vd=!1;function gd(e,t){switch(e){case"keyup":return Ep.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ba=!1;function wp(e,t){switch(e){case"compositionend":return pd(t);case"keypress":return t.which!==32?null:(vd=!0,yd);case"textInput":return e=t.data,e===yd&&vd?null:e;default:return null}}function Tp(e,t){if(Ba)return e==="compositionend"||!Ql&&gd(e,t)?(e=ud(),Js=Yl=Dn=null,Ba=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return md&&t.locale!=="ko"?null:t.data;default:return null}}var Ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ap[e.type]:t==="textarea"}function bd(e,t,a,r){ka?za?za.push(r):za=[r]:ka=r,t=Gr(t,"onChange"),0<t.length&&(a=new Zs("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var Bi=null,Hi=null;function xp(e){am(e,0)}function Ws(e){var t=Ui(e);if(td(t))return e}function Ed(e,t){if(e==="change")return t}var Sd=!1;if(fn){var Zl;if(fn){var Fl="oninput"in document;if(!Fl){var wd=document.createElement("div");wd.setAttribute("oninput","return;"),Fl=typeof wd.oninput=="function"}Zl=Fl}else Zl=!1;Sd=Zl&&(!document.documentMode||9<document.documentMode)}function Td(){Bi&&(Bi.detachEvent("onpropertychange",Ad),Hi=Bi=null)}function Ad(e){if(e.propertyName==="value"&&Ws(Hi)){var t=[];bd(t,Hi,e,ql(e)),od(xp,t)}}function Op(e,t,a){e==="focusin"?(Td(),Bi=t,Hi=a,Bi.attachEvent("onpropertychange",Ad)):e==="focusout"&&Td()}function Np(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ws(Hi)}function Rp(e,t){if(e==="click")return Ws(t)}function Cp(e,t){if(e==="input"||e==="change")return Ws(t)}function jp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:jp;function Gi(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var o=a[r];if(!Rl.call(t,o)||!Dt(e[o],t[o]))return!1}return!0}function xd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Od(e,t){var a=xd(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xd(a)}}function Nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ps(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ps(e.document)}return t}function Wl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Dp=fn&&"documentMode"in document&&11>=document.documentMode,Ha=null,eo=null,qi=null,to=!1;function Cd(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;to||Ha==null||Ha!==Ps(r)||(r=Ha,"selectionStart"in r&&Wl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qi&&Gi(qi,r)||(qi=r,r=Gr(eo,"onSelect"),0<r.length&&(t=new Zs("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=Ha)))}function la(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ga={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},no={},jd={};fn&&(jd=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function oa(e){if(no[e])return no[e];if(!Ga[e])return e;var t=Ga[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in jd)return no[e]=t[a];return e}var Dd=oa("animationend"),Ud=oa("animationiteration"),Id=oa("animationstart"),Up=oa("transitionrun"),Ip=oa("transitionstart"),Mp=oa("transitioncancel"),Md=oa("transitionend"),Ld=new Map,ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ao.push("scrollEnd");function Wt(e,t){Ld.set(e,t),sa(t,[e])}var er=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},$t=[],qa=0,io=0;function tr(){for(var e=qa,t=io=qa=0;t<e;){var a=$t[t];$t[t++]=null;var r=$t[t];$t[t++]=null;var o=$t[t];$t[t++]=null;var c=$t[t];if($t[t++]=null,r!==null&&o!==null){var h=r.pending;h===null?o.next=o:(o.next=h.next,h.next=o),r.pending=o}c!==0&&kd(a,o,c)}}function nr(e,t,a,r){$t[qa++]=e,$t[qa++]=t,$t[qa++]=a,$t[qa++]=r,io|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function so(e,t,a,r){return nr(e,t,a,r),ar(e)}function ua(e,t){return nr(e,null,null,t),ar(e)}function kd(e,t,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var o=!1,c=e.return;c!==null;)c.childLanes|=a,r=c.alternate,r!==null&&(r.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(o=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,o&&t!==null&&(o=31-jt(a),e=c.hiddenUpdates,r=e[o],r===null?e[o]=[t]:r.push(t),t.lane=a|536870912),c):null}function ar(e){if(50<cs)throw cs=0,yu=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var $a={};function Lp(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,a,r){return new Lp(e,t,a,r)}function ro(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hn(e,t){var a=e.alternate;return a===null?(a=Ut(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function zd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ir(e,t,a,r,o,c){var h=0;if(r=e,typeof e=="function")ro(e)&&(h=1);else if(typeof e=="string")h=G0(e,a,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Se:return e=Ut(31,a,t,o),e.elementType=Se,e.lanes=c,e;case O:return ca(a.children,o,c,t);case N:h=8,o|=24;break;case M:return e=Ut(12,a,t,o|2),e.elementType=M,e.lanes=c,e;case ce:return e=Ut(13,a,t,o),e.elementType=ce,e.lanes=c,e;case ee:return e=Ut(19,a,t,o),e.elementType=ee,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:h=10;break e;case G:h=9;break e;case Y:h=11;break e;case V:h=14;break e;case Oe:h=16,r=null;break e}h=29,a=Error(l(130,e===null?"null":typeof e,"")),r=null}return t=Ut(h,a,t,o),t.elementType=e,t.type=r,t.lanes=c,t}function ca(e,t,a,r){return e=Ut(7,e,r,t),e.lanes=a,e}function lo(e,t,a){return e=Ut(6,e,null,t),e.lanes=a,e}function Bd(e){var t=Ut(18,null,null,0);return t.stateNode=e,t}function oo(e,t,a){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hd=new WeakMap;function Vt(e,t){if(typeof e=="object"&&e!==null){var a=Hd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Bc(t)},Hd.set(e,t),t)}return{value:e,source:t,stack:Bc(t)}}var Va=[],Ya=0,sr=null,$i=0,Yt=[],Pt=0,Un=null,rn=1,ln="";function mn(e,t){Va[Ya++]=$i,Va[Ya++]=sr,sr=e,$i=t}function Gd(e,t,a){Yt[Pt++]=rn,Yt[Pt++]=ln,Yt[Pt++]=Un,Un=e;var r=rn;e=ln;var o=32-jt(r)-1;r&=~(1<<o),a+=1;var c=32-jt(t)+o;if(30<c){var h=o-o%5;c=(r&(1<<h)-1).toString(32),r>>=h,o-=h,rn=1<<32-jt(t)+o|a<<o|r,ln=c+e}else rn=1<<c|a<<o|r,ln=e}function uo(e){e.return!==null&&(mn(e,1),Gd(e,1,0))}function co(e){for(;e===sr;)sr=Va[--Ya],Va[Ya]=null,$i=Va[--Ya],Va[Ya]=null;for(;e===Un;)Un=Yt[--Pt],Yt[Pt]=null,ln=Yt[--Pt],Yt[Pt]=null,rn=Yt[--Pt],Yt[Pt]=null}function qd(e,t){Yt[Pt++]=rn,Yt[Pt++]=ln,Yt[Pt++]=Un,rn=t.id,ln=t.overflow,Un=e}var lt=null,ke=null,Ee=!1,In=null,Kt=!1,fo=Error(l(519));function Mn(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vi(Vt(t,e)),fo}function $d(e){var t=e.stateNode,a=e.type,r=e.memoizedProps;switch(t[rt]=e,t[St]=r,a){case"dialog":ve("cancel",t),ve("close",t);break;case"iframe":case"object":case"embed":ve("load",t);break;case"video":case"audio":for(a=0;a<fs.length;a++)ve(fs[a],t);break;case"source":ve("error",t);break;case"img":case"image":case"link":ve("error",t),ve("load",t);break;case"details":ve("toggle",t);break;case"input":ve("invalid",t),nd(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":ve("invalid",t);break;case"textarea":ve("invalid",t),id(t,r.value,r.defaultValue,r.children)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||r.suppressHydrationWarning===!0||lm(t.textContent,a)?(r.popover!=null&&(ve("beforetoggle",t),ve("toggle",t)),r.onScroll!=null&&ve("scroll",t),r.onScrollEnd!=null&&ve("scrollend",t),r.onClick!=null&&(t.onclick=dn),t=!0):t=!1,t||Mn(e,!0)}function Vd(e){for(lt=e.return;lt;)switch(lt.tag){case 5:case 31:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:lt=lt.return}}function Pa(e){if(e!==lt)return!1;if(!Ee)return Vd(e),Ee=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Cu(e.type,e.memoizedProps)),a=!a),a&&ke&&Mn(e),Vd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ke=vm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ke=vm(e)}else t===27?(t=ke,Xn(e.type)?(e=Mu,Mu=null,ke=e):ke=t):ke=lt?Xt(e.stateNode.nextSibling):null;return!0}function da(){ke=lt=null,Ee=!1}function ho(){var e=In;return e!==null&&(Ot===null?Ot=e:Ot.push.apply(Ot,e),In=null),e}function Vi(e){In===null?In=[e]:In.push(e)}var mo=A(null),fa=null,yn=null;function Ln(e,t,a){$(mo,t._currentValue),t._currentValue=a}function vn(e){e._currentValue=mo.current,z(mo)}function yo(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function vo(e,t,a,r){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){var h=o.child;c=c.firstContext;e:for(;c!==null;){var p=c;c=o;for(var w=0;w<t.length;w++)if(p.context===t[w]){c.lanes|=a,p=c.alternate,p!==null&&(p.lanes|=a),yo(c.return,a,e),r||(h=null);break e}c=p.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(l(341));h.lanes|=a,c=h.alternate,c!==null&&(c.lanes|=a),yo(h,a,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Ka(e,t,a,r){e=null;for(var o=t,c=!1;o!==null;){if(!c){if((o.flags&524288)!==0)c=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(l(387));if(h=h.memoizedProps,h!==null){var p=o.type;Dt(o.pendingProps.value,h.value)||(e!==null?e.push(p):e=[p])}}else if(o===oe.current){if(h=o.alternate,h===null)throw Error(l(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(gs):e=[gs])}o=o.return}e!==null&&vo(t,e,a,r),t.flags|=262144}function rr(e){for(e=e.firstContext;e!==null;){if(!Dt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ha(e){fa=e,yn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ot(e){return Yd(fa,e)}function lr(e,t){return fa===null&&ha(e),Yd(e,t)}function Yd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},yn===null){if(e===null)throw Error(l(308));yn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yn=yn.next=t;return a}var kp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},zp=i.unstable_scheduleCallback,Bp=i.unstable_NormalPriority,Je={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function go(){return{controller:new kp,data:new Map,refCount:0}}function Yi(e){e.refCount--,e.refCount===0&&zp(Bp,function(){e.controller.abort()})}var Pi=null,po=0,Ja=0,Xa=null;function Hp(e,t){if(Pi===null){var a=Pi=[];po=0,Ja=Eu(),Xa={status:"pending",value:void 0,then:function(r){a.push(r)}}}return po++,t.then(Pd,Pd),t}function Pd(){if(--po===0&&Pi!==null){Xa!==null&&(Xa.status="fulfilled");var e=Pi;Pi=null,Ja=0,Xa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Gp(e,t){var a=[],r={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(r.status="rejected",r.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),r}var Kd=I.S;I.S=function(e,t){jh=Rt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Hp(e,t),Kd!==null&&Kd(e,t)};var ma=A(null);function _o(){var e=ma.current;return e!==null?e:Me.pooledCache}function or(e,t){t===null?$(ma,ma.current):$(ma,t.pool)}function Jd(){var e=_o();return e===null?null:{parent:Je._currentValue,pool:e}}var Qa=Error(l(460)),bo=Error(l(474)),ur=Error(l(542)),cr={then:function(){}};function Xd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(dn,dn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fd(e),e;default:if(typeof t.status=="string")t.then(dn,dn);else{if(e=Me,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=r}},function(r){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fd(e),e}throw va=t,Qa}}function ya(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(va=a,Qa):a}}var va=null;function Zd(){if(va===null)throw Error(l(459));var e=va;return va=null,e}function Fd(e){if(e===Qa||e===ur)throw Error(l(483))}var Za=null,Ki=0;function dr(e){var t=Ki;return Ki+=1,Za===null&&(Za=[]),Qd(Za,e,t)}function Ji(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function fr(e,t){throw t.$$typeof===T?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Wd(e){function t(R,x){if(e){var C=R.deletions;C===null?(R.deletions=[x],R.flags|=16):C.push(x)}}function a(R,x){if(!e)return null;for(;x!==null;)t(R,x),x=x.sibling;return null}function r(R){for(var x=new Map;R!==null;)R.key!==null?x.set(R.key,R):x.set(R.index,R),R=R.sibling;return x}function o(R,x){return R=hn(R,x),R.index=0,R.sibling=null,R}function c(R,x,C){return R.index=C,e?(C=R.alternate,C!==null?(C=C.index,C<x?(R.flags|=67108866,x):C):(R.flags|=67108866,x)):(R.flags|=1048576,x)}function h(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function p(R,x,C,k){return x===null||x.tag!==6?(x=lo(C,R.mode,k),x.return=R,x):(x=o(x,C),x.return=R,x)}function w(R,x,C,k){var W=C.type;return W===O?L(R,x,C.props.children,k,C.key):x!==null&&(x.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Oe&&ya(W)===x.type)?(x=o(x,C.props),Ji(x,C),x.return=R,x):(x=ir(C.type,C.key,C.props,null,R.mode,k),Ji(x,C),x.return=R,x)}function j(R,x,C,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=oo(C,R.mode,k),x.return=R,x):(x=o(x,C.children||[]),x.return=R,x)}function L(R,x,C,k,W){return x===null||x.tag!==7?(x=ca(C,R.mode,k,W),x.return=R,x):(x=o(x,C),x.return=R,x)}function B(R,x,C){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=lo(""+x,R.mode,C),x.return=R,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _:return C=ir(x.type,x.key,x.props,null,R.mode,C),Ji(C,x),C.return=R,C;case S:return x=oo(x,R.mode,C),x.return=R,x;case Oe:return x=ya(x),B(R,x,C)}if(be(x)||at(x))return x=ca(x,R.mode,C,null),x.return=R,x;if(typeof x.then=="function")return B(R,dr(x),C);if(x.$$typeof===H)return B(R,lr(R,x),C);fr(R,x)}return null}function D(R,x,C,k){var W=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return W!==null?null:p(R,x,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case _:return C.key===W?w(R,x,C,k):null;case S:return C.key===W?j(R,x,C,k):null;case Oe:return C=ya(C),D(R,x,C,k)}if(be(C)||at(C))return W!==null?null:L(R,x,C,k,null);if(typeof C.then=="function")return D(R,x,dr(C),k);if(C.$$typeof===H)return D(R,x,lr(R,C),k);fr(R,C)}return null}function U(R,x,C,k,W){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return R=R.get(C)||null,p(x,R,""+k,W);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return R=R.get(k.key===null?C:k.key)||null,w(x,R,k,W);case S:return R=R.get(k.key===null?C:k.key)||null,j(x,R,k,W);case Oe:return k=ya(k),U(R,x,C,k,W)}if(be(k)||at(k))return R=R.get(C)||null,L(x,R,k,W,null);if(typeof k.then=="function")return U(R,x,C,dr(k),W);if(k.$$typeof===H)return U(R,x,C,lr(x,k),W);fr(x,k)}return null}function K(R,x,C,k){for(var W=null,Te=null,X=x,de=x=0,_e=null;X!==null&&de<C.length;de++){X.index>de?(_e=X,X=null):_e=X.sibling;var Ae=D(R,X,C[de],k);if(Ae===null){X===null&&(X=_e);break}e&&X&&Ae.alternate===null&&t(R,X),x=c(Ae,x,de),Te===null?W=Ae:Te.sibling=Ae,Te=Ae,X=_e}if(de===C.length)return a(R,X),Ee&&mn(R,de),W;if(X===null){for(;de<C.length;de++)X=B(R,C[de],k),X!==null&&(x=c(X,x,de),Te===null?W=X:Te.sibling=X,Te=X);return Ee&&mn(R,de),W}for(X=r(X);de<C.length;de++)_e=U(X,R,de,C[de],k),_e!==null&&(e&&_e.alternate!==null&&X.delete(_e.key===null?de:_e.key),x=c(_e,x,de),Te===null?W=_e:Te.sibling=_e,Te=_e);return e&&X.forEach(function(ea){return t(R,ea)}),Ee&&mn(R,de),W}function ne(R,x,C,k){if(C==null)throw Error(l(151));for(var W=null,Te=null,X=x,de=x=0,_e=null,Ae=C.next();X!==null&&!Ae.done;de++,Ae=C.next()){X.index>de?(_e=X,X=null):_e=X.sibling;var ea=D(R,X,Ae.value,k);if(ea===null){X===null&&(X=_e);break}e&&X&&ea.alternate===null&&t(R,X),x=c(ea,x,de),Te===null?W=ea:Te.sibling=ea,Te=ea,X=_e}if(Ae.done)return a(R,X),Ee&&mn(R,de),W;if(X===null){for(;!Ae.done;de++,Ae=C.next())Ae=B(R,Ae.value,k),Ae!==null&&(x=c(Ae,x,de),Te===null?W=Ae:Te.sibling=Ae,Te=Ae);return Ee&&mn(R,de),W}for(X=r(X);!Ae.done;de++,Ae=C.next())Ae=U(X,R,de,Ae.value,k),Ae!==null&&(e&&Ae.alternate!==null&&X.delete(Ae.key===null?de:Ae.key),x=c(Ae,x,de),Te===null?W=Ae:Te.sibling=Ae,Te=Ae);return e&&X.forEach(function(F0){return t(R,F0)}),Ee&&mn(R,de),W}function Ie(R,x,C,k){if(typeof C=="object"&&C!==null&&C.type===O&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case _:e:{for(var W=C.key;x!==null;){if(x.key===W){if(W=C.type,W===O){if(x.tag===7){a(R,x.sibling),k=o(x,C.props.children),k.return=R,R=k;break e}}else if(x.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Oe&&ya(W)===x.type){a(R,x.sibling),k=o(x,C.props),Ji(k,C),k.return=R,R=k;break e}a(R,x);break}else t(R,x);x=x.sibling}C.type===O?(k=ca(C.props.children,R.mode,k,C.key),k.return=R,R=k):(k=ir(C.type,C.key,C.props,null,R.mode,k),Ji(k,C),k.return=R,R=k)}return h(R);case S:e:{for(W=C.key;x!==null;){if(x.key===W)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){a(R,x.sibling),k=o(x,C.children||[]),k.return=R,R=k;break e}else{a(R,x);break}else t(R,x);x=x.sibling}k=oo(C,R.mode,k),k.return=R,R=k}return h(R);case Oe:return C=ya(C),Ie(R,x,C,k)}if(be(C))return K(R,x,C,k);if(at(C)){if(W=at(C),typeof W!="function")throw Error(l(150));return C=W.call(C),ne(R,x,C,k)}if(typeof C.then=="function")return Ie(R,x,dr(C),k);if(C.$$typeof===H)return Ie(R,x,lr(R,C),k);fr(R,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,x!==null&&x.tag===6?(a(R,x.sibling),k=o(x,C),k.return=R,R=k):(a(R,x),k=lo(C,R.mode,k),k.return=R,R=k),h(R)):a(R,x)}return function(R,x,C,k){try{Ki=0;var W=Ie(R,x,C,k);return Za=null,W}catch(X){if(X===Qa||X===ur)throw X;var Te=Ut(29,X,null,R.mode);return Te.lanes=k,Te.return=R,Te}finally{}}}var ga=Wd(!0),ef=Wd(!1),kn=!1;function Eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function So(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function zn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(xe&2)!==0){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=ar(e),kd(e,null,a),t}return nr(e,r,t,a),ar(e)}function Xi(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Yc(e,a)}}function wo(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var o=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?o=c=h:c=c.next=h,a=a.next}while(a!==null);c===null?o=c=t:c=c.next=t}else o=c=t;a={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var To=!1;function Qi(){if(To){var e=Xa;if(e!==null)throw e}}function Zi(e,t,a,r){To=!1;var o=e.updateQueue;kn=!1;var c=o.firstBaseUpdate,h=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var w=p,j=w.next;w.next=null,h===null?c=j:h.next=j,h=w;var L=e.alternate;L!==null&&(L=L.updateQueue,p=L.lastBaseUpdate,p!==h&&(p===null?L.firstBaseUpdate=j:p.next=j,L.lastBaseUpdate=w))}if(c!==null){var B=o.baseState;h=0,L=j=w=null,p=c;do{var D=p.lane&-536870913,U=D!==p.lane;if(U?(pe&D)===D:(r&D)===D){D!==0&&D===Ja&&(To=!0),L!==null&&(L=L.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var K=e,ne=p;D=t;var Ie=a;switch(ne.tag){case 1:if(K=ne.payload,typeof K=="function"){B=K.call(Ie,B,D);break e}B=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=ne.payload,D=typeof K=="function"?K.call(Ie,B,D):K,D==null)break e;B=E({},B,D);break e;case 2:kn=!0}}D=p.callback,D!==null&&(e.flags|=64,U&&(e.flags|=8192),U=o.callbacks,U===null?o.callbacks=[D]:U.push(D))}else U={lane:D,tag:p.tag,payload:p.payload,callback:p.callback,next:null},L===null?(j=L=U,w=B):L=L.next=U,h|=D;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;U=p,p=U.next,U.next=null,o.lastBaseUpdate=U,o.shared.pending=null}}while(!0);L===null&&(w=B),o.baseState=w,o.firstBaseUpdate=j,o.lastBaseUpdate=L,c===null&&(o.shared.lanes=0),Vn|=h,e.lanes=h,e.memoizedState=B}}function tf(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function nf(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)tf(a[e],t)}var Fa=A(null),hr=A(0);function af(e,t){e=An,$(hr,e),$(Fa,t),An=e|t.baseLanes}function Ao(){$(hr,An),$(Fa,Fa.current)}function xo(){An=hr.current,z(Fa),z(hr)}var It=A(null),Jt=null;function Hn(e){var t=e.alternate;$(Pe,Pe.current&1),$(It,e),Jt===null&&(t===null||Fa.current!==null||t.memoizedState!==null)&&(Jt=e)}function Oo(e){$(Pe,Pe.current),$(It,e),Jt===null&&(Jt=e)}function sf(e){e.tag===22?($(Pe,Pe.current),$(It,e),Jt===null&&(Jt=e)):Gn()}function Gn(){$(Pe,Pe.current),$(It,It.current)}function Mt(e){z(It),Jt===e&&(Jt=null),z(Pe)}var Pe=A(0);function mr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Uu(a)||Iu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gn=0,ue=null,De=null,Xe=null,yr=!1,Wa=!1,pa=!1,vr=0,Fi=0,ei=null,qp=0;function $e(){throw Error(l(321))}function No(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Dt(e[a],t[a]))return!1;return!0}function Ro(e,t,a,r,o,c){return gn=c,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?qf:Vo,pa=!1,c=a(r,o),pa=!1,Wa&&(c=lf(t,a,r,o)),rf(e),c}function rf(e){I.H=ts;var t=De!==null&&De.next!==null;if(gn=0,Xe=De=ue=null,yr=!1,Fi=0,ei=null,t)throw Error(l(300));e===null||Qe||(e=e.dependencies,e!==null&&rr(e)&&(Qe=!0))}function lf(e,t,a,r){ue=e;var o=0;do{if(Wa&&(ei=null),Fi=0,Wa=!1,25<=o)throw Error(l(301));if(o+=1,Xe=De=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}I.H=$f,c=t(a,r)}while(Wa);return c}function $p(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?Wi(t):t,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(ue.flags|=1024),t}function Co(){var e=vr!==0;return vr=0,e}function jo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Do(e){if(yr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}yr=!1}gn=0,Xe=De=ue=null,Wa=!1,Fi=vr=0,ei=null}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?ue.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Ke(){if(De===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=Xe===null?ue.memoizedState:Xe.next;if(t!==null)Xe=t,De=e;else{if(e===null)throw ue.alternate===null?Error(l(467)):Error(l(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Xe===null?ue.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function gr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wi(e){var t=Fi;return Fi+=1,ei===null&&(ei=[]),e=Qd(ei,e,t),t=ue,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?qf:Vo),e}function pr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wi(e);if(e.$$typeof===H)return ot(e)}throw Error(l(438,String(e)))}function Uo(e){var t=null,a=ue.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var r=ue.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=gr(),ue.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),r=0;r<e;r++)a[r]=yt;return t.index++,a}function pn(e,t){return typeof t=="function"?t(e):t}function _r(e){var t=Ke();return Io(t,De,e)}function Io(e,t,a){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=a;var o=e.baseQueue,c=r.pending;if(c!==null){if(o!==null){var h=o.next;o.next=c.next,c.next=h}t.baseQueue=o=c,r.pending=null}if(c=e.baseState,o===null)e.memoizedState=c;else{t=o.next;var p=h=null,w=null,j=t,L=!1;do{var B=j.lane&-536870913;if(B!==j.lane?(pe&B)===B:(gn&B)===B){var D=j.revertLane;if(D===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),B===Ja&&(L=!0);else if((gn&D)===D){j=j.next,D===Ja&&(L=!0);continue}else B={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(p=w=B,h=c):w=w.next=B,ue.lanes|=D,Vn|=D;B=j.action,pa&&a(c,B),c=j.hasEagerState?j.eagerState:a(c,B)}else D={lane:B,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(p=w=D,h=c):w=w.next=D,ue.lanes|=B,Vn|=B;j=j.next}while(j!==null&&j!==t);if(w===null?h=c:w.next=p,!Dt(c,e.memoizedState)&&(Qe=!0,L&&(a=Xa,a!==null)))throw a;e.memoizedState=c,e.baseState=h,e.baseQueue=w,r.lastRenderedState=c}return o===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Mo(e){var t=Ke(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var r=a.dispatch,o=a.pending,c=t.memoizedState;if(o!==null){a.pending=null;var h=o=o.next;do c=e(c,h.action),h=h.next;while(h!==o);Dt(c,t.memoizedState)||(Qe=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,r]}function of(e,t,a){var r=ue,o=Ke(),c=Ee;if(c){if(a===void 0)throw Error(l(407));a=a()}else a=t();var h=!Dt((De||o).memoizedState,a);if(h&&(o.memoizedState=a,Qe=!0),o=o.queue,zo(df.bind(null,r,o,e),[e]),o.getSnapshot!==t||h||Xe!==null&&Xe.memoizedState.tag&1){if(r.flags|=2048,ti(9,{destroy:void 0},cf.bind(null,r,o,a,t),null),Me===null)throw Error(l(349));c||(gn&127)!==0||uf(r,t,a)}return a}function uf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ue.updateQueue,t===null?(t=gr(),ue.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function cf(e,t,a,r){t.value=a,t.getSnapshot=r,ff(t)&&hf(e)}function df(e,t,a){return a(function(){ff(t)&&hf(e)})}function ff(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Dt(e,a)}catch{return!0}}function hf(e){var t=ua(e,2);t!==null&&Nt(t,e,2)}function Lo(e){var t=_t();if(typeof e=="function"){var a=e;if(e=a(),pa){Cn(!0);try{a()}finally{Cn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:e},t}function mf(e,t,a,r){return e.baseState=a,Io(e,De,typeof r=="function"?r:pn)}function Vp(e,t,a,r,o){if(Sr(e))throw Error(l(485));if(e=t.action,e!==null){var c={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){c.listeners.push(h)}};I.T!==null?a(!0):c.isTransition=!1,r(c),a=t.pending,a===null?(c.next=t.pending=c,yf(t,c)):(c.next=a.next,t.pending=a.next=c)}}function yf(e,t){var a=t.action,r=t.payload,o=e.state;if(t.isTransition){var c=I.T,h={};I.T=h;try{var p=a(o,r),w=I.S;w!==null&&w(h,p),vf(e,t,p)}catch(j){ko(e,t,j)}finally{c!==null&&h.types!==null&&(c.types=h.types),I.T=c}}else try{c=a(o,r),vf(e,t,c)}catch(j){ko(e,t,j)}}function vf(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){gf(e,t,r)},function(r){return ko(e,t,r)}):gf(e,t,a)}function gf(e,t,a){t.status="fulfilled",t.value=a,pf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,yf(e,a)))}function ko(e,t,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=a,pf(t),t=t.next;while(t!==r)}e.action=null}function pf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function _f(e,t){return t}function bf(e,t){if(Ee){var a=Me.formState;if(a!==null){e:{var r=ue;if(Ee){if(ke){t:{for(var o=ke,c=Kt;o.nodeType!==8;){if(!c){o=null;break t}if(o=Xt(o.nextSibling),o===null){o=null;break t}}c=o.data,o=c==="F!"||c==="F"?o:null}if(o){ke=Xt(o.nextSibling),r=o.data==="F!";break e}}Mn(r)}r=!1}r&&(t=a[0])}}return a=_t(),a.memoizedState=a.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_f,lastRenderedState:t},a.queue=r,a=Bf.bind(null,ue,r),r.dispatch=a,r=Lo(!1),c=$o.bind(null,ue,!1,r.queue),r=_t(),o={state:t,dispatch:null,action:e,pending:null},r.queue=o,a=Vp.bind(null,ue,o,c,a),o.dispatch=a,r.memoizedState=e,[t,a,!1]}function Ef(e){var t=Ke();return Sf(t,De,e)}function Sf(e,t,a){if(t=Io(e,t,_f)[0],e=_r(pn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=Wi(t)}catch(h){throw h===Qa?ur:h}else r=t;t=Ke();var o=t.queue,c=o.dispatch;return a!==t.memoizedState&&(ue.flags|=2048,ti(9,{destroy:void 0},Yp.bind(null,o,a),null)),[r,c,e]}function Yp(e,t){e.action=t}function wf(e){var t=Ke(),a=De;if(a!==null)return Sf(t,a,e);Ke(),t=t.memoizedState,a=Ke();var r=a.queue.dispatch;return a.memoizedState=e,[t,r,!1]}function ti(e,t,a,r){return e={tag:e,create:a,deps:r,inst:t,next:null},t=ue.updateQueue,t===null&&(t=gr(),ue.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function Tf(){return Ke().memoizedState}function br(e,t,a,r){var o=_t();ue.flags|=e,o.memoizedState=ti(1|t,{destroy:void 0},a,r===void 0?null:r)}function Er(e,t,a,r){var o=Ke();r=r===void 0?null:r;var c=o.memoizedState.inst;De!==null&&r!==null&&No(r,De.memoizedState.deps)?o.memoizedState=ti(t,c,a,r):(ue.flags|=e,o.memoizedState=ti(1|t,c,a,r))}function Af(e,t){br(8390656,8,e,t)}function zo(e,t){Er(2048,8,e,t)}function Pp(e){ue.flags|=4;var t=ue.updateQueue;if(t===null)t=gr(),ue.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function xf(e){var t=Ke().memoizedState;return Pp({ref:t,nextImpl:e}),function(){if((xe&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Of(e,t){return Er(4,2,e,t)}function Nf(e,t){return Er(4,4,e,t)}function Rf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cf(e,t,a){a=a!=null?a.concat([e]):null,Er(4,4,Rf.bind(null,t,e),a)}function Bo(){}function jf(e,t){var a=Ke();t=t===void 0?null:t;var r=a.memoizedState;return t!==null&&No(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function Df(e,t){var a=Ke();t=t===void 0?null:t;var r=a.memoizedState;if(t!==null&&No(t,r[1]))return r[0];if(r=e(),pa){Cn(!0);try{e()}finally{Cn(!1)}}return a.memoizedState=[r,t],r}function Ho(e,t,a){return a===void 0||(gn&1073741824)!==0&&(pe&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Uh(),ue.lanes|=e,Vn|=e,a)}function Uf(e,t,a,r){return Dt(a,t)?a:Fa.current!==null?(e=Ho(e,a,r),Dt(e,t)||(Qe=!0),e):(gn&42)===0||(gn&1073741824)!==0&&(pe&261930)===0?(Qe=!0,e.memoizedState=a):(e=Uh(),ue.lanes|=e,Vn|=e,t)}function If(e,t,a,r,o){var c=q.p;q.p=c!==0&&8>c?c:8;var h=I.T,p={};I.T=p,$o(e,!1,t,a);try{var w=o(),j=I.S;if(j!==null&&j(p,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var L=Gp(w,r);es(e,t,L,zt(e))}else es(e,t,r,zt(e))}catch(B){es(e,t,{then:function(){},status:"rejected",reason:B},zt())}finally{q.p=c,h!==null&&p.types!==null&&(h.types=p.types),I.T=h}}function Kp(){}function Go(e,t,a,r){if(e.tag!==5)throw Error(l(476));var o=Mf(e).queue;If(e,o,t,F,a===null?Kp:function(){return Lf(e),a(r)})}function Mf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:F},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Lf(e){var t=Mf(e);t.next===null&&(t=e.alternate.memoizedState),es(e,t.next.queue,{},zt())}function qo(){return ot(gs)}function kf(){return Ke().memoizedState}function zf(){return Ke().memoizedState}function Jp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=zt();e=zn(a);var r=Bn(t,e,a);r!==null&&(Nt(r,t,a),Xi(r,t,a)),t={cache:go()},e.payload=t;return}t=t.return}}function Xp(e,t,a){var r=zt();a={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sr(e)?Hf(t,a):(a=so(e,t,a,r),a!==null&&(Nt(a,e,r),Gf(a,t,r)))}function Bf(e,t,a){var r=zt();es(e,t,a,r)}function es(e,t,a,r){var o={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sr(e))Hf(t,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var h=t.lastRenderedState,p=c(h,a);if(o.hasEagerState=!0,o.eagerState=p,Dt(p,h))return nr(e,t,o,0),Me===null&&tr(),!1}catch{}finally{}if(a=so(e,t,o,r),a!==null)return Nt(a,e,r),Gf(a,t,r),!0}return!1}function $o(e,t,a,r){if(r={lane:2,revertLane:Eu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Sr(e)){if(t)throw Error(l(479))}else t=so(e,a,r,2),t!==null&&Nt(t,e,2)}function Sr(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function Hf(e,t){Wa=yr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Gf(e,t,a){if((a&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Yc(e,a)}}var ts={readContext:ot,use:pr,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e};ts.useEffectEvent=$e;var qf={readContext:ot,use:pr,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:Af,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,br(4194308,4,Rf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return br(4194308,4,e,t)},useInsertionEffect:function(e,t){br(4,2,e,t)},useMemo:function(e,t){var a=_t();t=t===void 0?null:t;var r=e();if(pa){Cn(!0);try{e()}finally{Cn(!1)}}return a.memoizedState=[r,t],r},useReducer:function(e,t,a){var r=_t();if(a!==void 0){var o=a(t);if(pa){Cn(!0);try{a(t)}finally{Cn(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=Xp.bind(null,ue,e),[r.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:function(e){e=Lo(e);var t=e.queue,a=Bf.bind(null,ue,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Bo,useDeferredValue:function(e,t){var a=_t();return Ho(a,e,t)},useTransition:function(){var e=Lo(!1);return e=If.bind(null,ue,e.queue,!0,!1),_t().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var r=ue,o=_t();if(Ee){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),Me===null)throw Error(l(349));(pe&127)!==0||uf(r,t,a)}o.memoizedState=a;var c={value:a,getSnapshot:t};return o.queue=c,Af(df.bind(null,r,c,e),[e]),r.flags|=2048,ti(9,{destroy:void 0},cf.bind(null,r,c,a,t),null),a},useId:function(){var e=_t(),t=Me.identifierPrefix;if(Ee){var a=ln,r=rn;a=(r&~(1<<32-jt(r)-1)).toString(32)+a,t="_"+t+"R_"+a,a=vr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=qp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:qo,useFormState:bf,useActionState:bf,useOptimistic:function(e){var t=_t();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=$o.bind(null,ue,!0,a),a.dispatch=t,[e,t]},useMemoCache:Uo,useCacheRefresh:function(){return _t().memoizedState=Jp.bind(null,ue)},useEffectEvent:function(e){var t=_t(),a={impl:e};return t.memoizedState=a,function(){if((xe&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},Vo={readContext:ot,use:pr,useCallback:jf,useContext:ot,useEffect:zo,useImperativeHandle:Cf,useInsertionEffect:Of,useLayoutEffect:Nf,useMemo:Df,useReducer:_r,useRef:Tf,useState:function(){return _r(pn)},useDebugValue:Bo,useDeferredValue:function(e,t){var a=Ke();return Uf(a,De.memoizedState,e,t)},useTransition:function(){var e=_r(pn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:Wi(e),t]},useSyncExternalStore:of,useId:kf,useHostTransitionStatus:qo,useFormState:Ef,useActionState:Ef,useOptimistic:function(e,t){var a=Ke();return mf(a,De,e,t)},useMemoCache:Uo,useCacheRefresh:zf};Vo.useEffectEvent=xf;var $f={readContext:ot,use:pr,useCallback:jf,useContext:ot,useEffect:zo,useImperativeHandle:Cf,useInsertionEffect:Of,useLayoutEffect:Nf,useMemo:Df,useReducer:Mo,useRef:Tf,useState:function(){return Mo(pn)},useDebugValue:Bo,useDeferredValue:function(e,t){var a=Ke();return De===null?Ho(a,e,t):Uf(a,De.memoizedState,e,t)},useTransition:function(){var e=Mo(pn)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:Wi(e),t]},useSyncExternalStore:of,useId:kf,useHostTransitionStatus:qo,useFormState:wf,useActionState:wf,useOptimistic:function(e,t){var a=Ke();return De!==null?mf(a,De,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:zf};$f.useEffectEvent=xf;function Yo(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:E({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Po={enqueueSetState:function(e,t,a){e=e._reactInternals;var r=zt(),o=zn(r);o.payload=t,a!=null&&(o.callback=a),t=Bn(e,o,r),t!==null&&(Nt(t,e,r),Xi(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=zt(),o=zn(r);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=Bn(e,o,r),t!==null&&(Nt(t,e,r),Xi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=zt(),r=zn(a);r.tag=2,t!=null&&(r.callback=t),t=Bn(e,r,a),t!==null&&(Nt(t,e,a),Xi(t,e,a))}};function Vf(e,t,a,r,o,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,c,h):t.prototype&&t.prototype.isPureReactComponent?!Gi(a,r)||!Gi(o,c):!0}function Yf(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&Po.enqueueReplaceState(t,t.state,null)}function _a(e,t){var a=t;if("ref"in t){a={};for(var r in t)r!=="ref"&&(a[r]=t[r])}if(e=e.defaultProps){a===t&&(a=E({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function Pf(e){er(e)}function Kf(e){console.error(e)}function Jf(e){er(e)}function wr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Xf(e,t,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Ko(e,t,a){return a=zn(a),a.tag=3,a.payload={element:null},a.callback=function(){wr(e,t)},a}function Qf(e){return e=zn(e),e.tag=3,e}function Zf(e,t,a,r){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var c=r.value;e.payload=function(){return o(c)},e.callback=function(){Xf(t,a,r)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Xf(t,a,r),typeof o!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var p=r.stack;this.componentDidCatch(r.value,{componentStack:p!==null?p:""})})}function Qp(e,t,a,r,o){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=a.alternate,t!==null&&Ka(t,a,o,!0),a=It.current,a!==null){switch(a.tag){case 31:case 13:return Jt===null?Mr():a.alternate===null&&Ve===0&&(Ve=3),a.flags&=-257,a.flags|=65536,a.lanes=o,r===cr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([r]):t.add(r),pu(e,r,o)),!1;case 22:return a.flags|=65536,r===cr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([r]):a.add(r)),pu(e,r,o)),!1}throw Error(l(435,a.tag))}return pu(e,r,o),Mr(),!1}if(Ee)return t=It.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==fo&&(e=Error(l(422),{cause:r}),Vi(Vt(e,a)))):(r!==fo&&(t=Error(l(423),{cause:r}),Vi(Vt(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,r=Vt(r,a),o=Ko(e.stateNode,r,o),wo(e,o),Ve!==4&&(Ve=2)),!1;var c=Error(l(520),{cause:r});if(c=Vt(c,a),us===null?us=[c]:us.push(c),Ve!==4&&(Ve=2),t===null)return!0;r=Vt(r,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Ko(a.stateNode,r,e),wo(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Yn===null||!Yn.has(c))))return a.flags|=65536,o&=-o,a.lanes|=o,o=Qf(o),Zf(o,e,a,r),wo(a,o),!1}a=a.return}while(a!==null);return!1}var Jo=Error(l(461)),Qe=!1;function ut(e,t,a,r){t.child=e===null?ef(t,null,a,r):ga(t,e.child,a,r)}function Ff(e,t,a,r,o){a=a.render;var c=t.ref;if("ref"in r){var h={};for(var p in r)p!=="ref"&&(h[p]=r[p])}else h=r;return ha(t),r=Ro(e,t,a,h,c,o),p=Co(),e!==null&&!Qe?(jo(e,t,o),_n(e,t,o)):(Ee&&p&&uo(t),t.flags|=1,ut(e,t,r,o),t.child)}function Wf(e,t,a,r,o){if(e===null){var c=a.type;return typeof c=="function"&&!ro(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,eh(e,t,c,r,o)):(e=ir(a.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!nu(e,o)){var h=c.memoizedProps;if(a=a.compare,a=a!==null?a:Gi,a(h,r)&&e.ref===t.ref)return _n(e,t,o)}return t.flags|=1,e=hn(c,r),e.ref=t.ref,e.return=t,t.child=e}function eh(e,t,a,r,o){if(e!==null){var c=e.memoizedProps;if(Gi(c,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=c,nu(e,o))(e.flags&131072)!==0&&(Qe=!0);else return t.lanes=e.lanes,_n(e,t,o)}return Xo(e,t,a,r,o)}function th(e,t,a,r){var o=r.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(r=t.child=e.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~c}else r=0,t.child=null;return nh(e,t,c,a,r)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&or(t,c!==null?c.cachePool:null),c!==null?af(t,c):Ao(),sf(t);else return r=t.lanes=536870912,nh(e,t,c!==null?c.baseLanes|a:a,a,r)}else c!==null?(or(t,c.cachePool),af(t,c),Gn(),t.memoizedState=null):(e!==null&&or(t,null),Ao(),Gn());return ut(e,t,o,a),t.child}function ns(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function nh(e,t,a,r,o){var c=_o();return c=c===null?null:{parent:Je._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&or(t,null),Ao(),sf(t),e!==null&&Ka(e,t,r,!0),t.childLanes=o,null}function Tr(e,t){return t=xr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ah(e,t,a){return ga(t,e.child,null,a),e=Tr(t,t.pendingProps),e.flags|=2,Mt(t),t.memoizedState=null,e}function Zp(e,t,a){var r=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(r.mode==="hidden")return e=Tr(t,r),t.lanes=536870912,ns(null,e);if(Oo(t),(e=ke)?(e=ym(e,Kt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Un!==null?{id:rn,overflow:ln}:null,retryLane:536870912,hydrationErrors:null},a=Bd(e),a.return=t,t.child=a,lt=t,ke=null)):e=null,e===null)throw Mn(t);return t.lanes=536870912,null}return Tr(t,r)}var c=e.memoizedState;if(c!==null){var h=c.dehydrated;if(Oo(t),o)if(t.flags&256)t.flags&=-257,t=ah(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Qe||Ka(e,t,a,!1),o=(a&e.childLanes)!==0,Qe||o){if(r=Me,r!==null&&(h=Pc(r,a),h!==0&&h!==c.retryLane))throw c.retryLane=h,ua(e,h),Nt(r,e,h),Jo;Mr(),t=ah(e,t,a)}else e=c.treeContext,ke=Xt(h.nextSibling),lt=t,Ee=!0,In=null,Kt=!1,e!==null&&qd(t,e),t=Tr(t,r),t.flags|=4096;return t}return e=hn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ar(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Xo(e,t,a,r,o){return ha(t),a=Ro(e,t,a,r,void 0,o),r=Co(),e!==null&&!Qe?(jo(e,t,o),_n(e,t,o)):(Ee&&r&&uo(t),t.flags|=1,ut(e,t,a,o),t.child)}function ih(e,t,a,r,o,c){return ha(t),t.updateQueue=null,a=lf(t,r,a,o),rf(e),r=Co(),e!==null&&!Qe?(jo(e,t,c),_n(e,t,c)):(Ee&&r&&uo(t),t.flags|=1,ut(e,t,a,c),t.child)}function sh(e,t,a,r,o){if(ha(t),t.stateNode===null){var c=$a,h=a.contextType;typeof h=="object"&&h!==null&&(c=ot(h)),c=new a(r,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Po,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=r,c.state=t.memoizedState,c.refs={},Eo(t),h=a.contextType,c.context=typeof h=="object"&&h!==null?ot(h):$a,c.state=t.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(Yo(t,a,h,r),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(h=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),h!==c.state&&Po.enqueueReplaceState(c,c.state,null),Zi(t,r,c,o),Qi(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){c=t.stateNode;var p=t.memoizedProps,w=_a(a,p);c.props=w;var j=c.context,L=a.contextType;h=$a,typeof L=="object"&&L!==null&&(h=ot(L));var B=a.getDerivedStateFromProps;L=typeof B=="function"||typeof c.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,L||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p||j!==h)&&Yf(t,c,r,h),kn=!1;var D=t.memoizedState;c.state=D,Zi(t,r,c,o),Qi(),j=t.memoizedState,p||D!==j||kn?(typeof B=="function"&&(Yo(t,a,B,r),j=t.memoizedState),(w=kn||Vf(t,a,w,r,D,j,h))?(L||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=j),c.props=r,c.state=j,c.context=h,r=w):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{c=t.stateNode,So(e,t),h=t.memoizedProps,L=_a(a,h),c.props=L,B=t.pendingProps,D=c.context,j=a.contextType,w=$a,typeof j=="object"&&j!==null&&(w=ot(j)),p=a.getDerivedStateFromProps,(j=typeof p=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==B||D!==w)&&Yf(t,c,r,w),kn=!1,D=t.memoizedState,c.state=D,Zi(t,r,c,o),Qi();var U=t.memoizedState;h!==B||D!==U||kn||e!==null&&e.dependencies!==null&&rr(e.dependencies)?(typeof p=="function"&&(Yo(t,a,p,r),U=t.memoizedState),(L=kn||Vf(t,a,L,r,D,U,w)||e!==null&&e.dependencies!==null&&rr(e.dependencies))?(j||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,U,w),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,U,w)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=U),c.props=r,c.state=U,c.context=w,r=L):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),r=!1)}return c=r,Ar(e,t),r=(t.flags&128)!==0,c||r?(c=t.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&r?(t.child=ga(t,e.child,null,o),t.child=ga(t,null,a,o)):ut(e,t,a,o),t.memoizedState=c.state,e=t.child):e=_n(e,t,o),e}function rh(e,t,a,r){return da(),t.flags|=256,ut(e,t,a,r),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zo(e){return{baseLanes:e,cachePool:Jd()}}function Fo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=kt),e}function lh(e,t,a){var r=t.pendingProps,o=!1,c=(t.flags&128)!==0,h;if((h=c)||(h=e!==null&&e.memoizedState===null?!1:(Pe.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(o?Hn(t):Gn(),(e=ke)?(e=ym(e,Kt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Un!==null?{id:rn,overflow:ln}:null,retryLane:536870912,hydrationErrors:null},a=Bd(e),a.return=t,t.child=a,lt=t,ke=null)):e=null,e===null)throw Mn(t);return Iu(e)?t.lanes=32:t.lanes=536870912,null}var p=r.children;return r=r.fallback,o?(Gn(),o=t.mode,p=xr({mode:"hidden",children:p},o),r=ca(r,o,a,null),p.return=t,r.return=t,p.sibling=r,t.child=p,r=t.child,r.memoizedState=Zo(a),r.childLanes=Fo(e,h,a),t.memoizedState=Qo,ns(null,r)):(Hn(t),Wo(t,p))}var w=e.memoizedState;if(w!==null&&(p=w.dehydrated,p!==null)){if(c)t.flags&256?(Hn(t),t.flags&=-257,t=eu(e,t,a)):t.memoizedState!==null?(Gn(),t.child=e.child,t.flags|=128,t=null):(Gn(),p=r.fallback,o=t.mode,r=xr({mode:"visible",children:r.children},o),p=ca(p,o,a,null),p.flags|=2,r.return=t,p.return=t,r.sibling=p,t.child=r,ga(t,e.child,null,a),r=t.child,r.memoizedState=Zo(a),r.childLanes=Fo(e,h,a),t.memoizedState=Qo,t=ns(null,r));else if(Hn(t),Iu(p)){if(h=p.nextSibling&&p.nextSibling.dataset,h)var j=h.dgst;h=j,r=Error(l(419)),r.stack="",r.digest=h,Vi({value:r,source:null,stack:null}),t=eu(e,t,a)}else if(Qe||Ka(e,t,a,!1),h=(a&e.childLanes)!==0,Qe||h){if(h=Me,h!==null&&(r=Pc(h,a),r!==0&&r!==w.retryLane))throw w.retryLane=r,ua(e,r),Nt(h,e,r),Jo;Uu(p)||Mr(),t=eu(e,t,a)}else Uu(p)?(t.flags|=192,t.child=e.child,t=null):(e=w.treeContext,ke=Xt(p.nextSibling),lt=t,Ee=!0,In=null,Kt=!1,e!==null&&qd(t,e),t=Wo(t,r.children),t.flags|=4096);return t}return o?(Gn(),p=r.fallback,o=t.mode,w=e.child,j=w.sibling,r=hn(w,{mode:"hidden",children:r.children}),r.subtreeFlags=w.subtreeFlags&65011712,j!==null?p=hn(j,p):(p=ca(p,o,a,null),p.flags|=2),p.return=t,r.return=t,r.sibling=p,t.child=r,ns(null,r),r=t.child,p=e.child.memoizedState,p===null?p=Zo(a):(o=p.cachePool,o!==null?(w=Je._currentValue,o=o.parent!==w?{parent:w,pool:w}:o):o=Jd(),p={baseLanes:p.baseLanes|a,cachePool:o}),r.memoizedState=p,r.childLanes=Fo(e,h,a),t.memoizedState=Qo,ns(e.child,r)):(Hn(t),a=e.child,e=a.sibling,a=hn(a,{mode:"visible",children:r.children}),a.return=t,a.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=a,t.memoizedState=null,a)}function Wo(e,t){return t=xr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function xr(e,t){return e=Ut(22,e,null,t),e.lanes=0,e}function eu(e,t,a){return ga(t,e.child,null,a),e=Wo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oh(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yo(e.return,t,a)}function tu(e,t,a,r,o,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:o,treeForkCount:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=r,h.tail=a,h.tailMode=o,h.treeForkCount=c)}function uh(e,t,a){var r=t.pendingProps,o=r.revealOrder,c=r.tail;r=r.children;var h=Pe.current,p=(h&2)!==0;if(p?(h=h&1|2,t.flags|=128):h&=1,$(Pe,h),ut(e,t,r,a),r=Ee?$i:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oh(e,a,t);else if(e.tag===19)oh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&mr(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),tu(t,!1,o,a,c,r);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&mr(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}tu(t,!0,a,null,c,r);break;case"together":tu(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function _n(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ka(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=hn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=hn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function nu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&rr(e)))}function Fp(e,t,a){switch(t.tag){case 3:He(t,t.stateNode.containerInfo),Ln(t,Je,e.memoizedState.cache),da();break;case 27:case 5:te(t);break;case 4:He(t,t.stateNode.containerInfo);break;case 10:Ln(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Oo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Hn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?lh(e,t,a):(Hn(t),e=_n(e,t,a),e!==null?e.sibling:null);Hn(t);break;case 19:var o=(e.flags&128)!==0;if(r=(a&t.childLanes)!==0,r||(Ka(e,t,a,!1),r=(a&t.childLanes)!==0),o){if(r)return uh(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),$(Pe,Pe.current),r)break;return null;case 22:return t.lanes=0,th(e,t,a,t.pendingProps);case 24:Ln(t,Je,e.memoizedState.cache)}return _n(e,t,a)}function ch(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Qe=!0;else{if(!nu(e,a)&&(t.flags&128)===0)return Qe=!1,Fp(e,t,a);Qe=(e.flags&131072)!==0}else Qe=!1,Ee&&(t.flags&1048576)!==0&&Gd(t,$i,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ya(t.elementType),t.type=e,typeof e=="function")ro(e)?(r=_a(e,r),t.tag=1,t=sh(null,t,e,r,a)):(t.tag=0,t=Xo(null,t,e,r,a));else{if(e!=null){var o=e.$$typeof;if(o===Y){t.tag=11,t=Ff(null,t,e,r,a);break e}else if(o===V){t.tag=14,t=Wf(null,t,e,r,a);break e}}throw t=fe(e)||e,Error(l(306,t,""))}}return t;case 0:return Xo(e,t,t.type,t.pendingProps,a);case 1:return r=t.type,o=_a(r,t.pendingProps),sh(e,t,r,o,a);case 3:e:{if(He(t,t.stateNode.containerInfo),e===null)throw Error(l(387));r=t.pendingProps;var c=t.memoizedState;o=c.element,So(e,t),Zi(t,r,null,a);var h=t.memoizedState;if(r=h.cache,Ln(t,Je,r),r!==c.cache&&vo(t,[Je],a,!0),Qi(),r=h.element,c.isDehydrated)if(c={element:r,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=rh(e,t,r,a);break e}else if(r!==o){o=Vt(Error(l(424)),t),Vi(o),t=rh(e,t,r,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ke=Xt(e.firstChild),lt=t,Ee=!0,In=null,Kt=!0,a=ef(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(da(),r===o){t=_n(e,t,a);break e}ut(e,t,r,a)}t=t.child}return t;case 26:return Ar(e,t),e===null?(a=Em(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ee||(a=t.type,e=t.pendingProps,r=qr(he.current).createElement(a),r[rt]=t,r[St]=e,ct(r,a,e),it(r),t.stateNode=r):t.memoizedState=Em(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),e===null&&Ee&&(r=t.stateNode=pm(t.type,t.pendingProps,he.current),lt=t,Kt=!0,o=ke,Xn(t.type)?(Mu=o,ke=Xt(r.firstChild)):ke=o),ut(e,t,t.pendingProps.children,a),Ar(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((o=r=ke)&&(r=N0(r,t.type,t.pendingProps,Kt),r!==null?(t.stateNode=r,lt=t,ke=Xt(r.firstChild),Kt=!1,o=!0):o=!1),o||Mn(t)),te(t),o=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,r=c.children,Cu(o,c)?r=null:h!==null&&Cu(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=Ro(e,t,$p,null,null,a),gs._currentValue=o),Ar(e,t),ut(e,t,r,a),t.child;case 6:return e===null&&Ee&&((e=a=ke)&&(a=R0(a,t.pendingProps,Kt),a!==null?(t.stateNode=a,lt=t,ke=null,e=!0):e=!1),e||Mn(t)),null;case 13:return lh(e,t,a);case 4:return He(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ga(t,null,r,a):ut(e,t,r,a),t.child;case 11:return Ff(e,t,t.type,t.pendingProps,a);case 7:return ut(e,t,t.pendingProps,a),t.child;case 8:return ut(e,t,t.pendingProps.children,a),t.child;case 12:return ut(e,t,t.pendingProps.children,a),t.child;case 10:return r=t.pendingProps,Ln(t,t.type,r.value),ut(e,t,r.children,a),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,ha(t),o=ot(o),r=r(o),t.flags|=1,ut(e,t,r,a),t.child;case 14:return Wf(e,t,t.type,t.pendingProps,a);case 15:return eh(e,t,t.type,t.pendingProps,a);case 19:return uh(e,t,a);case 31:return Zp(e,t,a);case 22:return th(e,t,a,t.pendingProps);case 24:return ha(t),r=ot(Je),e===null?(o=_o(),o===null&&(o=Me,c=go(),o.pooledCache=c,c.refCount++,c!==null&&(o.pooledCacheLanes|=a),o=c),t.memoizedState={parent:r,cache:o},Eo(t),Ln(t,Je,o)):((e.lanes&a)!==0&&(So(e,t),Zi(t,null,null,a),Qi()),o=e.memoizedState,c=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ln(t,Je,r)):(r=c.cache,Ln(t,Je,r),r!==o.cache&&vo(t,[Je],a,!0))),ut(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function bn(e){e.flags|=4}function au(e,t,a,r,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(kh())e.flags|=8192;else throw va=cr,bo}else e.flags&=-16777217}function dh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!xm(t))if(kh())e.flags|=8192;else throw va=cr,bo}function Or(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?$c():536870912,e.lanes|=t,si|=t)}function as(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function Wp(e,t,a){var r=t.pendingProps;switch(co(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return ze(t),null;case 3:return a=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),vn(Je),Q(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?bn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ho())),ze(t),null;case 26:var o=t.type,c=t.memoizedState;return e===null?(bn(t),c!==null?(ze(t),dh(t,c)):(ze(t),au(t,o,null,r,a))):c?c!==e.memoizedState?(bn(t),ze(t),dh(t,c)):(ze(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&bn(t),ze(t),au(t,o,e,r,a)),null;case 27:if(me(t),a=he.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&bn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return ze(t),null}e=P.current,Pa(t)?$d(t):(e=pm(o,r,a),t.stateNode=e,bn(t))}return ze(t),null;case 5:if(me(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&bn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return ze(t),null}if(c=P.current,Pa(t))$d(t);else{var h=qr(he.current);switch(c){case 1:c=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:c=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":c=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":c=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":c=h.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof r.is=="string"?h.createElement("select",{is:r.is}):h.createElement("select"),r.multiple?c.multiple=!0:r.size&&(c.size=r.size);break;default:c=typeof r.is=="string"?h.createElement(o,{is:r.is}):h.createElement(o)}}c[rt]=t,c[St]=r;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)c.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=c;e:switch(ct(c,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&bn(t)}}return ze(t),au(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&bn(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(l(166));if(e=he.current,Pa(t)){if(e=t.stateNode,a=t.memoizedProps,r=null,o=lt,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}e[rt]=t,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||lm(e.nodeValue,a)),e||Mn(t,!0)}else e=qr(e).createTextNode(r),e[rt]=t,t.stateNode=e}return ze(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(r=Pa(t),a!==null){if(e===null){if(!r)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[rt]=t}else da(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ze(t),e=!1}else a=ho(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Mt(t),t):(Mt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return ze(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Pa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(l(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));o[rt]=t}else da(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ze(t),o=!1}else o=ho(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Mt(t),t):(Mt(t),null)}return Mt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=r!==null,e=e!==null&&e.memoizedState!==null,a&&(r=t.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Or(t,t.updateQueue),ze(t),null);case 4:return Q(),e===null&&Au(t.stateNode.containerInfo),ze(t),null;case 10:return vn(t.type),ze(t),null;case 19:if(z(Pe),r=t.memoizedState,r===null)return ze(t),null;if(o=(t.flags&128)!==0,c=r.rendering,c===null)if(o)as(r,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=mr(e),c!==null){for(t.flags|=128,as(r,!1),e=c.updateQueue,t.updateQueue=e,Or(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)zd(a,e),a=a.sibling;return $(Pe,Pe.current&1|2),Ee&&mn(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Rt()>Dr&&(t.flags|=128,o=!0,as(r,!1),t.lanes=4194304)}else{if(!o)if(e=mr(c),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Or(t,e),as(r,!0),r.tail===null&&r.tailMode==="hidden"&&!c.alternate&&!Ee)return ze(t),null}else 2*Rt()-r.renderingStartTime>Dr&&a!==536870912&&(t.flags|=128,o=!0,as(r,!1),t.lanes=4194304);r.isBackwards?(c.sibling=t.child,t.child=c):(e=r.last,e!==null?e.sibling=c:t.child=c,r.last=c)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Rt(),e.sibling=null,a=Pe.current,$(Pe,o?a&1|2:a&1),Ee&&mn(t,r.treeForkCount),e):(ze(t),null);case 22:case 23:return Mt(t),xo(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(a&536870912)!==0&&(t.flags&128)===0&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),a=t.updateQueue,a!==null&&Or(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==a&&(t.flags|=2048),e!==null&&z(ma),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),vn(Je),ze(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function e0(e,t){switch(co(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vn(Je),Q(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return me(t),null;case 31:if(t.memoizedState!==null){if(Mt(t),t.alternate===null)throw Error(l(340));da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Mt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return z(Pe),null;case 4:return Q(),null;case 10:return vn(t.type),null;case 22:case 23:return Mt(t),xo(),e!==null&&z(ma),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return vn(Je),null;case 25:return null;default:return null}}function fh(e,t){switch(co(t),t.tag){case 3:vn(Je),Q();break;case 26:case 27:case 5:me(t);break;case 4:Q();break;case 31:t.memoizedState!==null&&Mt(t);break;case 13:Mt(t);break;case 19:z(Pe);break;case 10:vn(t.type);break;case 22:case 23:Mt(t),xo(),e!==null&&z(ma);break;case 24:vn(Je)}}function is(e,t){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var o=r.next;a=o;do{if((a.tag&e)===e){r=void 0;var c=a.create,h=a.inst;r=c(),h.destroy=r}a=a.next}while(a!==o)}}catch(p){Ce(t,t.return,p)}}function qn(e,t,a){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var c=o.next;r=c;do{if((r.tag&e)===e){var h=r.inst,p=h.destroy;if(p!==void 0){h.destroy=void 0,o=t;var w=a,j=p;try{j()}catch(L){Ce(o,w,L)}}}r=r.next}while(r!==c)}}catch(L){Ce(t,t.return,L)}}function hh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{nf(t,a)}catch(r){Ce(e,e.return,r)}}}function mh(e,t,a){a.props=_a(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){Ce(e,t,r)}}function ss(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(o){Ce(e,t,o)}}function on(e,t){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(o){Ce(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Ce(e,t,o)}else a.current=null}function yh(e){var t=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(o){Ce(e,e.return,o)}}function iu(e,t,a){try{var r=e.stateNode;S0(r,e.type,a,t),r[St]=t}catch(o){Ce(e,e.return,o)}}function vh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Xn(e.type)||e.tag===4}function su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Xn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ru(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=dn));else if(r!==4&&(r===27&&Xn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(ru(e,t,a),e=e.sibling;e!==null;)ru(e,t,a),e=e.sibling}function Nr(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(r===27&&Xn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Nr(e,t,a),e=e.sibling;e!==null;)Nr(e,t,a),e=e.sibling}function gh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ct(t,r,a),t[rt]=e,t[St]=a}catch(c){Ce(e,e.return,c)}}var En=!1,Ze=!1,lu=!1,ph=typeof WeakSet=="function"?WeakSet:Set,st=null;function t0(e,t){if(e=e.containerInfo,Nu=Xr,e=Rd(e),Wl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var o=r.anchorOffset,c=r.focusNode;r=r.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var h=0,p=-1,w=-1,j=0,L=0,B=e,D=null;t:for(;;){for(var U;B!==a||o!==0&&B.nodeType!==3||(p=h+o),B!==c||r!==0&&B.nodeType!==3||(w=h+r),B.nodeType===3&&(h+=B.nodeValue.length),(U=B.firstChild)!==null;)D=B,B=U;for(;;){if(B===e)break t;if(D===a&&++j===o&&(p=h),D===c&&++L===r&&(w=h),(U=B.nextSibling)!==null)break;B=D,D=B.parentNode}B=U}a=p===-1||w===-1?null:{start:p,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ru={focusedElem:e,selectionRange:a},Xr=!1,st=t;st!==null;)if(t=st,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,st=e;else for(;st!==null;){switch(t=st,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,o=c.memoizedProps,c=c.memoizedState,r=a.stateNode;try{var K=_a(a.type,o);e=r.getSnapshotBeforeUpdate(K,c),r.__reactInternalSnapshotBeforeUpdate=e}catch(ne){Ce(a,a.return,ne)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Du(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Du(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,st=e;break}st=t.return}}function _h(e,t,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:wn(e,a),r&4&&is(5,a);break;case 1:if(wn(e,a),r&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(h){Ce(a,a.return,h)}else{var o=_a(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Ce(a,a.return,h)}}r&64&&hh(a),r&512&&ss(a,a.return);break;case 3:if(wn(e,a),r&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{nf(e,t)}catch(h){Ce(a,a.return,h)}}break;case 27:t===null&&r&4&&gh(a);case 26:case 5:wn(e,a),t===null&&r&4&&yh(a),r&512&&ss(a,a.return);break;case 12:wn(e,a);break;case 31:wn(e,a),r&4&&Sh(e,a);break;case 13:wn(e,a),r&4&&wh(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=c0.bind(null,a),C0(e,a))));break;case 22:if(r=a.memoizedState!==null||En,!r){t=t!==null&&t.memoizedState!==null||Ze,o=En;var c=Ze;En=r,(Ze=t)&&!c?Tn(e,a,(a.subtreeFlags&8772)!==0):wn(e,a),En=o,Ze=c}break;case 30:break;default:wn(e,a)}}function bh(e){var t=e.alternate;t!==null&&(e.alternate=null,bh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ll(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Be=null,Tt=!1;function Sn(e,t,a){for(a=a.child;a!==null;)Eh(e,t,a),a=a.sibling}function Eh(e,t,a){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Ri,a)}catch{}switch(a.tag){case 26:Ze||on(a,t),Sn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ze||on(a,t);var r=Be,o=Tt;Xn(a.type)&&(Be=a.stateNode,Tt=!1),Sn(e,t,a),ms(a.stateNode),Be=r,Tt=o;break;case 5:Ze||on(a,t);case 6:if(r=Be,o=Tt,Be=null,Sn(e,t,a),Be=r,Tt=o,Be!==null)if(Tt)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(a.stateNode)}catch(c){Ce(a,t,c)}else try{Be.removeChild(a.stateNode)}catch(c){Ce(a,t,c)}break;case 18:Be!==null&&(Tt?(e=Be,hm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),hi(e)):hm(Be,a.stateNode));break;case 4:r=Be,o=Tt,Be=a.stateNode.containerInfo,Tt=!0,Sn(e,t,a),Be=r,Tt=o;break;case 0:case 11:case 14:case 15:qn(2,a,t),Ze||qn(4,a,t),Sn(e,t,a);break;case 1:Ze||(on(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"&&mh(a,t,r)),Sn(e,t,a);break;case 21:Sn(e,t,a);break;case 22:Ze=(r=Ze)||a.memoizedState!==null,Sn(e,t,a),Ze=r;break;default:Sn(e,t,a)}}function Sh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hi(e)}catch(a){Ce(t,t.return,a)}}}function wh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hi(e)}catch(a){Ce(t,t.return,a)}}function n0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ph),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ph),t;default:throw Error(l(435,e.tag))}}function Rr(e,t){var a=n0(e);t.forEach(function(r){if(!a.has(r)){a.add(r);var o=d0.bind(null,e,r);r.then(o,o)}})}function At(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var o=a[r],c=e,h=t,p=h;e:for(;p!==null;){switch(p.tag){case 27:if(Xn(p.type)){Be=p.stateNode,Tt=!1;break e}break;case 5:Be=p.stateNode,Tt=!1;break e;case 3:case 4:Be=p.stateNode.containerInfo,Tt=!0;break e}p=p.return}if(Be===null)throw Error(l(160));Eh(c,h,o),Be=null,Tt=!1,c=o.alternate,c!==null&&(c.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Th(t,e),t=t.sibling}var en=null;function Th(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:At(t,e),xt(e),r&4&&(qn(3,e,e.return),is(3,e),qn(5,e,e.return));break;case 1:At(t,e),xt(e),r&512&&(Ze||a===null||on(a,a.return)),r&64&&En&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var o=en;if(At(t,e),xt(e),r&512&&(Ze||a===null||on(a,a.return)),r&4){var c=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":c=o.getElementsByTagName("title")[0],(!c||c[Di]||c[rt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=o.createElement(r),o.head.insertBefore(c,o.querySelector("head > title"))),ct(c,r,a),c[rt]=e,it(c),r=c;break e;case"link":var h=Tm("link","href",o).get(r+(a.href||""));if(h){for(var p=0;p<h.length;p++)if(c=h[p],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(p,1);break t}}c=o.createElement(r),ct(c,r,a),o.head.appendChild(c);break;case"meta":if(h=Tm("meta","content",o).get(r+(a.content||""))){for(p=0;p<h.length;p++)if(c=h[p],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(p,1);break t}}c=o.createElement(r),ct(c,r,a),o.head.appendChild(c);break;default:throw Error(l(468,r))}c[rt]=e,it(c),r=c}e.stateNode=r}else Am(o,e.type,e.stateNode);else e.stateNode=wm(o,r,e.memoizedProps);else c!==r?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,r===null?Am(o,e.type,e.stateNode):wm(o,r,e.memoizedProps)):r===null&&e.stateNode!==null&&iu(e,e.memoizedProps,a.memoizedProps)}break;case 27:At(t,e),xt(e),r&512&&(Ze||a===null||on(a,a.return)),a!==null&&r&4&&iu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(At(t,e),xt(e),r&512&&(Ze||a===null||on(a,a.return)),e.flags&32){o=e.stateNode;try{La(o,"")}catch(K){Ce(e,e.return,K)}}r&4&&e.stateNode!=null&&(o=e.memoizedProps,iu(e,o,a!==null?a.memoizedProps:o)),r&1024&&(lu=!0);break;case 6:if(At(t,e),xt(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch(K){Ce(e,e.return,K)}}break;case 3:if(Yr=null,o=en,en=$r(t.containerInfo),At(t,e),en=o,xt(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{hi(t.containerInfo)}catch(K){Ce(e,e.return,K)}lu&&(lu=!1,Ah(e));break;case 4:r=en,en=$r(e.stateNode.containerInfo),At(t,e),xt(e),en=r;break;case 12:At(t,e),xt(e);break;case 31:At(t,e),xt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Rr(e,r)));break;case 13:At(t,e),xt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jr=Rt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Rr(e,r)));break;case 22:o=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,j=En,L=Ze;if(En=j||o,Ze=L||w,At(t,e),Ze=L,En=j,xt(e),r&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||w||En||Ze||ba(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){w=a=t;try{if(c=w.stateNode,o)h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{p=w.stateNode;var B=w.memoizedProps.style,D=B!=null&&B.hasOwnProperty("display")?B.display:null;p.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(K){Ce(w,w.return,K)}}}else if(t.tag===6){if(a===null){w=t;try{w.stateNode.nodeValue=o?"":w.memoizedProps}catch(K){Ce(w,w.return,K)}}}else if(t.tag===18){if(a===null){w=t;try{var U=w.stateNode;o?mm(U,!0):mm(w.stateNode,!1)}catch(K){Ce(w,w.return,K)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,Rr(e,a))));break;case 19:At(t,e),xt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Rr(e,r)));break;case 30:break;case 21:break;default:At(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{for(var a,r=e.return;r!==null;){if(vh(r)){a=r;break}r=r.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var o=a.stateNode,c=su(e);Nr(e,c,o);break;case 5:var h=a.stateNode;a.flags&32&&(La(h,""),a.flags&=-33);var p=su(e);Nr(e,p,h);break;case 3:case 4:var w=a.stateNode.containerInfo,j=su(e);ru(e,j,w);break;default:throw Error(l(161))}}catch(L){Ce(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ah(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ah(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function wn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)_h(e,t.alternate,t),t=t.sibling}function ba(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:qn(4,t,t.return),ba(t);break;case 1:on(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&mh(t,t.return,a),ba(t);break;case 27:ms(t.stateNode);case 26:case 5:on(t,t.return),ba(t);break;case 22:t.memoizedState===null&&ba(t);break;case 30:ba(t);break;default:ba(t)}e=e.sibling}}function Tn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,o=e,c=t,h=c.flags;switch(c.tag){case 0:case 11:case 15:Tn(o,c,a),is(4,c);break;case 1:if(Tn(o,c,a),r=c,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(j){Ce(r,r.return,j)}if(r=c,o=r.updateQueue,o!==null){var p=r.stateNode;try{var w=o.shared.hiddenCallbacks;if(w!==null)for(o.shared.hiddenCallbacks=null,o=0;o<w.length;o++)tf(w[o],p)}catch(j){Ce(r,r.return,j)}}a&&h&64&&hh(c),ss(c,c.return);break;case 27:gh(c);case 26:case 5:Tn(o,c,a),a&&r===null&&h&4&&yh(c),ss(c,c.return);break;case 12:Tn(o,c,a);break;case 31:Tn(o,c,a),a&&h&4&&Sh(o,c);break;case 13:Tn(o,c,a),a&&h&4&&wh(o,c);break;case 22:c.memoizedState===null&&Tn(o,c,a),ss(c,c.return);break;case 30:break;default:Tn(o,c,a)}t=t.sibling}}function ou(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Yi(a))}function uu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Yi(e))}function tn(e,t,a,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xh(e,t,a,r),t=t.sibling}function xh(e,t,a,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:tn(e,t,a,r),o&2048&&is(9,t);break;case 1:tn(e,t,a,r);break;case 3:tn(e,t,a,r),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Yi(e)));break;case 12:if(o&2048){tn(e,t,a,r),e=t.stateNode;try{var c=t.memoizedProps,h=c.id,p=c.onPostCommit;typeof p=="function"&&p(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){Ce(t,t.return,w)}}else tn(e,t,a,r);break;case 31:tn(e,t,a,r);break;case 13:tn(e,t,a,r);break;case 23:break;case 22:c=t.stateNode,h=t.alternate,t.memoizedState!==null?c._visibility&2?tn(e,t,a,r):rs(e,t):c._visibility&2?tn(e,t,a,r):(c._visibility|=2,ni(e,t,a,r,(t.subtreeFlags&10256)!==0||!1)),o&2048&&ou(h,t);break;case 24:tn(e,t,a,r),o&2048&&uu(t.alternate,t);break;default:tn(e,t,a,r)}}function ni(e,t,a,r,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,h=t,p=a,w=r,j=h.flags;switch(h.tag){case 0:case 11:case 15:ni(c,h,p,w,o),is(8,h);break;case 23:break;case 22:var L=h.stateNode;h.memoizedState!==null?L._visibility&2?ni(c,h,p,w,o):rs(c,h):(L._visibility|=2,ni(c,h,p,w,o)),o&&j&2048&&ou(h.alternate,h);break;case 24:ni(c,h,p,w,o),o&&j&2048&&uu(h.alternate,h);break;default:ni(c,h,p,w,o)}t=t.sibling}}function rs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,r=t,o=r.flags;switch(r.tag){case 22:rs(a,r),o&2048&&ou(r.alternate,r);break;case 24:rs(a,r),o&2048&&uu(r.alternate,r);break;default:rs(a,r)}t=t.sibling}}var ls=8192;function ai(e,t,a){if(e.subtreeFlags&ls)for(e=e.child;e!==null;)Oh(e,t,a),e=e.sibling}function Oh(e,t,a){switch(e.tag){case 26:ai(e,t,a),e.flags&ls&&e.memoizedState!==null&&q0(a,en,e.memoizedState,e.memoizedProps);break;case 5:ai(e,t,a);break;case 3:case 4:var r=en;en=$r(e.stateNode.containerInfo),ai(e,t,a),en=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=ls,ls=16777216,ai(e,t,a),ls=r):ai(e,t,a));break;default:ai(e,t,a)}}function Nh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];st=r,Ch(r,e)}Nh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Rh(e),e=e.sibling}function Rh(e){switch(e.tag){case 0:case 11:case 15:os(e),e.flags&2048&&qn(9,e,e.return);break;case 3:os(e);break;case 12:os(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Cr(e)):os(e);break;default:os(e)}}function Cr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];st=r,Ch(r,e)}Nh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:qn(8,t,t.return),Cr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Cr(t));break;default:Cr(t)}e=e.sibling}}function Ch(e,t){for(;st!==null;){var a=st;switch(a.tag){case 0:case 11:case 15:qn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Yi(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,st=r;else e:for(a=e;st!==null;){r=st;var o=r.sibling,c=r.return;if(bh(r),r===a){st=null;break e}if(o!==null){o.return=c,st=o;break e}st=c}}}var a0={getCacheForType:function(e){var t=ot(Je),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ot(Je).controller.signal}},i0=typeof WeakMap=="function"?WeakMap:Map,xe=0,Me=null,ye=null,pe=0,Re=0,Lt=null,$n=!1,ii=!1,cu=!1,An=0,Ve=0,Vn=0,Ea=0,du=0,kt=0,si=0,us=null,Ot=null,fu=!1,jr=0,jh=0,Dr=1/0,Ur=null,Yn=null,et=0,Pn=null,ri=null,xn=0,hu=0,mu=null,Dh=null,cs=0,yu=null;function zt(){return(xe&2)!==0&&pe!==0?pe&-pe:I.T!==null?Eu():Kc()}function Uh(){if(kt===0)if((pe&536870912)===0||Ee){var e=Gs;Gs<<=1,(Gs&3932160)===0&&(Gs=262144),kt=e}else kt=536870912;return e=It.current,e!==null&&(e.flags|=32),kt}function Nt(e,t,a){(e===Me&&(Re===2||Re===9)||e.cancelPendingCommit!==null)&&(li(e,0),Kn(e,pe,kt,!1)),ji(e,a),((xe&2)===0||e!==Me)&&(e===Me&&((xe&2)===0&&(Ea|=a),Ve===4&&Kn(e,pe,kt,!1)),un(e))}function Ih(e,t,a){if((xe&6)!==0)throw Error(l(327));var r=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ci(e,t),o=r?l0(e,t):gu(e,t,!0),c=r;do{if(o===0){ii&&!r&&Kn(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!s0(a)){o=gu(e,t,!1),c=!1;continue}if(o===2){if(c=t,e.errorRecoveryDisabledLanes&c)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var p=e;o=us;var w=p.current.memoizedState.isDehydrated;if(w&&(li(p,h).flags|=256),h=gu(p,h,!1),h!==2){if(cu&&!w){p.errorRecoveryDisabledLanes|=c,Ea|=c,o=4;break e}c=Ot,Ot=o,c!==null&&(Ot===null?Ot=c:Ot.push.apply(Ot,c))}o=h}if(c=!1,o!==2)continue}}if(o===1){li(e,0),Kn(e,t,0,!0);break}e:{switch(r=e,c=o,c){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:Kn(r,t,kt,!$n);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(o=jr+300-Rt(),10<o)){if(Kn(r,t,kt,!$n),$s(r,0,!0)!==0)break e;xn=t,r.timeoutHandle=dm(Mh.bind(null,r,a,Ot,Ur,fu,t,kt,Ea,si,$n,c,"Throttled",-0,0),o);break e}Mh(r,a,Ot,Ur,fu,t,kt,Ea,si,$n,c,null,-0,0)}}break}while(!0);un(e)}function Mh(e,t,a,r,o,c,h,p,w,j,L,B,D,U){if(e.timeoutHandle=-1,B=t.subtreeFlags,B&8192||(B&16785408)===16785408){B={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dn},Oh(t,c,B);var K=(c&62914560)===c?jr-Rt():(c&4194048)===c?jh-Rt():0;if(K=$0(B,K),K!==null){xn=c,e.cancelPendingCommit=K($h.bind(null,e,t,c,a,r,o,h,p,w,L,B,null,D,U)),Kn(e,c,h,!j);return}}$h(e,t,c,a,r,o,h,p,w)}function s0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var o=a[r],c=o.getSnapshot;o=o.value;try{if(!Dt(c(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kn(e,t,a,r){t&=~du,t&=~Ea,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var c=31-jt(o),h=1<<c;r[c]=-1,o&=~h}a!==0&&Vc(e,a,t)}function Ir(){return(xe&6)===0?(ds(0),!1):!0}function vu(){if(ye!==null){if(Re===0)var e=ye.return;else e=ye,yn=fa=null,Do(e),Za=null,Ki=0,e=ye;for(;e!==null;)fh(e.alternate,e),e=e.return;ye=null}}function li(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,A0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),xn=0,vu(),Me=e,ye=a=hn(e.current,null),pe=t,Re=0,Lt=null,$n=!1,ii=Ci(e,t),cu=!1,si=kt=du=Ea=Vn=Ve=0,Ot=us=null,fu=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var o=31-jt(r),c=1<<o;t|=e[o],r&=~c}return An=t,tr(),a}function Lh(e,t){ue=null,I.H=ts,t===Qa||t===ur?(t=Zd(),Re=3):t===bo?(t=Zd(),Re=4):Re=t===Jo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Lt=t,ye===null&&(Ve=1,wr(e,Vt(t,e.current)))}function kh(){var e=It.current;return e===null?!0:(pe&4194048)===pe?Jt===null:(pe&62914560)===pe||(pe&536870912)!==0?e===Jt:!1}function zh(){var e=I.H;return I.H=ts,e===null?ts:e}function Bh(){var e=I.A;return I.A=a0,e}function Mr(){Ve=4,$n||(pe&4194048)!==pe&&It.current!==null||(ii=!0),(Vn&134217727)===0&&(Ea&134217727)===0||Me===null||Kn(Me,pe,kt,!1)}function gu(e,t,a){var r=xe;xe|=2;var o=zh(),c=Bh();(Me!==e||pe!==t)&&(Ur=null,li(e,t)),t=!1;var h=Ve;e:do try{if(Re!==0&&ye!==null){var p=ye,w=Lt;switch(Re){case 8:vu(),h=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(t=!0);var j=Re;if(Re=0,Lt=null,oi(e,p,w,j),a&&ii){h=0;break e}break;default:j=Re,Re=0,Lt=null,oi(e,p,w,j)}}r0(),h=Ve;break}catch(L){Lh(e,L)}while(!0);return t&&e.shellSuspendCounter++,yn=fa=null,xe=r,I.H=o,I.A=c,ye===null&&(Me=null,pe=0,tr()),h}function r0(){for(;ye!==null;)Hh(ye)}function l0(e,t){var a=xe;xe|=2;var r=zh(),o=Bh();Me!==e||pe!==t?(Ur=null,Dr=Rt()+500,li(e,t)):ii=Ci(e,t);e:do try{if(Re!==0&&ye!==null){t=ye;var c=Lt;t:switch(Re){case 1:Re=0,Lt=null,oi(e,t,c,1);break;case 2:case 9:if(Xd(c)){Re=0,Lt=null,Gh(t);break}t=function(){Re!==2&&Re!==9||Me!==e||(Re=7),un(e)},c.then(t,t);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:Xd(c)?(Re=0,Lt=null,Gh(t)):(Re=0,Lt=null,oi(e,t,c,7));break;case 5:var h=null;switch(ye.tag){case 26:h=ye.memoizedState;case 5:case 27:var p=ye;if(h?xm(h):p.stateNode.complete){Re=0,Lt=null;var w=p.sibling;if(w!==null)ye=w;else{var j=p.return;j!==null?(ye=j,Lr(j)):ye=null}break t}}Re=0,Lt=null,oi(e,t,c,5);break;case 6:Re=0,Lt=null,oi(e,t,c,6);break;case 8:vu(),Ve=6;break e;default:throw Error(l(462))}}o0();break}catch(L){Lh(e,L)}while(!0);return yn=fa=null,I.H=r,I.A=o,xe=a,ye!==null?0:(Me=null,pe=0,tr(),Ve)}function o0(){for(;ye!==null&&!jg();)Hh(ye)}function Hh(e){var t=ch(e.alternate,e,An);e.memoizedProps=e.pendingProps,t===null?Lr(e):ye=t}function Gh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=ih(a,t,t.pendingProps,t.type,void 0,pe);break;case 11:t=ih(a,t,t.pendingProps,t.type.render,t.ref,pe);break;case 5:Do(t);default:fh(a,t),t=ye=zd(t,An),t=ch(a,t,An)}e.memoizedProps=e.pendingProps,t===null?Lr(e):ye=t}function oi(e,t,a,r){yn=fa=null,Do(t),Za=null,Ki=0;var o=t.return;try{if(Qp(e,o,t,a,pe)){Ve=1,wr(e,Vt(a,e.current)),ye=null;return}}catch(c){if(o!==null)throw ye=o,c;Ve=1,wr(e,Vt(a,e.current)),ye=null;return}t.flags&32768?(Ee||r===1?e=!0:ii||(pe&536870912)!==0?e=!1:($n=e=!0,(r===2||r===9||r===3||r===6)&&(r=It.current,r!==null&&r.tag===13&&(r.flags|=16384))),qh(t,e)):Lr(t)}function Lr(e){var t=e;do{if((t.flags&32768)!==0){qh(t,$n);return}e=t.return;var a=Wp(t.alternate,t,An);if(a!==null){ye=a;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);Ve===0&&(Ve=5)}function qh(e,t){do{var a=e0(e.alternate,e);if(a!==null){a.flags&=32767,ye=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ye=e;return}ye=e=a}while(e!==null);Ve=6,ye=null}function $h(e,t,a,r,o,c,h,p,w){e.cancelPendingCommit=null;do kr();while(et!==0);if((xe&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(c=t.lanes|t.childLanes,c|=io,Gg(e,a,c,h,p,w),e===Me&&(ye=Me=null,pe=0),ri=t,Pn=e,xn=a,hu=c,mu=o,Dh=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,f0(Bs,function(){return Jh(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=I.T,I.T=null,o=q.p,q.p=2,h=xe,xe|=4;try{t0(e,t,a)}finally{xe=h,q.p=o,I.T=r}}et=1,Vh(),Yh(),Ph()}}function Vh(){if(et===1){et=0;var e=Pn,t=ri,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=I.T,I.T=null;var r=q.p;q.p=2;var o=xe;xe|=4;try{Th(t,e);var c=Ru,h=Rd(e.containerInfo),p=c.focusedElem,w=c.selectionRange;if(h!==p&&p&&p.ownerDocument&&Nd(p.ownerDocument.documentElement,p)){if(w!==null&&Wl(p)){var j=w.start,L=w.end;if(L===void 0&&(L=j),"selectionStart"in p)p.selectionStart=j,p.selectionEnd=Math.min(L,p.value.length);else{var B=p.ownerDocument||document,D=B&&B.defaultView||window;if(D.getSelection){var U=D.getSelection(),K=p.textContent.length,ne=Math.min(w.start,K),Ie=w.end===void 0?ne:Math.min(w.end,K);!U.extend&&ne>Ie&&(h=Ie,Ie=ne,ne=h);var R=Od(p,ne),x=Od(p,Ie);if(R&&x&&(U.rangeCount!==1||U.anchorNode!==R.node||U.anchorOffset!==R.offset||U.focusNode!==x.node||U.focusOffset!==x.offset)){var C=B.createRange();C.setStart(R.node,R.offset),U.removeAllRanges(),ne>Ie?(U.addRange(C),U.extend(x.node,x.offset)):(C.setEnd(x.node,x.offset),U.addRange(C))}}}}for(B=[],U=p;U=U.parentNode;)U.nodeType===1&&B.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<B.length;p++){var k=B[p];k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}Xr=!!Nu,Ru=Nu=null}finally{xe=o,q.p=r,I.T=a}}e.current=t,et=2}}function Yh(){if(et===2){et=0;var e=Pn,t=ri,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=I.T,I.T=null;var r=q.p;q.p=2;var o=xe;xe|=4;try{_h(e,t.alternate,t)}finally{xe=o,q.p=r,I.T=a}}et=3}}function Ph(){if(et===4||et===3){et=0,Dg();var e=Pn,t=ri,a=xn,r=Dh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?et=5:(et=0,ri=Pn=null,Kh(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Yn=null),Il(a),t=t.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Ri,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=I.T,o=q.p,q.p=2,I.T=null;try{for(var c=e.onRecoverableError,h=0;h<r.length;h++){var p=r[h];c(p.value,{componentStack:p.stack})}}finally{I.T=t,q.p=o}}(xn&3)!==0&&kr(),un(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===yu?cs++:(cs=0,yu=e):cs=0,ds(0)}}function Kh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Yi(t)))}function kr(){return Vh(),Yh(),Ph(),Jh()}function Jh(){if(et!==5)return!1;var e=Pn,t=hu;hu=0;var a=Il(xn),r=I.T,o=q.p;try{q.p=32>a?32:a,I.T=null,a=mu,mu=null;var c=Pn,h=xn;if(et=0,ri=Pn=null,xn=0,(xe&6)!==0)throw Error(l(331));var p=xe;if(xe|=4,Rh(c.current),xh(c,c.current,h,a),xe=p,ds(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Ri,c)}catch{}return!0}finally{q.p=o,I.T=r,Kh(e,t)}}function Xh(e,t,a){t=Vt(a,t),t=Ko(e.stateNode,t,2),e=Bn(e,t,2),e!==null&&(ji(e,2),un(e))}function Ce(e,t,a){if(e.tag===3)Xh(e,e,a);else for(;t!==null;){if(t.tag===3){Xh(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){e=Vt(a,e),a=Qf(2),r=Bn(t,a,2),r!==null&&(Zf(a,r,t,e),ji(r,2),un(r));break}}t=t.return}}function pu(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new i0;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(a)||(cu=!0,o.add(a),e=u0.bind(null,e,t,a),t.then(e,e))}function u0(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Me===e&&(pe&a)===a&&(Ve===4||Ve===3&&(pe&62914560)===pe&&300>Rt()-jr?(xe&2)===0&&li(e,0):du|=a,si===pe&&(si=0)),un(e)}function Qh(e,t){t===0&&(t=$c()),e=ua(e,t),e!==null&&(ji(e,t),un(e))}function c0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Qh(e,a)}function d0(e,t){var a=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(t),Qh(e,a)}function f0(e,t){return Cl(e,t)}var zr=null,ui=null,_u=!1,Br=!1,bu=!1,Jn=0;function un(e){e!==ui&&e.next===null&&(ui===null?zr=ui=e:ui=ui.next=e),Br=!0,_u||(_u=!0,m0())}function ds(e,t){if(!bu&&Br){bu=!0;do for(var a=!1,r=zr;r!==null;){if(e!==0){var o=r.pendingLanes;if(o===0)var c=0;else{var h=r.suspendedLanes,p=r.pingedLanes;c=(1<<31-jt(42|e)+1)-1,c&=o&~(h&~p),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,em(r,c))}else c=pe,c=$s(r,r===Me?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(c&3)===0||Ci(r,c)||(a=!0,em(r,c));r=r.next}while(a);bu=!1}}function h0(){Zh()}function Zh(){Br=_u=!1;var e=0;Jn!==0&&T0()&&(e=Jn);for(var t=Rt(),a=null,r=zr;r!==null;){var o=r.next,c=Fh(r,t);c===0?(r.next=null,a===null?zr=o:a.next=o,o===null&&(ui=a)):(a=r,(e!==0||(c&3)!==0)&&(Br=!0)),r=o}et!==0&&et!==5||ds(e),Jn!==0&&(Jn=0)}function Fh(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var h=31-jt(c),p=1<<h,w=o[h];w===-1?((p&a)===0||(p&r)!==0)&&(o[h]=Hg(p,t)):w<=t&&(e.expiredLanes|=p),c&=~p}if(t=Me,a=pe,a=$s(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===t&&(Re===2||Re===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&jl(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ci(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(r!==null&&jl(r),Il(a)){case 2:case 8:a=Gc;break;case 32:a=Bs;break;case 268435456:a=qc;break;default:a=Bs}return r=Wh.bind(null,e),a=Cl(a,r),e.callbackPriority=t,e.callbackNode=a,t}return r!==null&&r!==null&&jl(r),e.callbackPriority=2,e.callbackNode=null,2}function Wh(e,t){if(et!==0&&et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(kr()&&e.callbackNode!==a)return null;var r=pe;return r=$s(e,e===Me?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Ih(e,r,t),Fh(e,Rt()),e.callbackNode!=null&&e.callbackNode===a?Wh.bind(null,e):null)}function em(e,t){if(kr())return null;Ih(e,t,!0)}function m0(){x0(function(){(xe&6)!==0?Cl(Hc,h0):Zh()})}function Eu(){if(Jn===0){var e=Ja;e===0&&(e=Hs,Hs<<=1,(Hs&261888)===0&&(Hs=256)),Jn=e}return Jn}function tm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ks(""+e)}function nm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function y0(e,t,a,r,o){if(t==="submit"&&a&&a.stateNode===o){var c=tm((o[St]||null).action),h=r.submitter;h&&(t=(t=h[St]||null)?tm(t.formAction):h.getAttribute("formAction"),t!==null&&(c=t,h=null));var p=new Zs("action","action",null,r,o);e.push({event:p,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Jn!==0){var w=h?nm(o,h):new FormData(o);Go(a,{pending:!0,data:w,method:o.method,action:c},null,w)}}else typeof c=="function"&&(p.preventDefault(),w=h?nm(o,h):new FormData(o),Go(a,{pending:!0,data:w,method:o.method,action:c},c,w))},currentTarget:o}]})}}for(var Su=0;Su<ao.length;Su++){var wu=ao[Su],v0=wu.toLowerCase(),g0=wu[0].toUpperCase()+wu.slice(1);Wt(v0,"on"+g0)}Wt(Dd,"onAnimationEnd"),Wt(Ud,"onAnimationIteration"),Wt(Id,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(Up,"onTransitionRun"),Wt(Ip,"onTransitionStart"),Wt(Mp,"onTransitionCancel"),Wt(Md,"onTransitionEnd"),Ia("onMouseEnter",["mouseout","mouseover"]),Ia("onMouseLeave",["mouseout","mouseover"]),Ia("onPointerEnter",["pointerout","pointerover"]),Ia("onPointerLeave",["pointerout","pointerover"]),sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sa("onBeforeInput",["compositionend","keypress","textInput","paste"]),sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fs));function am(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],o=r.event;r=r.listeners;e:{var c=void 0;if(t)for(var h=r.length-1;0<=h;h--){var p=r[h],w=p.instance,j=p.currentTarget;if(p=p.listener,w!==c&&o.isPropagationStopped())break e;c=p,o.currentTarget=j;try{c(o)}catch(L){er(L)}o.currentTarget=null,c=w}else for(h=0;h<r.length;h++){if(p=r[h],w=p.instance,j=p.currentTarget,p=p.listener,w!==c&&o.isPropagationStopped())break e;c=p,o.currentTarget=j;try{c(o)}catch(L){er(L)}o.currentTarget=null,c=w}}}}function ve(e,t){var a=t[Ml];a===void 0&&(a=t[Ml]=new Set);var r=e+"__bubble";a.has(r)||(im(t,e,2,!1),a.add(r))}function Tu(e,t,a){var r=0;t&&(r|=4),im(a,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Au(e){if(!e[Hr]){e[Hr]=!0,Qc.forEach(function(a){a!=="selectionchange"&&(p0.has(a)||Tu(a,!1,e),Tu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hr]||(t[Hr]=!0,Tu("selectionchange",!1,t))}}function im(e,t,a,r){switch(Um(t)){case 2:var o=P0;break;case 8:o=K0;break;default:o=Hu}a=o.bind(null,t,a,e),o=void 0,!Vl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function xu(e,t,a,r,o){var c=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var p=r.stateNode.containerInfo;if(p===o)break;if(h===4)for(h=r.return;h!==null;){var w=h.tag;if((w===3||w===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;p!==null;){if(h=ja(p),h===null)return;if(w=h.tag,w===5||w===6||w===26||w===27){r=c=h;continue e}p=p.parentNode}}r=r.return}od(function(){var j=c,L=ql(a),B=[];e:{var D=Ld.get(e);if(D!==void 0){var U=Zs,K=e;switch(e){case"keypress":if(Xs(a)===0)break e;case"keydown":case"keyup":U=dp;break;case"focusin":K="focus",U=Jl;break;case"focusout":K="blur",U=Jl;break;case"beforeblur":case"afterblur":U=Jl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=mp;break;case Dd:case Ud:case Id:U=np;break;case Md:U=vp;break;case"scroll":case"scrollend":U=Zg;break;case"wheel":U=pp;break;case"copy":case"cut":case"paste":U=ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=hd;break;case"toggle":case"beforetoggle":U=bp}var ne=(t&4)!==0,Ie=!ne&&(e==="scroll"||e==="scrollend"),R=ne?D!==null?D+"Capture":null:D;ne=[];for(var x=j,C;x!==null;){var k=x;if(C=k.stateNode,k=k.tag,k!==5&&k!==26&&k!==27||C===null||R===null||(k=Ii(x,R),k!=null&&ne.push(hs(x,k,C))),Ie)break;x=x.return}0<ne.length&&(D=new U(D,K,null,a,L),B.push({event:D,listeners:ne}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",D&&a!==Gl&&(K=a.relatedTarget||a.fromElement)&&(ja(K)||K[Ca]))break e;if((U||D)&&(D=L.window===L?L:(D=L.ownerDocument)?D.defaultView||D.parentWindow:window,U?(K=a.relatedTarget||a.toElement,U=j,K=K?ja(K):null,K!==null&&(Ie=d(K),ne=K.tag,K!==Ie||ne!==5&&ne!==27&&ne!==6)&&(K=null)):(U=null,K=j),U!==K)){if(ne=dd,k="onMouseLeave",R="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(ne=hd,k="onPointerLeave",R="onPointerEnter",x="pointer"),Ie=U==null?D:Ui(U),C=K==null?D:Ui(K),D=new ne(k,x+"leave",U,a,L),D.target=Ie,D.relatedTarget=C,k=null,ja(L)===j&&(ne=new ne(R,x+"enter",K,a,L),ne.target=C,ne.relatedTarget=Ie,k=ne),Ie=k,U&&K)t:{for(ne=_0,R=U,x=K,C=0,k=R;k;k=ne(k))C++;k=0;for(var W=x;W;W=ne(W))k++;for(;0<C-k;)R=ne(R),C--;for(;0<k-C;)x=ne(x),k--;for(;C--;){if(R===x||x!==null&&R===x.alternate){ne=R;break t}R=ne(R),x=ne(x)}ne=null}else ne=null;U!==null&&sm(B,D,U,ne,!1),K!==null&&Ie!==null&&sm(B,Ie,K,ne,!0)}}e:{if(D=j?Ui(j):window,U=D.nodeName&&D.nodeName.toLowerCase(),U==="select"||U==="input"&&D.type==="file")var Te=Ed;else if(_d(D))if(Sd)Te=Cp;else{Te=Np;var X=Op}else U=D.nodeName,!U||U.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?j&&Hl(j.elementType)&&(Te=Ed):Te=Rp;if(Te&&(Te=Te(e,j))){bd(B,Te,a,L);break e}X&&X(e,D,j),e==="focusout"&&j&&D.type==="number"&&j.memoizedProps.value!=null&&Bl(D,"number",D.value)}switch(X=j?Ui(j):window,e){case"focusin":(_d(X)||X.contentEditable==="true")&&(Ha=X,eo=j,qi=null);break;case"focusout":qi=eo=Ha=null;break;case"mousedown":to=!0;break;case"contextmenu":case"mouseup":case"dragend":to=!1,Cd(B,a,L);break;case"selectionchange":if(Dp)break;case"keydown":case"keyup":Cd(B,a,L)}var de;if(Ql)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Ba?gd(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(md&&a.locale!=="ko"&&(Ba||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Ba&&(de=ud()):(Dn=L,Yl="value"in Dn?Dn.value:Dn.textContent,Ba=!0)),X=Gr(j,_e),0<X.length&&(_e=new fd(_e,e,null,a,L),B.push({event:_e,listeners:X}),de?_e.data=de:(de=pd(a),de!==null&&(_e.data=de)))),(de=Sp?wp(e,a):Tp(e,a))&&(_e=Gr(j,"onBeforeInput"),0<_e.length&&(X=new fd("onBeforeInput","beforeinput",null,a,L),B.push({event:X,listeners:_e}),X.data=de)),y0(B,e,j,a,L)}am(B,t)})}function hs(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Gr(e,t){for(var a=t+"Capture",r=[];e!==null;){var o=e,c=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||c===null||(o=Ii(e,a),o!=null&&r.unshift(hs(e,o,c)),o=Ii(e,t),o!=null&&r.push(hs(e,o,c))),e.tag===3)return r;e=e.return}return[]}function _0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sm(e,t,a,r,o){for(var c=t._reactName,h=[];a!==null&&a!==r;){var p=a,w=p.alternate,j=p.stateNode;if(p=p.tag,w!==null&&w===r)break;p!==5&&p!==26&&p!==27||j===null||(w=j,o?(j=Ii(a,c),j!=null&&h.unshift(hs(a,j,w))):o||(j=Ii(a,c),j!=null&&h.push(hs(a,j,w)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var b0=/\r\n?/g,E0=/\u0000|\uFFFD/g;function rm(e){return(typeof e=="string"?e:""+e).replace(b0,`
`).replace(E0,"")}function lm(e,t){return t=rm(t),rm(e)===t}function Ue(e,t,a,r,o,c){switch(a){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||La(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&La(e,""+r);break;case"className":Ys(e,"class",r);break;case"tabIndex":Ys(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ys(e,a,r);break;case"style":rd(e,r,c);break;case"data":if(t!=="object"){Ys(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Ks(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Ue(e,t,"name",o.name,o,null),Ue(e,t,"formEncType",o.formEncType,o,null),Ue(e,t,"formMethod",o.formMethod,o,null),Ue(e,t,"formTarget",o.formTarget,o,null)):(Ue(e,t,"encType",o.encType,o,null),Ue(e,t,"method",o.method,o,null),Ue(e,t,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Ks(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=dn);break;case"onScroll":r!=null&&ve("scroll",e);break;case"onScrollEnd":r!=null&&ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=Ks(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":ve("beforetoggle",e),ve("toggle",e),Vs(e,"popover",r);break;case"xlinkActuate":cn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":cn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":cn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":cn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":cn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":cn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":cn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":cn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":cn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Vs(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Xg.get(a)||a,Vs(e,a,r))}}function Ou(e,t,a,r,o,c){switch(a){case"style":rd(e,r,c);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof r=="string"?La(e,r):(typeof r=="number"||typeof r=="bigint")&&La(e,""+r);break;case"onScroll":r!=null&&ve("scroll",e);break;case"onScrollEnd":r!=null&&ve("scrollend",e);break;case"onClick":r!=null&&(e.onclick=dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),c=e[St]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,o),typeof r=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,r,o);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):Vs(e,a,r)}}}function ct(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ve("error",e),ve("load",e);var r=!1,o=!1,c;for(c in a)if(a.hasOwnProperty(c)){var h=a[c];if(h!=null)switch(c){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ue(e,t,c,h,a,null)}}o&&Ue(e,t,"srcSet",a.srcSet,a,null),r&&Ue(e,t,"src",a.src,a,null);return;case"input":ve("invalid",e);var p=c=h=o=null,w=null,j=null;for(r in a)if(a.hasOwnProperty(r)){var L=a[r];if(L!=null)switch(r){case"name":o=L;break;case"type":h=L;break;case"checked":w=L;break;case"defaultChecked":j=L;break;case"value":c=L;break;case"defaultValue":p=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(l(137,t));break;default:Ue(e,t,r,L,a,null)}}nd(e,c,p,w,j,h,o,!1);return;case"select":ve("invalid",e),r=h=c=null;for(o in a)if(a.hasOwnProperty(o)&&(p=a[o],p!=null))switch(o){case"value":c=p;break;case"defaultValue":h=p;break;case"multiple":r=p;default:Ue(e,t,o,p,a,null)}t=c,a=h,e.multiple=!!r,t!=null?Ma(e,!!r,t,!1):a!=null&&Ma(e,!!r,a,!0);return;case"textarea":ve("invalid",e),c=o=r=null;for(h in a)if(a.hasOwnProperty(h)&&(p=a[h],p!=null))switch(h){case"value":r=p;break;case"defaultValue":o=p;break;case"children":c=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(l(91));break;default:Ue(e,t,h,p,a,null)}id(e,r,o,c);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(r=a[w],r!=null))switch(w){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Ue(e,t,w,r,a,null)}return;case"dialog":ve("beforetoggle",e),ve("toggle",e),ve("cancel",e),ve("close",e);break;case"iframe":case"object":ve("load",e);break;case"video":case"audio":for(r=0;r<fs.length;r++)ve(fs[r],e);break;case"image":ve("error",e),ve("load",e);break;case"details":ve("toggle",e);break;case"embed":case"source":case"link":ve("error",e),ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(r=a[j],r!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ue(e,t,j,r,a,null)}return;default:if(Hl(t)){for(L in a)a.hasOwnProperty(L)&&(r=a[L],r!==void 0&&Ou(e,t,L,r,a,void 0));return}}for(p in a)a.hasOwnProperty(p)&&(r=a[p],r!=null&&Ue(e,t,p,r,a,null))}function S0(e,t,a,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,c=null,h=null,p=null,w=null,j=null,L=null;for(U in a){var B=a[U];if(a.hasOwnProperty(U)&&B!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":w=B;default:r.hasOwnProperty(U)||Ue(e,t,U,null,r,B)}}for(var D in r){var U=r[D];if(B=a[D],r.hasOwnProperty(D)&&(U!=null||B!=null))switch(D){case"type":c=U;break;case"name":o=U;break;case"checked":j=U;break;case"defaultChecked":L=U;break;case"value":h=U;break;case"defaultValue":p=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,t));break;default:U!==B&&Ue(e,t,D,U,r,B)}}zl(e,h,p,w,j,L,c,o);return;case"select":U=h=p=D=null;for(c in a)if(w=a[c],a.hasOwnProperty(c)&&w!=null)switch(c){case"value":break;case"multiple":U=w;default:r.hasOwnProperty(c)||Ue(e,t,c,null,r,w)}for(o in r)if(c=r[o],w=a[o],r.hasOwnProperty(o)&&(c!=null||w!=null))switch(o){case"value":D=c;break;case"defaultValue":p=c;break;case"multiple":h=c;default:c!==w&&Ue(e,t,o,c,r,w)}t=p,a=h,r=U,D!=null?Ma(e,!!a,D,!1):!!r!=!!a&&(t!=null?Ma(e,!!a,t,!0):Ma(e,!!a,a?[]:"",!1));return;case"textarea":U=D=null;for(p in a)if(o=a[p],a.hasOwnProperty(p)&&o!=null&&!r.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Ue(e,t,p,null,r,o)}for(h in r)if(o=r[h],c=a[h],r.hasOwnProperty(h)&&(o!=null||c!=null))switch(h){case"value":D=o;break;case"defaultValue":U=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(l(91));break;default:o!==c&&Ue(e,t,h,o,r,c)}ad(e,D,U);return;case"option":for(var K in a)if(D=a[K],a.hasOwnProperty(K)&&D!=null&&!r.hasOwnProperty(K))switch(K){case"selected":e.selected=!1;break;default:Ue(e,t,K,null,r,D)}for(w in r)if(D=r[w],U=a[w],r.hasOwnProperty(w)&&D!==U&&(D!=null||U!=null))switch(w){case"selected":e.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Ue(e,t,w,D,r,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in a)D=a[ne],a.hasOwnProperty(ne)&&D!=null&&!r.hasOwnProperty(ne)&&Ue(e,t,ne,null,r,D);for(j in r)if(D=r[j],U=a[j],r.hasOwnProperty(j)&&D!==U&&(D!=null||U!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(l(137,t));break;default:Ue(e,t,j,D,r,U)}return;default:if(Hl(t)){for(var Ie in a)D=a[Ie],a.hasOwnProperty(Ie)&&D!==void 0&&!r.hasOwnProperty(Ie)&&Ou(e,t,Ie,void 0,r,D);for(L in r)D=r[L],U=a[L],!r.hasOwnProperty(L)||D===U||D===void 0&&U===void 0||Ou(e,t,L,D,r,U);return}}for(var R in a)D=a[R],a.hasOwnProperty(R)&&D!=null&&!r.hasOwnProperty(R)&&Ue(e,t,R,null,r,D);for(B in r)D=r[B],U=a[B],!r.hasOwnProperty(B)||D===U||D==null&&U==null||Ue(e,t,B,D,r,U)}function om(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),r=0;r<a.length;r++){var o=a[r],c=o.transferSize,h=o.initiatorType,p=o.duration;if(c&&p&&om(h)){for(h=0,p=o.responseEnd,r+=1;r<a.length;r++){var w=a[r],j=w.startTime;if(j>p)break;var L=w.transferSize,B=w.initiatorType;L&&om(B)&&(w=w.responseEnd,h+=L*(w<p?1:(p-j)/(w-j)))}if(--r,t+=8*(c+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nu=null,Ru=null;function qr(e){return e.nodeType===9?e:e.ownerDocument}function um(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Cu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ju=null;function T0(){var e=window.event;return e&&e.type==="popstate"?e===ju?!1:(ju=e,!0):(ju=null,!1)}var dm=typeof setTimeout=="function"?setTimeout:void 0,A0=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,x0=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(e){return fm.resolve(null).then(e).catch(O0)}:dm;function O0(e){setTimeout(function(){throw e})}function Xn(e){return e==="head"}function hm(e,t){var a=t,r=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(r===0){e.removeChild(o),hi(t);return}r--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")r++;else if(a==="html")ms(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ms(a);for(var c=a.firstChild;c;){var h=c.nextSibling,p=c.nodeName;c[Di]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=h}}else a==="body"&&ms(e.ownerDocument.body);a=o}while(a);hi(t)}function mm(e,t){var a=e;e=0;do{var r=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),r&&r.nodeType===8)if(a=r.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=r}while(a)}function Du(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Du(a),Ll(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function N0(e,t,a,r){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Di])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Xt(e.nextSibling),e===null)break}return null}function R0(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Xt(e.nextSibling),e===null))return null;return e}function ym(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Xt(e.nextSibling),e===null))return null;return e}function Uu(e){return e.data==="$?"||e.data==="$~"}function Iu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function C0(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var r=function(){t(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Mu=null;function vm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Xt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function gm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function pm(e,t,a){switch(t=qr(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function ms(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ll(e)}var Qt=new Map,_m=new Set;function $r(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var On=q.d;q.d={f:j0,r:D0,D:U0,C:I0,L:M0,m:L0,X:z0,S:k0,M:B0};function j0(){var e=On.f(),t=Ir();return e||t}function D0(e){var t=Da(e);t!==null&&t.tag===5&&t.type==="form"?Lf(t):On.r(e)}var ci=typeof document>"u"?null:document;function bm(e,t,a){var r=ci;if(r&&typeof t=="string"&&t){var o=qt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),_m.has(o)||(_m.add(o),e={rel:e,crossOrigin:a,href:t},r.querySelector(o)===null&&(t=r.createElement("link"),ct(t,"link",e),it(t),r.head.appendChild(t)))}}function U0(e){On.D(e),bm("dns-prefetch",e,null)}function I0(e,t){On.C(e,t),bm("preconnect",e,t)}function M0(e,t,a){On.L(e,t,a);var r=ci;if(r&&e&&t){var o='link[rel="preload"][as="'+qt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+qt(a.imageSizes)+'"]')):o+='[href="'+qt(e)+'"]';var c=o;switch(t){case"style":c=di(e);break;case"script":c=fi(e)}Qt.has(c)||(e=E({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Qt.set(c,e),r.querySelector(o)!==null||t==="style"&&r.querySelector(ys(c))||t==="script"&&r.querySelector(vs(c))||(t=r.createElement("link"),ct(t,"link",e),it(t),r.head.appendChild(t)))}}function L0(e,t){On.m(e,t);var a=ci;if(a&&e){var r=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+qt(r)+'"][href="'+qt(e)+'"]',c=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=fi(e)}if(!Qt.has(c)&&(e=E({rel:"modulepreload",href:e},t),Qt.set(c,e),a.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vs(c)))return}r=a.createElement("link"),ct(r,"link",e),it(r),a.head.appendChild(r)}}}function k0(e,t,a){On.S(e,t,a);var r=ci;if(r&&e){var o=Ua(r).hoistableStyles,c=di(e);t=t||"default";var h=o.get(c);if(!h){var p={loading:0,preload:null};if(h=r.querySelector(ys(c)))p.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Qt.get(c))&&Lu(e,a);var w=h=r.createElement("link");it(w),ct(w,"link",e),w._p=new Promise(function(j,L){w.onload=j,w.onerror=L}),w.addEventListener("load",function(){p.loading|=1}),w.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Vr(h,t,r)}h={type:"stylesheet",instance:h,count:1,state:p},o.set(c,h)}}}function z0(e,t){On.X(e,t);var a=ci;if(a&&e){var r=Ua(a).hoistableScripts,o=fi(e),c=r.get(o);c||(c=a.querySelector(vs(o)),c||(e=E({src:e,async:!0},t),(t=Qt.get(o))&&ku(e,t),c=a.createElement("script"),it(c),ct(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},r.set(o,c))}}function B0(e,t){On.M(e,t);var a=ci;if(a&&e){var r=Ua(a).hoistableScripts,o=fi(e),c=r.get(o);c||(c=a.querySelector(vs(o)),c||(e=E({src:e,async:!0,type:"module"},t),(t=Qt.get(o))&&ku(e,t),c=a.createElement("script"),it(c),ct(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},r.set(o,c))}}function Em(e,t,a,r){var o=(o=he.current)?$r(o):null;if(!o)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=di(a.href),a=Ua(o).hoistableStyles,r=a.get(t),r||(r={type:"style",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=di(a.href);var c=Ua(o).hoistableStyles,h=c.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=o.querySelector(ys(e)))&&!c._p&&(h.instance=c,h.state.loading=5),Qt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qt.set(e,a),c||H0(o,e,a,h.state))),t&&r===null)throw Error(l(528,""));return h}if(t&&r!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=fi(a),a=Ua(o).hoistableScripts,r=a.get(t),r||(r={type:"script",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function di(e){return'href="'+qt(e)+'"'}function ys(e){return'link[rel="stylesheet"]['+e+"]"}function Sm(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function H0(e,t,a,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),ct(t,"link",a),it(t),e.head.appendChild(t))}function fi(e){return'[src="'+qt(e)+'"]'}function vs(e){return"script[async]"+e}function wm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+qt(a.href)+'"]');if(r)return t.instance=r,it(r),r;var o=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),it(r),ct(r,"style",o),Vr(r,a.precedence,e),t.instance=r;case"stylesheet":o=di(a.href);var c=e.querySelector(ys(o));if(c)return t.state.loading|=4,t.instance=c,it(c),c;r=Sm(a),(o=Qt.get(o))&&Lu(r,o),c=(e.ownerDocument||e).createElement("link"),it(c);var h=c;return h._p=new Promise(function(p,w){h.onload=p,h.onerror=w}),ct(c,"link",r),t.state.loading|=4,Vr(c,a.precedence,e),t.instance=c;case"script":return c=fi(a.src),(o=e.querySelector(vs(c)))?(t.instance=o,it(o),o):(r=a,(o=Qt.get(c))&&(r=E({},a),ku(r,o)),e=e.ownerDocument||e,o=e.createElement("script"),it(o),ct(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Vr(r,a.precedence,e));return t.instance}function Vr(e,t,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,c=o,h=0;h<r.length;h++){var p=r[h];if(p.dataset.precedence===t)c=p;else if(c!==o)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ku(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Yr=null;function Tm(e,t,a){if(Yr===null){var r=new Map,o=Yr=new Map;o.set(a,r)}else o=Yr,r=o.get(a),r||(r=new Map,o.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var c=a[o];if(!(c[Di]||c[rt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var h=c.getAttribute(t)||"";h=e+h;var p=r.get(h);p?p.push(c):r.set(h,[c])}}return r}function Am(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function G0(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function xm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function q0(e,t,a,r){if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=di(r.href),c=t.querySelector(ys(o));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Pr.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,it(c);return}c=t.ownerDocument||t,r=Sm(r),(o=Qt.get(o))&&Lu(r,o),c=c.createElement("link"),it(c);var h=c;h._p=new Promise(function(p,w){h.onload=p,h.onerror=w}),ct(c,"link",r),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Pr.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var zu=0;function $0(e,t){return e.stylesheets&&e.count===0&&Jr(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var r=setTimeout(function(){if(e.stylesheets&&Jr(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&zu===0&&(zu=62500*w0());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Jr(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>zu?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function Pr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kr=null;function Jr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kr=new Map,t.forEach(V0,e),Kr=null,Pr.call(e))}function V0(e,t){if(!(t.state.loading&4)){var a=Kr.get(e);if(a)var r=a.get(null);else{a=new Map,Kr.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<o.length;c++){var h=o[c];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),r=h)}r&&a.set(null,r)}o=t.instance,h=o.getAttribute("data-precedence"),c=a.get(h)||r,c===r&&a.set(null,o),a.set(h,o),this.count++,r=Pr.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),c?c.parentNode.insertBefore(o,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var gs={$$typeof:H,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Y0(e,t,a,r,o,c,h,p,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dl(0),this.hiddenUpdates=Dl(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=c,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Om(e,t,a,r,o,c,h,p,w,j,L,B){return e=new Y0(e,t,a,h,w,j,L,B,p),t=1,c===!0&&(t|=24),c=Ut(3,null,null,t),e.current=c,c.stateNode=e,t=go(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:r,isDehydrated:a,cache:t},Eo(c),e}function Nm(e){return e?(e=$a,e):$a}function Rm(e,t,a,r,o,c){o=Nm(o),r.context===null?r.context=o:r.pendingContext=o,r=zn(t),r.payload={element:a},c=c===void 0?null:c,c!==null&&(r.callback=c),a=Bn(e,r,t),a!==null&&(Nt(a,e,t),Xi(a,e,t))}function Cm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Bu(e,t){Cm(e,t),(e=e.alternate)&&Cm(e,t)}function jm(e){if(e.tag===13||e.tag===31){var t=ua(e,67108864);t!==null&&Nt(t,e,67108864),Bu(e,67108864)}}function Dm(e){if(e.tag===13||e.tag===31){var t=zt();t=Ul(t);var a=ua(e,t);a!==null&&Nt(a,e,t),Bu(e,t)}}var Xr=!0;function P0(e,t,a,r){var o=I.T;I.T=null;var c=q.p;try{q.p=2,Hu(e,t,a,r)}finally{q.p=c,I.T=o}}function K0(e,t,a,r){var o=I.T;I.T=null;var c=q.p;try{q.p=8,Hu(e,t,a,r)}finally{q.p=c,I.T=o}}function Hu(e,t,a,r){if(Xr){var o=Gu(r);if(o===null)xu(e,t,r,Qr,a),Im(e,r);else if(X0(o,e,t,a,r))r.stopPropagation();else if(Im(e,r),t&4&&-1<J0.indexOf(e)){for(;o!==null;){var c=Da(o);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=ia(c.pendingLanes);if(h!==0){var p=c;for(p.pendingLanes|=2,p.entangledLanes|=2;h;){var w=1<<31-jt(h);p.entanglements[1]|=w,h&=~w}un(c),(xe&6)===0&&(Dr=Rt()+500,ds(0))}}break;case 31:case 13:p=ua(c,2),p!==null&&Nt(p,c,2),Ir(),Bu(c,2)}if(c=Gu(r),c===null&&xu(e,t,r,Qr,a),c===o)break;o=c}o!==null&&r.stopPropagation()}else xu(e,t,r,null,a)}}function Gu(e){return e=ql(e),qu(e)}var Qr=null;function qu(e){if(Qr=null,e=ja(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qr=e,null}function Um(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ug()){case Hc:return 2;case Gc:return 8;case Bs:case Ig:return 32;case qc:return 268435456;default:return 32}default:return 32}}var $u=!1,Qn=null,Zn=null,Fn=null,ps=new Map,_s=new Map,Wn=[],J0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Im(e,t){switch(e){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(t.pointerId)}}function bs(e,t,a,r,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:c,targetContainers:[o]},t!==null&&(t=Da(t),t!==null&&jm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function X0(e,t,a,r,o){switch(t){case"focusin":return Qn=bs(Qn,e,t,a,r,o),!0;case"dragenter":return Zn=bs(Zn,e,t,a,r,o),!0;case"mouseover":return Fn=bs(Fn,e,t,a,r,o),!0;case"pointerover":var c=o.pointerId;return ps.set(c,bs(ps.get(c)||null,e,t,a,r,o)),!0;case"gotpointercapture":return c=o.pointerId,_s.set(c,bs(_s.get(c)||null,e,t,a,r,o)),!0}return!1}function Mm(e){var t=ja(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Jc(e.priority,function(){Dm(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,Jc(e.priority,function(){Dm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Gu(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Gl=r,a.target.dispatchEvent(r),Gl=null}else return t=Da(a),t!==null&&jm(t),e.blockedOn=a,!1;t.shift()}return!0}function Lm(e,t,a){Zr(e)&&a.delete(t)}function Q0(){$u=!1,Qn!==null&&Zr(Qn)&&(Qn=null),Zn!==null&&Zr(Zn)&&(Zn=null),Fn!==null&&Zr(Fn)&&(Fn=null),ps.forEach(Lm),_s.forEach(Lm)}function Fr(e,t){e.blockedOn===t&&(e.blockedOn=null,$u||($u=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Q0)))}var Wr=null;function km(e){Wr!==e&&(Wr=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Wr===e&&(Wr=null);for(var t=0;t<e.length;t+=3){var a=e[t],r=e[t+1],o=e[t+2];if(typeof r!="function"){if(qu(r||a)===null)continue;break}var c=Da(a);c!==null&&(e.splice(t,3),t-=3,Go(c,{pending:!0,data:o,method:a.method,action:r},r,o))}}))}function hi(e){function t(w){return Fr(w,e)}Qn!==null&&Fr(Qn,e),Zn!==null&&Fr(Zn,e),Fn!==null&&Fr(Fn,e),ps.forEach(t),_s.forEach(t);for(var a=0;a<Wn.length;a++){var r=Wn[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Wn.length&&(a=Wn[0],a.blockedOn===null);)Mm(a),a.blockedOn===null&&Wn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var o=a[r],c=a[r+1],h=o[St]||null;if(typeof c=="function")h||km(a);else if(h){var p=null;if(c&&c.hasAttribute("formAction")){if(o=c,h=c[St]||null)p=h.formAction;else if(qu(o)!==null)continue}else p=h.action;typeof p=="function"?a[r+1]=p:(a.splice(r,3),r-=3),km(a)}}}function zm(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),r||setTimeout(a,20)}function a(){if(!r&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Vu(e){this._internalRoot=e}el.prototype.render=Vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,r=zt();Rm(a,r,e,t,null,null)},el.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rm(e.current,2,null,e,null,null),Ir(),t[Ca]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Wn.length&&t!==0&&t<Wn[a].priority;a++);Wn.splice(a,0,e),a===0&&Mm(e)}};var Bm=n.version;if(Bm!=="19.2.4")throw Error(l(527,Bm,"19.2.4"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=y(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Z0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{Ri=tl.inject(Z0),Ct=tl}catch{}}return Ss.createRoot=function(e,t){if(!u(e))throw Error(l(299));var a=!1,r="",o=Pf,c=Kf,h=Jf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Om(e,1,!1,null,null,a,r,null,o,c,h,zm),e[Ca]=t.current,Au(e),new Vu(t)},Ss.hydrateRoot=function(e,t,a){if(!u(e))throw Error(l(299));var r=!1,o="",c=Pf,h=Kf,p=Jf,w=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(p=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),t=Om(e,1,!0,t,a??null,r,o,w,c,h,p,zm),t.context=Nm(null),a=t.current,r=zt(),r=Ul(r),o=zn(r),o.callback=null,Bn(a,o,r),a=r,t.current.lanes=a,ji(t,a),un(t),e[Ca]=t.current,Au(e),new el(t)},Ss.version="19.2.4",Ss}var Xm;function o_(){if(Xm)return Ku.exports;Xm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Ku.exports=l_(),Ku.exports}var u_=o_();const c_=Hv(u_),ft=[];for(let i=0;i<256;++i)ft.push((i+256).toString(16).slice(1));function d_(i,n=0){return(ft[i[n+0]]+ft[i[n+1]]+ft[i[n+2]]+ft[i[n+3]]+"-"+ft[i[n+4]]+ft[i[n+5]]+"-"+ft[i[n+6]]+ft[i[n+7]]+"-"+ft[i[n+8]]+ft[i[n+9]]+"-"+ft[i[n+10]]+ft[i[n+11]]+ft[i[n+12]]+ft[i[n+13]]+ft[i[n+14]]+ft[i[n+15]]).toLowerCase()}let Zu;const f_=new Uint8Array(16);function h_(){if(!Zu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zu=crypto.getRandomValues.bind(crypto)}return Zu(f_)}const m_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qm={randomUUID:m_};function y_(i,n,s){var u;i=i||{};const l=i.random??((u=i.rng)==null?void 0:u.call(i))??h_();if(l.length<16)throw new Error("Random bytes length must be >= 16");return l[6]=l[6]&15|64,l[8]=l[8]&63|128,d_(l)}function Na(i,n,s){return Qm.randomUUID&&!i?Qm.randomUUID():y_(i)}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=(...i)=>i.filter((n,s,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===s).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,l)=>l?l.toUpperCase():s.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=i=>{const n=g_(i);return n.charAt(0).toUpperCase()+n.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=i=>{for(const n in i)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=J.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:u="",children:d,iconNode:f,...m},v)=>J.createElement("svg",{ref:v,...p_,width:n,height:n,stroke:i,strokeWidth:l?Number(s)*24/Number(n):s,className:Gv("lucide",u),...!d&&!__(m)&&{"aria-hidden":"true"},...m},[...f.map(([y,b])=>J.createElement(y,b)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(i,n)=>{const s=J.forwardRef(({className:l,...u},d)=>J.createElement(b_,{ref:d,iconNode:n,className:Gv(`lucide-${v_(Zm(i))}`,`lucide-${i}`,l),...u}));return s.displayName=Zm(i),s};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],S_=Ne("bell",E_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],T_=Ne("check",w_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],x_=Ne("chevron-down",A_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],N_=Ne("chevron-right",O_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],C_=Ne("circle-alert",R_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],D_=Ne("circle-plus",j_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],I_=Ne("compass",U_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],L_=Ne("disc",M_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],z_=Ne("ellipsis",k_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],H_=Ne("gift",B_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],dc=Ne("hash",G_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],qv=Ne("headphones",q_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],ml=Ne("mic-off",$_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Uc=Ne("mic",V_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M17 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 1.184-1.826",key:"cv7jms"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M8.656 3H20a2 2 0 0 1 2 2v10a2 2 0 0 1-.293 1.042",key:"z8ni2w"}]],P_=Ne("monitor-off",Y_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],J_=Ne("monitor",K_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],Q_=Ne("phone-off",X_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],F_=Ne("pin",Z_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$v=Ne("plus",W_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tb=Ne("search",eb);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fm=Ne("settings",nb);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ib=Ne("shield",ab);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],rb=Ne("smile",sb);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],ob=Ne("sticker",lb);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],cb=Ne("upload",ub);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vv=Ne("users",db);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hb=Ne("video",fb);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Yv=Ne("volume-2",mb);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Os=Ne("volume-x",yb);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ic=Ne("x",vb),gb=({servers:i,activeServerId:n,onSelectServer:s,onCreateServer:l,onJoinServer:u})=>g.jsxs("div",{className:"w-[72px] bg-discord-sidebar flex flex-col items-center py-3 space-y-2 h-full overflow-y-auto no-scrollbar",children:[g.jsxs("div",{className:"w-12 h-12 bg-discord-active rounded-[24px] hover:rounded-[16px] transition-all duration-300 flex items-center justify-center cursor-pointer text-discord-text hover:bg-discord-blurple group relative",children:[g.jsx(L_,{size:28}),g.jsx("div",{className:"absolute left-0 w-1 h-2 bg-white rounded-r-full -ml-4 opacity-0 transition-all"})]}),g.jsx("div",{className:"w-8 h-[2px] bg-discord-dark rounded-lg mx-auto opacity-50"}),i.map(d=>{const f=n===d.id;return g.jsxs("div",{className:"relative group w-full flex justify-center",children:[g.jsx("div",{className:`absolute left-0 top-1/2 -translate-y-1/2 w-1 bg-white rounded-r-full transition-all duration-200 
              ${f?"h-10":"h-2 opacity-0 group-hover:opacity-100 group-hover:h-5"}`}),g.jsx("button",{onClick:()=>s(d.id),className:`w-12 h-12 rounded-[24px] transition-all duration-200 flex items-center justify-center overflow-hidden group-hover:rounded-[16px]
              ${f?"bg-discord-blurple rounded-[16px]":"bg-discord-dark hover:bg-discord-blurple"}`,children:d.icon?g.jsx("img",{src:d.icon,alt:d.name,className:"w-full h-full object-cover"}):g.jsx("span",{className:"text-sm font-medium text-white",children:d.name.substring(0,2).toUpperCase()})}),g.jsxs("div",{className:"absolute left-full ml-4 top-1/2 -translate-y-1/2 px-3 py-2 bg-black text-white text-xs font-bold rounded shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-opacity",children:[d.name,g.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-1 border-4 border-transparent border-r-black"})]})]},d.id)}),g.jsx("div",{className:"w-8 h-[2px] bg-discord-dark rounded-lg mx-auto opacity-50"}),g.jsx("button",{onClick:l,className:"group w-12 h-12 bg-discord-dark rounded-[24px] hover:rounded-[16px] hover:bg-discord-green transition-all duration-300 flex items-center justify-center cursor-pointer text-discord-green hover:text-white",title:"Add a Server",children:g.jsx($v,{size:24})}),g.jsx("button",{onClick:u,className:"group w-12 h-12 bg-discord-dark rounded-[24px] hover:rounded-[16px] hover:bg-discord-active transition-all duration-300 flex items-center justify-center cursor-pointer text-discord-text hover:text-white",title:"Join a Server",children:g.jsx(I_,{size:24})})]}),pb=({server:i,activeChannelId:n,currentUser:s,channelUsers:l,onSelectChannel:u,isMuted:d,toggleMute:f,isDeafened:m,toggleDeafen:v,onOpenSettings:y,onOpenServerSettings:b})=>{const[E,T]=J.useState(!1),_=i.channels.filter(O=>O.type==="text"),S=i.channels.filter(O=>O.type==="voice");return g.jsxs("div",{className:"w-60 bg-discord-light flex flex-col h-full border-r border-discord-darker relative",children:[g.jsxs("div",{onClick:()=>T(!E),className:"h-12 px-4 flex items-center justify-between shadow-sm hover:bg-discord-active cursor-pointer transition-colors border-b border-discord-darker relative z-20",children:[g.jsx("h1",{className:"font-bold text-white truncate",children:i.name}),E?g.jsx(Ic,{size:16}):g.jsx(x_,{size:16})]}),E&&g.jsxs("div",{className:"absolute top-14 left-2 w-56 bg-black rounded-lg shadow-xl z-30 overflow-hidden border border-discord-darker p-1.5 space-y-1",children:[g.jsxs("div",{className:"px-2 py-1.5 rounded hover:bg-discord-blurple text-discord-textMuted hover:text-white cursor-pointer flex items-center justify-between text-sm",onClick:()=>{T(!1),b()},children:["Server Settings",g.jsx(Fm,{size:14})]}),g.jsxs("div",{className:"px-2 py-1.5 rounded hover:bg-discord-active text-discord-textMuted hover:text-white cursor-pointer flex items-center justify-between text-sm",children:["Create Channel",g.jsx(Fu,{})]}),g.jsx("div",{className:"h-[1px] bg-discord-darker my-1"}),g.jsx("div",{className:"px-2 py-1.5 rounded hover:bg-discord-red text-discord-red hover:text-white cursor-pointer flex items-center justify-between text-sm",children:"Leave Server"})]}),E&&g.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>T(!1)}),g.jsxs("div",{className:"flex-1 overflow-y-auto py-3 px-2 space-y-4",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between px-2 mb-1 group text-discord-textMuted hover:text-discord-text cursor-pointer",children:[g.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Text Channels"}),g.jsx(Fu,{})]}),g.jsx("div",{className:"space-y-[2px]",children:_.map(O=>g.jsxs("div",{onClick:()=>u(O.id),className:`flex items-center px-2 py-1.5 rounded bg-transparent cursor-pointer group
                  ${n===O.id?"bg-discord-active text-white":"text-discord-textMuted hover:bg-discord-active/50 hover:text-discord-text"}
                `,children:[g.jsx(dc,{size:18,className:"mr-1.5 text-discord-textMuted"}),g.jsx("span",{className:`truncate font-medium ${n===O.id?"text-white":""}`,children:O.name})]},O.id))})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between px-2 mb-1 group text-discord-textMuted hover:text-discord-text cursor-pointer",children:[g.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Voice Channels"}),g.jsx(Fu,{})]}),g.jsx("div",{className:"space-y-[2px]",children:S.map(O=>{const N=n===O.id;return g.jsxs("div",{className:"flex flex-col",children:[g.jsxs("div",{onClick:()=>u(O.id),className:`flex items-center px-2 py-1.5 rounded cursor-pointer group
                      ${N?"bg-discord-active text-white":"text-discord-textMuted hover:bg-discord-active/50 hover:text-discord-text"}
                    `,children:[g.jsx(Yv,{size:18,className:"mr-1.5 text-discord-textMuted"}),g.jsx("span",{className:`truncate font-medium ${N?"text-white":""}`,children:O.name})]}),N&&g.jsx("div",{className:"ml-8 mt-1 mb-2 space-y-1",children:l.map(M=>{const G=M.userId===s.id;return g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("img",{src:M.avatar,className:"w-6 h-6 rounded-full border border-discord-dark"}),g.jsx("span",{className:"text-sm text-white font-medium truncate",children:M.username}),G&&g.jsxs("div",{className:"flex space-x-1",children:[d&&g.jsx(ml,{size:12,className:"text-discord-red"}),m&&g.jsx(Os,{size:12,className:"text-discord-red"})]})]},M.userId)})})]},O.id)})})]})]}),g.jsxs("div",{className:"bg-discord-darker px-2 py-1.5 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center hover:bg-discord-active p-1 rounded cursor-pointer min-w-0 mr-1 flex-1",children:[g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:s.avatar,alt:"User",className:"w-8 h-8 rounded-full"}),g.jsx("div",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-discord-darker ${m?"bg-discord-red":"bg-discord-green"}`,children:m&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-1.5 h-[1.5px] bg-discord-darker"})})})]}),g.jsxs("div",{className:"ml-2 min-w-0",children:[g.jsx("div",{className:"text-sm font-bold text-white truncate",children:s.username}),g.jsx("div",{className:"text-xs text-discord-textMuted truncate",children:m?"Deafened":"Online"})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsxs("button",{onClick:f,className:"p-1.5 hover:bg-discord-active rounded text-discord-text hover:text-white relative group",children:[d?g.jsx(ml,{size:18,className:"text-discord-red"}):g.jsx(Uc,{size:18}),g.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 bg-black text-white text-xs py-1 px-2 rounded mb-1 opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none",children:d?"Unmute":"Mute"})]}),g.jsxs("button",{onClick:v,className:"p-1.5 hover:bg-discord-active rounded text-discord-text hover:text-white relative group",children:[m?g.jsx(Os,{size:18,className:"text-discord-red"}):g.jsx(qv,{size:18}),g.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 bg-black text-white text-xs py-1 px-2 rounded mb-1 opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none",children:m?"Undeafen":"Deafen"})]}),g.jsxs("button",{onClick:y,className:"p-1.5 hover:bg-discord-active rounded text-discord-text hover:text-white relative group",children:[g.jsx(Fm,{size:18}),g.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 bg-black text-white text-xs py-1 px-2 rounded mb-1 opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none",children:"User Settings"})]})]})]})]})},Fu=()=>g.jsx("svg",{className:"w-4 h-4 cursor-pointer",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})});var _b={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wm;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Wm||(Wm={}));var ey;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(ey||(ey={}));var ty;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(ty||(ty={}));var ny;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(ny||(ny={}));var ay;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ay||(ay={}));var iy;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(iy||(iy={}));var sy;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(sy||(sy={}));var ry;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ry||(ry={}));var ly;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(ly||(ly={}));var oy;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(oy||(oy={}));var uy;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(uy||(uy={}));var cy;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(cy||(cy={}));var dy;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(dy||(dy={}));var fy;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(fy||(fy={}));var hy;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(hy||(hy={}));var my;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(my||(my={}));var yy;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(yy||(yy={}));var vy;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vy||(vy={}));var gy;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gy||(gy={}));var py;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(py||(py={}));var _y;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_y||(_y={}));var by;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(by||(by={}));var Ey;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ey||(Ey={}));var Sy;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Sy||(Sy={}));var wy;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(wy||(wy={}));var Ty;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ty||(Ty={}));var Ay;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ay||(Ay={}));var xy;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(xy||(xy={}));var Oy;(function(i){i.COLLECTION="COLLECTION"})(Oy||(Oy={}));var Ny;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Ny||(Ny={}));var Ry;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ry||(Ry={}));var Cy;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Cy||(Cy={}));var jy;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(jy||(jy={}));var Dy;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(Dy||(Dy={}));var Uy;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Uy||(Uy={}));var Iy;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Iy||(Iy={}));var My;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(My||(My={}));var Ly;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ly||(Ly={}));var ky;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(ky||(ky={}));var zy;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(zy||(zy={}));var By;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(By||(By={}));var Hy;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(Hy||(Hy={}));var Gy;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING",i.DISTILLATION="DISTILLATION"})(Gy||(Gy={}));var qy;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(qy||(qy={}));var $y;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})($y||($y={}));var Vy;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(Vy||(Vy={}));var Yy;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Yy||(Yy={}));var Py;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Py||(Py={}));var Ky;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ky||(Ky={}));var Jy;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(Jy||(Jy={}));var Xy;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Xy||(Xy={}));var Qy;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qy||(Qy={}));var Zy;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Zy||(Zy={}));var Fy;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Fy||(Fy={}));var Wy;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Wy||(Wy={}));var ev;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(ev||(ev={}));var tv;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(tv||(tv={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nv;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(nv||(nv={}));function yl(i,n){var s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(s[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(i);u<l.length;u++)n.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(i,l[u])&&(s[l[u]]=i[l[u]]);return s}function av(i){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&i[n],l=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function qe(i){return this instanceof qe?(this.v=i,this):new qe(i)}function Ns(i,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=s.apply(i,n||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),u[Symbol.asyncIterator]=function(){return this},u;function f(_){return function(S){return Promise.resolve(S).then(_,E)}}function m(_,S){l[_]&&(u[_]=function(O){return new Promise(function(N,M){d.push([_,O,N,M])>1||v(_,O)})},S&&(u[_]=S(u[_])))}function v(_,S){try{y(l[_](S))}catch(O){T(d[0][3],O)}}function y(_){_.value instanceof qe?Promise.resolve(_.value.v).then(b,E):T(d[0][2],_)}function b(_){v("next",_)}function E(_){v("throw",_)}function T(_,S){_(S),d.shift(),d.length&&v(d[0][0],d[0][1])}}function xi(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],s;return n?n.call(i):(i=typeof av=="function"?av(i):i[Symbol.iterator](),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(d){s[d]=i[d]&&function(f){return new Promise(function(m,v){f=i[d](f),u(m,v,f.done,f.value)})}}function u(d,f,m,v){Promise.resolve(v).then(function(y){d({value:y,done:m})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pv=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return Pv=i.randomUUID.bind(i),i.randomUUID();const n=new Uint8Array(1),s=i?()=>i.getRandomValues(n)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,l=>(+l^s()&15>>+l/4).toString(16))};const bb=()=>Pv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fc(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const hc=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const n=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(n.stack=i.stack),i.cause&&!n.cause&&(n.cause=i.cause),i.name&&(n.name=i.name),n}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zt extends Error{}class Et extends Zt{constructor(n,s,l,u){super(`${Et.makeMessage(n,s,l)}`),this.status=n,this.headers=u,this.error=s}static makeMessage(n,s,l){const u=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):l;return n&&u?`${n} ${u}`:n?`${n} status code (no body)`:u||"(no status code or body)"}static generate(n,s,l,u){if(!n||!u)return new El({message:l,cause:hc(s)});const d=s;return n===400?new Jv(n,d,l,u):n===401?new Xv(n,d,l,u):n===403?new Qv(n,d,l,u):n===404?new Zv(n,d,l,u):n===409?new Fv(n,d,l,u):n===422?new Wv(n,d,l,u):n===429?new eg(n,d,l,u):n>=500?new tg(n,d,l,u):new Et(n,d,l,u)}}class mc extends Et{constructor({message:n}={}){super(void 0,void 0,n||"Request was aborted.",void 0)}}class El extends Et{constructor({message:n,cause:s}){super(void 0,void 0,n||"Connection error.",void 0),s&&(this.cause=s)}}class Kv extends El{constructor({message:n}={}){super({message:n??"Request timed out."})}}class Jv extends Et{}class Xv extends Et{}class Qv extends Et{}class Zv extends Et{}class Fv extends Et{}class Wv extends Et{}class eg extends Et{}class tg extends Et{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eb=/^[a-z][a-z0-9+.-]*:/i,Sb=i=>Eb.test(i);let yc=i=>(yc=Array.isArray,yc(i));const wb=yc;let Tb=wb;const iv=Tb;function Ab(i){if(!i)return!0;for(const n in i)return!1;return!0}function xb(i,n){return Object.prototype.hasOwnProperty.call(i,n)}const Ob=(i,n)=>{if(typeof n!="number"||!Number.isInteger(n))throw new Zt(`${i} must be an integer`);if(n<0)throw new Zt(`${i} must be a positive integer`);return n},Nb=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rb=i=>new Promise(n=>setTimeout(n,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cb(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const jb=()=>{var i,n,s,l,u;const d=Cb();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bi,"X-Stainless-OS":rv(Deno.build.os),"X-Stainless-Arch":sv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(n=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&n!==void 0?n:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bi,"X-Stainless-OS":rv((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":sv((l=globalThis.process.arch)!==null&&l!==void 0?l:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(u=globalThis.process.version)!==null&&u!==void 0?u:"unknown"};const f=Db();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Db(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:n,pattern:s}of i){const l=s.exec(navigator.userAgent);if(l){const u=l[1]||0,d=l[2]||0,f=l[3]||0;return{browser:n,version:`${u}.${d}.${f}`}}}return null}const sv=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",rv=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let nl;const Ub=()=>nl??(nl=jb());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ib(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ng(...i){const n=globalThis.ReadableStream;if(typeof n>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new n(...i)}function Mb(i){let n=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return ng({start(){},async pull(s){const{done:l,value:u}=await n.next();l?s.close():s.enqueue(u)},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}function ag(i){if(i[Symbol.asyncIterator])return i;const n=i.getReader();return{async next(){try{const s=await n.read();return s!=null&&s.done&&n.releaseLock(),s}catch(s){throw n.releaseLock(),s}},async return(){const s=n.cancel();return n.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Lb(i){var n,s;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((s=(n=i[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(n));return}const l=i.getReader(),u=l.cancel();l.releaseLock(),await u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kb=({headers:i,body:n})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(n)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ig=()=>{var i;if(typeof File>"u"){const{process:n}=globalThis,s=typeof((i=n==null?void 0:n.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(n.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Wu(i,n,s){return ig(),new File(i,n??"unknown_file",s)}function zb(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const Bb=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sg=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",Hb=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&sg(i),Gb=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function qb(i,n,s){if(ig(),i=await i,Hb(i))return i instanceof File?i:Wu([await i.arrayBuffer()],i.name);if(Gb(i)){const u=await i.blob();return n||(n=new URL(i.url).pathname.split(/[\\/]/).pop()),Wu(await vc(u),n,s)}const l=await vc(i);if(n||(n=zb(i)),!(s!=null&&s.type)){const u=l.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof u=="string"&&(s=Object.assign(Object.assign({},s),{type:u}))}return Wu(l,n,s)}async function vc(i){var n,s,l,u,d;let f=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)f.push(i);else if(sg(i))f.push(i instanceof Blob?i:await i.arrayBuffer());else if(Bb(i))try{for(var m=!0,v=xi(i),y;y=await v.next(),n=y.done,!n;m=!0){u=y.value,m=!1;const b=u;f.push(...await vc(b))}}catch(b){s={error:b}}finally{try{!m&&!n&&(l=v.return)&&await l.call(v)}finally{if(s)throw s.error}}else{const b=(d=i==null?void 0:i.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof i}${b?`; constructor: ${b}`:""}${$b(i)}`)}return f}function $b(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rg{constructor(n){this._client=n}}rg._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lg(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const lv=Object.freeze(Object.create(null)),Vb=(i=lg)=>(function(s,...l){if(s.length===1)return s[0];let u=!1;const d=[],f=s.reduce((b,E,T)=>{var _,S,O;/[?#]/.test(E)&&(u=!0);const N=l[T];let M=(u?encodeURIComponent:i)(""+N);return T!==l.length&&(N==null||typeof N=="object"&&N.toString===((O=Object.getPrototypeOf((S=Object.getPrototypeOf((_=N.hasOwnProperty)!==null&&_!==void 0?_:lv))!==null&&S!==void 0?S:lv))===null||O===void 0?void 0:O.toString))&&(M=N+"",d.push({start:b.length+E.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),b+E+(T===l.length?"":M)},""),m=f.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let y;for(;(y=v.exec(m))!==null;)d.push({start:y.index,length:y[0].length,error:`Value "${y[0]}" can't be safely passed as a path parameter`});if(d.sort((b,E)=>b.start-E.start),d.length>0){let b=0;const E=d.reduce((T,_)=>{const S=" ".repeat(_.start-b),O="^".repeat(_.length);return b=_.start+_.length,T+S+O},"");throw new Zt(`Path parameters result in path with invalid segments:
${d.map(T=>T.error).join(`
`)}
${f}
${E}`)}return f}),al=Vb(lg);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class og extends rg{create(n,s){var l;const{api_version:u=this._client.apiVersion}=n,d=yl(n,["api_version"]);if("model"in d&&"agent_config"in d)throw new Zt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new Zt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(al`/${u}/interactions`,Object.assign(Object.assign({body:d},s),{stream:(l=n.stream)!==null&&l!==void 0?l:!1}))}delete(n,s={},l){const{api_version:u=this._client.apiVersion}=s??{};return this._client.delete(al`/${u}/interactions/${n}`,l)}cancel(n,s={},l){const{api_version:u=this._client.apiVersion}=s??{};return this._client.post(al`/${u}/interactions/${n}/cancel`,l)}get(n,s={},l){var u;const d=s??{},{api_version:f=this._client.apiVersion}=d,m=yl(d,["api_version"]);return this._client.get(al`/${f}/interactions/${n}`,Object.assign(Object.assign({query:m},l),{stream:(u=s==null?void 0:s.stream)!==null&&u!==void 0?u:!1}))}}og._key=Object.freeze(["interactions"]);class ug extends og{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yb(i){let n=0;for(const u of i)n+=u.length;const s=new Uint8Array(n);let l=0;for(const u of i)s.set(u,l),l+=u.length;return s}let il;function Mc(i){let n;return(il??(n=new globalThis.TextEncoder,il=n.encode.bind(n)))(i)}let sl;function ov(i){let n;return(sl??(n=new globalThis.TextDecoder,sl=n.decode.bind(n)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(n){if(n==null)return[];const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Mc(n):n;this.buffer=Yb([this.buffer,s]);const l=[];let u;for(;(u=Pb(this.buffer,this.carriageReturnIndex))!=null;){if(u.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=u.index;continue}if(this.carriageReturnIndex!=null&&(u.index!==this.carriageReturnIndex+1||u.carriage)){l.push(ov(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?u.preceding-1:u.preceding,f=ov(this.buffer.subarray(0,d));l.push(f),this.buffer=this.buffer.subarray(u.index),this.carriageReturnIndex=null}return l}flush(){return this.buffer.length?this.decode(`
`):[]}}Sl.NEWLINE_CHARS=new Set([`
`,"\r"]);Sl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Pb(i,n){for(let u=n??0;u<i.length;u++){if(i[u]===10)return{preceding:u,index:u+1,carriage:!1};if(i[u]===13)return{preceding:u,index:u+1,carriage:!0}}return null}function Kb(i){for(let l=0;l<i.length-1;l++){if(i[l]===10&&i[l+1]===10||i[l]===13&&i[l+1]===13)return l+2;if(i[l]===13&&i[l+1]===10&&l+3<i.length&&i[l+2]===13&&i[l+3]===10)return l+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vl={off:0,error:200,warn:300,info:400,debug:500},uv=(i,n,s)=>{if(i){if(xb(vl,i))return i;bt(s).warn(`${n} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(vl))}`)}};function As(){}function rl(i,n,s){return!n||vl[i]>vl[s]?As:n[i].bind(n)}const Jb={error:As,warn:As,info:As,debug:As};let cv=new WeakMap;function bt(i){var n;const s=i.logger,l=(n=i.logLevel)!==null&&n!==void 0?n:"off";if(!s)return Jb;const u=cv.get(s);if(u&&u[0]===l)return u[1];const d={error:rl("error",s,l),warn:rl("warn",s,l),info:rl("info",s,l),debug:rl("debug",s,l)};return cv.set(s,[l,d]),d}const Ta=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([n,s])=>[n,n.toLowerCase()==="x-goog-api-key"||n.toLowerCase()==="authorization"||n.toLowerCase()==="cookie"||n.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ti{constructor(n,s,l){this.iterator=n,this.controller=s,this.client=l}static fromSSEResponse(n,s,l){let u=!1;const d=l?bt(l):console;function f(){return Ns(this,arguments,function*(){var v,y,b,E;if(u)throw new Zt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let T=!1;try{try{for(var _=!0,S=xi(Xb(n,s)),O;O=yield qe(S.next()),v=O.done,!v;_=!0){E=O.value,_=!1;const N=E;if(!T)if(N.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield qe(JSON.parse(N.data))}catch(M){throw d.error("Could not parse message into JSON:",N.data),d.error("From chunk:",N.raw),M}}}catch(N){y={error:N}}finally{try{!_&&!v&&(b=S.return)&&(yield qe(b.call(S)))}finally{if(y)throw y.error}}T=!0}catch(N){if(fc(N))return yield qe(void 0);throw N}finally{T||s.abort()}})}return new Ti(f,s,l)}static fromReadableStream(n,s,l){let u=!1;function d(){return Ns(this,arguments,function*(){var v,y,b,E;const T=new Sl,_=ag(n);try{for(var S=!0,O=xi(_),N;N=yield qe(O.next()),v=N.done,!v;S=!0){E=N.value,S=!1;const M=E;for(const G of T.decode(M))yield yield qe(G)}}catch(M){y={error:M}}finally{try{!S&&!v&&(b=O.return)&&(yield qe(b.call(O)))}finally{if(y)throw y.error}}for(const M of T.flush())yield yield qe(M)})}function f(){return Ns(this,arguments,function*(){var v,y,b,E;if(u)throw new Zt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let T=!1;try{try{for(var _=!0,S=xi(d()),O;O=yield qe(S.next()),v=O.done,!v;_=!0){E=O.value,_=!1;const N=E;T||N&&(yield yield qe(JSON.parse(N)))}}catch(N){y={error:N}}finally{try{!_&&!v&&(b=S.return)&&(yield qe(b.call(S)))}finally{if(y)throw y.error}}T=!0}catch(N){if(fc(N))return yield qe(void 0);throw N}finally{T||s.abort()}})}return new Ti(f,s,l)}[Symbol.asyncIterator](){return this.iterator()}tee(){const n=[],s=[],l=this.iterator(),u=d=>({next:()=>{if(d.length===0){const f=l.next();n.push(f),s.push(f)}return d.shift()}});return[new Ti(()=>u(n),this.controller,this.client),new Ti(()=>u(s),this.controller,this.client)]}toReadableStream(){const n=this;let s;return ng({async start(){s=n[Symbol.asyncIterator]()},async pull(l){try{const{value:u,done:d}=await s.next();if(d)return l.close();const f=Mc(JSON.stringify(u)+`
`);l.enqueue(f)}catch(u){l.error(u)}},async cancel(){var l;await((l=s.return)===null||l===void 0?void 0:l.call(s))}})}}function Xb(i,n){return Ns(this,arguments,function*(){var l,u,d,f;if(!i.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zt("Attempted to iterate over a response with no body");const m=new Zb,v=new Sl,y=ag(i.body);try{for(var b=!0,E=xi(Qb(y)),T;T=yield qe(E.next()),l=T.done,!l;b=!0){f=T.value,b=!1;const _=f;for(const S of v.decode(_)){const O=m.decode(S);O&&(yield yield qe(O))}}}catch(_){u={error:_}}finally{try{!b&&!l&&(d=E.return)&&(yield qe(d.call(E)))}finally{if(u)throw u.error}}for(const _ of v.flush()){const S=m.decode(_);S&&(yield yield qe(S))}})}function Qb(i){return Ns(this,arguments,function*(){var s,l,u,d;let f=new Uint8Array;try{for(var m=!0,v=xi(i),y;y=yield qe(v.next()),s=y.done,!s;m=!0){d=y.value,m=!1;const b=d;if(b==null)continue;const E=b instanceof ArrayBuffer?new Uint8Array(b):typeof b=="string"?Mc(b):b;let T=new Uint8Array(f.length+E.length);T.set(f),T.set(E,f.length),f=T;let _;for(;(_=Kb(f))!==-1;)yield yield qe(f.slice(0,_)),f=f.slice(_)}}catch(b){l={error:b}}finally{try{!m&&!s&&(u=v.return)&&(yield qe(u.call(v)))}finally{if(l)throw l.error}}f.length>0&&(yield yield qe(f))})}class Zb{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(n){if(n.endsWith("\r")&&(n=n.substring(0,n.length-1)),!n){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(n),n.startsWith(":"))return null;let[s,l,u]=Fb(n,":");return u.startsWith(" ")&&(u=u.substring(1)),s==="event"?this.event=u:s==="data"&&this.data.push(u),null}}function Fb(i,n){const s=i.indexOf(n);return s!==-1?[i.substring(0,s),n,i.substring(s+n.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Wb(i,n){const{response:s,requestLogID:l,retryOfRequestLogID:u,startTime:d}=n,f=await(async()=>{var m;if(n.options.stream)return bt(i).debug("response",s.status,s.url,s.headers,s.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(s,n.controller,i):Ti.fromSSEResponse(s,n.controller,i);if(s.status===204)return null;if(n.options.__binaryResponse)return s;const v=s.headers.get("content-type"),y=(m=v==null?void 0:v.split(";")[0])===null||m===void 0?void 0:m.trim();return(y==null?void 0:y.includes("application/json"))||(y==null?void 0:y.endsWith("+json"))?s.headers.get("content-length")==="0"?void 0:await s.json():await s.text()})();return bt(i).debug(`[${l}] response parsed`,Ta({retryOfRequestLogID:u,url:s.url,status:s.status,body:f,durationMs:Date.now()-d})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lc extends Promise{constructor(n,s,l=Wb){super(u=>{u(null)}),this.responsePromise=s,this.parseResponse=l,this.client=n}_thenUnwrap(n){return new Lc(this.client,this.responsePromise,async(s,l)=>n(await this.parseResponse(s,l),l))}asResponse(){return this.responsePromise.then(n=>n.response)}async withResponse(){const[n,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:n,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(n=>this.parseResponse(this.client,n))),this.parsedPromise}then(n,s){return this.parse().then(n,s)}catch(n){return this.parse().catch(n)}finally(n){return this.parse().finally(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cg=Symbol("brand.privateNullableHeaders");function*eE(i){if(!i)return;if(cg in i){const{values:l,nulls:u}=i;yield*l.entries();for(const d of u)yield[d,null];return}let n=!1,s;i instanceof Headers?s=i.entries():iv(i)?s=i:(n=!0,s=Object.entries(i??{}));for(let l of s){const u=l[0];if(typeof u!="string")throw new TypeError("expected header name to be a string");const d=iv(l[1])?l[1]:[l[1]];let f=!1;for(const m of d)m!==void 0&&(n&&!f&&(f=!0,yield[u,null]),yield[u,m])}}const ws=i=>{const n=new Headers,s=new Set;for(const l of i){const u=new Set;for(const[d,f]of eE(l)){const m=d.toLowerCase();u.has(m)||(n.delete(d),u.add(m)),f===null?(n.delete(d),s.add(m)):(n.append(d,f),s.delete(m))}}return{[cg]:!0,values:n,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ec=i=>{var n,s,l,u,d,f;if(typeof globalThis.process<"u")return(l=(s=(n=_b)===null||n===void 0?void 0:n[i])===null||s===void 0?void 0:s.trim())!==null&&l!==void 0?l:void 0;if(typeof globalThis.Deno<"u")return(f=(d=(u=globalThis.Deno.env)===null||u===void 0?void 0:u.get)===null||d===void 0?void 0:d.call(u,i))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dg;class wl{constructor(n){var s,l,u,d,f,m,v,{baseURL:y=ec("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:b=(s=ec("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:E="v1beta"}=n,T=yl(n,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:b,apiVersion:E},T),{baseURL:y||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(l=_.timeout)!==null&&l!==void 0?l:wl.DEFAULT_TIMEOUT,this.logger=(u=_.logger)!==null&&u!==void 0?u:console;const S="warn";this.logLevel=S,this.logLevel=(f=(d=uv(_.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:uv(ec("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:S,this.fetchOptions=_.fetchOptions,this.maxRetries=(m=_.maxRetries)!==null&&m!==void 0?m:2,this.fetch=(v=_.fetch)!==null&&v!==void 0?v:Ib(),this.encoder=kb,this._options=_,this.apiKey=b,this.apiVersion=E,this.clientAdapter=_.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:s}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){const s=ws([n.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return ws([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ws([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([s,l])=>typeof l<"u").map(([s,l])=>{if(typeof l=="string"||typeof l=="number"||typeof l=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(l)}`;if(l===null)return`${encodeURIComponent(s)}=`;throw new Zt(`Cannot stringify type ${typeof l}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${bi}`}defaultIdempotencyKey(){return`stainless-node-retry-${bb()}`}makeStatusError(n,s,l,u){return Et.generate(n,s,l,u)}buildURL(n,s,l){const u=!this.baseURLOverridden()&&l||this.baseURL,d=Sb(n)?new URL(n):new URL(u+(u.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),f=this.defaultQuery();return Ab(f)||(s=Object.assign(Object.assign({},f),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(d.search=this.stringifyQuery(s)),d.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){const s=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(n,{url:s,options:l}){}get(n,s){return this.methodRequest("get",n,s)}post(n,s){return this.methodRequest("post",n,s)}patch(n,s){return this.methodRequest("patch",n,s)}put(n,s){return this.methodRequest("put",n,s)}delete(n,s){return this.methodRequest("delete",n,s)}methodRequest(n,s,l){return this.request(Promise.resolve(l).then(u=>Object.assign({method:n,path:s},u)))}request(n,s=null){return new Lc(this,this.makeRequest(n,s,void 0))}async makeRequest(n,s,l){var u,d,f;const m=await n,v=(u=m.maxRetries)!==null&&u!==void 0?u:this.maxRetries;s==null&&(s=v),await this.prepareOptions(m);const{req:y,url:b,timeout:E}=await this.buildRequest(m,{retryCount:v-s});await this.prepareRequest(y,{url:b,options:m});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=l===void 0?"":`, retryOf: ${l}`,S=Date.now();if(bt(this).debug(`[${T}] sending request`,Ta({retryOfRequestLogID:l,method:m.method,url:b,options:m,headers:y.headers})),!((d=m.signal)===null||d===void 0)&&d.aborted)throw new mc;const O=new AbortController,N=await this.fetchWithTimeout(b,y,E,O).catch(hc),M=Date.now();if(N instanceof globalThis.Error){const H=`retrying, ${s} attempts remaining`;if(!((f=m.signal)===null||f===void 0)&&f.aborted)throw new mc;const Y=fc(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(s)return bt(this).info(`[${T}] connection ${Y?"timed out":"failed"} - ${H}`),bt(this).debug(`[${T}] connection ${Y?"timed out":"failed"} (${H})`,Ta({retryOfRequestLogID:l,url:b,durationMs:M-S,message:N.message})),this.retryRequest(m,s,l??T);throw bt(this).info(`[${T}] connection ${Y?"timed out":"failed"} - error; no more retries left`),bt(this).debug(`[${T}] connection ${Y?"timed out":"failed"} (error; no more retries left)`,Ta({retryOfRequestLogID:l,url:b,durationMs:M-S,message:N.message})),Y?new Kv:new El({cause:N})}const G=`[${T}${_}] ${y.method} ${b} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${M-S}ms`;if(!N.ok){const H=await this.shouldRetry(N);if(s&&H){const Se=`retrying, ${s} attempts remaining`;return await Lb(N.body),bt(this).info(`${G} - ${Se}`),bt(this).debug(`[${T}] response error (${Se})`,Ta({retryOfRequestLogID:l,url:N.url,status:N.status,headers:N.headers,durationMs:M-S})),this.retryRequest(m,s,l??T,N.headers)}const Y=H?"error; no more retries left":"error; not retryable";bt(this).info(`${G} - ${Y}`);const ce=await N.text().catch(Se=>hc(Se).message),ee=Nb(ce),V=ee?void 0:ce;throw bt(this).debug(`[${T}] response error (${Y})`,Ta({retryOfRequestLogID:l,url:N.url,status:N.status,headers:N.headers,message:V,durationMs:Date.now()-S})),this.makeStatusError(N.status,ee,V,N.headers)}return bt(this).info(G),bt(this).debug(`[${T}] response start`,Ta({retryOfRequestLogID:l,url:N.url,status:N.status,headers:N.headers,durationMs:M-S})),{response:N,options:m,controller:O,requestLogID:T,retryOfRequestLogID:l,startTime:S}}async fetchWithTimeout(n,s,l,u){const d=s||{},{signal:f,method:m}=d,v=yl(d,["signal","method"]),y=this._makeAbort(u);f&&f.addEventListener("abort",y,{once:!0});const b=setTimeout(y,l),E=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,T=Object.assign(Object.assign(Object.assign({signal:u.signal},E?{duplex:"half"}:{}),{method:"GET"}),v);m&&(T.method=m.toUpperCase());try{return await this.fetch.call(void 0,n,T)}finally{clearTimeout(b)}}async shouldRetry(n){const s=n.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,s,l,u){var d;let f;const m=u==null?void 0:u.get("retry-after-ms");if(m){const y=parseFloat(m);Number.isNaN(y)||(f=y)}const v=u==null?void 0:u.get("retry-after");if(v&&!f){const y=parseFloat(v);Number.isNaN(y)?f=Date.parse(v)-Date.now():f=y*1e3}if(!(f&&0<=f&&f<60*1e3)){const y=(d=n.maxRetries)!==null&&d!==void 0?d:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(s,y)}return await Rb(f),this.makeRequest(n,s-1,l)}calculateDefaultRetryTimeoutMillis(n,s){const d=s-n,f=Math.min(.5*Math.pow(2,d),8),m=1-Math.random()*.25;return f*m*1e3}async buildRequest(n,{retryCount:s=0}={}){var l,u,d;const f=Object.assign({},n),{method:m,path:v,query:y,defaultBaseURL:b}=f,E=this.buildURL(v,y,b);"timeout"in f&&Ob("timeout",f.timeout),f.timeout=(l=f.timeout)!==null&&l!==void 0?l:this.timeout;const{bodyHeaders:T,body:_}=this.buildBody({options:f}),S=await this.buildHeaders({options:n,method:m,bodyHeaders:T,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:m,headers:S},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(u=this.fetchOptions)!==null&&u!==void 0?u:{}),(d=f.fetchOptions)!==null&&d!==void 0?d:{}),url:E,timeout:f.timeout}}async buildHeaders({options:n,method:s,bodyHeaders:l,retryCount:u}){let d={};this.idempotencyHeader&&s!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=n.idempotencyKey);const f=await this.authHeaders(n);let m=ws([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(u)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),Ub()),this._options.defaultHeaders,l,n.headers,f]);return this.validateHeaders(m),m.values}_makeAbort(n){return()=>n.abort()}buildBody({options:{body:n,headers:s}}){if(!n)return{bodyHeaders:void 0,body:void 0};const l=ws([s]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&l.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:Mb(n)}:this.encoder({body:n,headers:l})}}wl.DEFAULT_TIMEOUT=6e4;class mt extends wl{constructor(){super(...arguments),this.interactions=new ug(this)}}dg=mt;mt.GeminiNextGenAPIClient=dg;mt.GeminiNextGenAPIClientError=Zt;mt.APIError=Et;mt.APIConnectionError=El;mt.APIConnectionTimeoutError=Kv;mt.APIUserAbortError=mc;mt.NotFoundError=Zv;mt.ConflictError=Fv;mt.RateLimitError=eg;mt.BadRequestError=Jv;mt.AuthenticationError=Xv;mt.InternalServerError=tg;mt.PermissionDeniedError=Qv;mt.UnprocessableEntityError=Wv;mt.toFile=qb;mt.Interactions=ug;const tE=()=>(console.error("API_KEY is missing in environment variables."),null),nE=async(i,n=[])=>{const s=tE();if(!s)return"I cannot connect to my brain right now. Please check the API Key.";try{return(await s.chats.create({model:"gemini-3-flash-preview",history:n,config:{systemInstruction:"You are a helpful AI assistant integrated into a Discord-like chat application. Your name is Gemini. Keep responses concise and formatted using Markdown if necessary. You are friendly and cool."}}).sendMessage({message:i})).text||"I didn't have anything to say."}catch(l){return console.error("Gemini API Error:",l),"Sorry, I encountered an error processing your request."}},aE=({channel:i,currentUser:n,onSendMessage:s,messages:l})=>{const[u,d]=J.useState(""),[f,m]=J.useState(!1),v=J.useRef(null),y=()=>{var E;(E=v.current)==null||E.scrollIntoView({behavior:"smooth"})};J.useEffect(()=>{y()},[l,i.id]);const b=async E=>{if(E.key==="Enter"&&!E.shiftKey){if(E.preventDefault(),!u.trim())return;const T=u;if(d(""),s(i.id,T),T.toLowerCase().includes("@gemini")){const _=T.replace("@gemini","").trim();setTimeout(async()=>{const S=await nE(_);window.dispatchEvent(new CustomEvent("gemini-response",{detail:{channelId:i.id,content:S}}))},500)}}};return g.jsxs("div",{className:"flex-1 flex flex-col h-full bg-discord-dark",children:[g.jsxs("div",{className:"h-12 px-4 flex items-center justify-between shadow-sm border-b border-discord-darker flex-shrink-0",children:[g.jsxs("div",{className:"flex items-center text-white",children:[g.jsx(dc,{size:24,className:"text-discord-textMuted mr-2"}),g.jsx("span",{className:"font-bold mr-4",children:i.name}),g.jsxs("span",{className:"text-xs text-discord-textMuted hidden sm:block",children:["This is the start of the #",i.name," channel."]})]}),g.jsxs("div",{className:"flex items-center space-x-4 text-discord-textMuted",children:[g.jsx(S_,{size:20,className:"hover:text-discord-text cursor-pointer"}),g.jsx(F_,{size:20,className:"hover:text-discord-text cursor-pointer"}),g.jsx(Vv,{size:20,className:"hover:text-discord-text cursor-pointer"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",placeholder:"Search",className:"bg-discord-darker text-sm px-2 py-1 rounded w-32 transition-all focus:w-48 text-white placeholder-discord-textMuted outline-none"}),g.jsx(tb,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-discord-textMuted"})]})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[g.jsxs("div",{className:"mt-4 mb-8",children:[g.jsx("div",{className:"w-16 h-16 bg-discord-active rounded-full flex items-center justify-center mb-4",children:g.jsx(dc,{size:40,className:"text-white"})}),g.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome to #",i.name,"!"]}),g.jsxs("p",{className:"text-discord-textMuted",children:["This is the start of the ",g.jsxs("span",{className:"font-bold text-discord-text",children:["#",i.name]})," channel."]})]}),l.map((E,T)=>{const _=l[T-1],S=_&&_.senderId===E.senderId&&E.timestamp-_.timestamp<6e4,O=new Date(E.timestamp);return g.jsxs("div",{className:`group flex pr-4 ${S?"mt-1 py-0.5":"mt-4 py-0.5 hover:bg-[#2e3035]"}`,children:[S?g.jsx("div",{className:"w-10 mr-4 text-xs text-discord-textMuted opacity-0 group-hover:opacity-100 text-right select-none pt-1",children:O.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})}):g.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-500 mr-4 mt-0.5 overflow-hidden flex-shrink-0 cursor-pointer hover:opacity-80",children:g.jsx("img",{src:E.senderAvatar||`https://ui-avatars.com/api/?name=${E.senderName}`,alt:"avatar",className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[!S&&g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("span",{className:`font-medium hover:underline cursor-pointer ${E.senderName==="Gemini"?"text-blue-400":"text-white"}`,children:E.senderName}),E.senderName==="Gemini"&&g.jsx("span",{className:"bg-discord-blurple text-white text-[10px] px-1.5 rounded font-bold uppercase py-[1px]",children:"BOT"}),g.jsxs("span",{className:"text-xs text-discord-textMuted ml-2",children:[O.toLocaleDateString()," at ",O.toLocaleTimeString()]})]}),g.jsx("p",{className:"text-discord-text whitespace-pre-wrap leading-6 ",children:E.content})]})]},E.id)}),g.jsx("div",{ref:v})]}),g.jsxs("div",{className:"px-4 pb-6 pt-2",children:[g.jsxs("div",{className:"bg-discord-light rounded-lg p-2.5 flex items-center shadow-sm",children:[g.jsx("button",{className:"text-discord-textMuted hover:text-discord-text p-1 mr-2",children:g.jsx(D_,{size:20})}),g.jsx("input",{type:"text",className:"bg-transparent flex-1 text-discord-text outline-none placeholder-discord-textMuted",placeholder:`Message #${i.name} (Type @Gemini to chat with AI)`,value:u,onChange:E=>d(E.target.value),onKeyDown:b}),g.jsxs("div",{className:"flex items-center space-x-3 mx-2 text-discord-textMuted",children:[g.jsx(H_,{size:20,className:"hover:text-discord-text cursor-pointer"}),g.jsx(ob,{size:20,className:"hover:text-discord-text cursor-pointer"}),g.jsx(rb,{size:20,className:"hover:text-discord-text cursor-pointer"})]})]}),u.includes("@gemini")&&g.jsx("div",{className:"text-xs text-discord-blurple mt-1 font-bold",children:"Gemini AI will reply to this message."})]})]})};function Tl(i,n){var s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(s[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(i);u<l.length;u++)n.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(i,l[u])&&(s[l[u]]=i[l[u]]);return s}function iE(i,n,s,l){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function m(b){try{y(l.next(b))}catch(E){f(E)}}function v(b){try{y(l.throw(b))}catch(E){f(E)}}function y(b){b.done?d(b.value):u(b.value).then(m,v)}y((l=l.apply(i,n||[])).next())})}const sE=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class kc extends Error{constructor(n,s="FunctionsError",l){super(n),this.name=s,this.context=l}}class rE extends kc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class dv extends kc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class fv extends kc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var gc;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(gc||(gc={}));class lE{constructor(n,{headers:s={},customFetch:l,region:u=gc.Any}={}){this.url=n,this.headers=s,this.region=u,this.fetch=sE(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return iE(this,arguments,void 0,function*(s,l={}){var u;let d,f;try{const{headers:m,method:v,body:y,signal:b,timeout:E}=l;let T={},{region:_}=l;_||(_=this.region);const S=new URL(`${this.url}/${s}`);_&&_!=="any"&&(T["x-region"]=_,S.searchParams.set("forceFunctionRegion",_));let O;y&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",O=y):typeof y=="string"?(T["Content-Type"]="text/plain",O=y):typeof FormData<"u"&&y instanceof FormData?O=y:(T["Content-Type"]="application/json",O=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?O=JSON.stringify(y):O=y;let N=b;E&&(f=new AbortController,d=setTimeout(()=>f.abort(),E),b?(N=f.signal,b.addEventListener("abort",()=>f.abort())):N=f.signal);const M=yield this.fetch(S.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),m),body:O,signal:N}).catch(ce=>{throw new rE(ce)}),G=M.headers.get("x-relay-error");if(G&&G==="true")throw new dv(M);if(!M.ok)throw new fv(M);let H=((u=M.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),Y;return H==="application/json"?Y=yield M.json():H==="application/octet-stream"||H==="application/pdf"?Y=yield M.blob():H==="text/event-stream"?Y=M:H==="multipart/form-data"?Y=yield M.formData():Y=yield M.text(),{data:Y,error:null,response:M}}catch(m){return{data:null,error:m,response:m instanceof fv||m instanceof dv?m.context:void 0}}finally{d&&clearTimeout(d)}})}}var oE=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},uE=class{constructor(i){var n,s,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(n=i.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(l=i.urlLengthLimit)!==null&&l!==void 0?l:8e3,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=new Headers(this.headers),this.headers.set(i,n),this}then(i,n){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,m=null,v=null,y=d.status,b=d.statusText;if(d.ok){var E,T;if(s.method!=="HEAD"){var _;const M=await d.text();M===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((_=s.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?m=M:m=JSON.parse(M))}const O=(E=s.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),N=(T=d.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");O&&N&&N.length>1&&(v=parseInt(N[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,y=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var S;const O=await d.text();try{f=JSON.parse(O),Array.isArray(f)&&d.status===404&&(m=[],f=null,y=200,b="OK")}catch{d.status===404&&O===""?(y=204,b="No Content"):f={message:O}}if(f&&s.isMaybeSingle&&(!(f==null||(S=f.details)===null||S===void 0)&&S.includes("0 rows"))&&(f=null,y=200,b="OK"),f&&s.shouldThrowOnError)throw new oE(f)}return{error:f,data:m,count:v,status:y,statusText:b}});return this.shouldThrowOnError||(u=u.catch(d=>{var f;let m="",v="",y="";const b=d==null?void 0:d.cause;if(b){var E,T,_,S;const M=(E=b==null?void 0:b.message)!==null&&E!==void 0?E:"",G=(T=b==null?void 0:b.code)!==null&&T!==void 0?T:"";m=`${(_=d==null?void 0:d.name)!==null&&_!==void 0?_:"FetchError"}: ${d==null?void 0:d.message}`,m+=`

Caused by: ${(S=b==null?void 0:b.name)!==null&&S!==void 0?S:"Error"}: ${M}`,G&&(m+=` (${G})`),b!=null&&b.stack&&(m+=`
${b.stack}`)}else{var O;m=(O=d==null?void 0:d.stack)!==null&&O!==void 0?O:""}const N=this.url.toString().length;return(d==null?void 0:d.name)==="AbortError"||(d==null?void 0:d.code)==="ABORT_ERR"?(y="",v="Request was aborted (timeout or manual cancellation)",N>this.urlLengthLimit&&(v+=`. Note: Your request URL is ${N} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((b==null?void 0:b.name)==="HeadersOverflowError"||(b==null?void 0:b.code)==="UND_ERR_HEADERS_OVERFLOW")&&(y="",v="HTTP headers exceeded server limits (typically 16KB)",N>this.urlLengthLimit&&(v+=`. Your request URL is ${N} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=d==null?void 0:d.name)!==null&&f!==void 0?f:"FetchError"}: ${d==null?void 0:d.message}`,details:m,hint:v,code:y},data:null,count:null,status:0,statusText:""}})),u.then(i,n)}returns(){return this}overrideTypes(){return this}},cE=class extends uE{select(i){let n=!1;const s=(i??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:n=!0,nullsFirst:s,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${i}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:s=n}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,n,{foreignTable:s,referencedTable:l=s}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:n=!1,settings:s=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var f;const m=[i?"analyze":null,n?"verbose":null,s?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${v}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const hv=new RegExp("[,()]");var Ei=class extends cE{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}regexMatch(i,n){return this.url.searchParams.append(i,`match.${n}`),this}regexIMatch(i,n){return this.url.searchParams.append(i,`imatch.${n}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}isDistinct(i,n){return this.url.searchParams.append(i,`isdistinct.${n}`),this}in(i,n){const s=Array.from(new Set(n)).map(l=>typeof l=="string"&&hv.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${s})`),this}notIn(i,n){const s=Array.from(new Set(n)).map(l=>typeof l=="string"&&hv.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`not.in.(${s})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const d=s===void 0?"":`(${s})`;return this.url.searchParams.append(i,`${u}fts${d}.${n}`),this}match(i){return Object.entries(i).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(i,n,s){return this.url.searchParams.append(i,`not.${n}.${s}`),this}or(i,{foreignTable:n,referencedTable:s=n}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,n,s){return this.url.searchParams.append(i,`${n}.${s}`),this}},dE=class{constructor(i,{headers:n={},schema:s,fetch:l,urlLengthLimit:u=8e3}){this.url=i,this.headers=new Headers(n),this.schema=s,this.fetch=l,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,n){const{head:s=!1,count:l}=n??{},u=s?"HEAD":"GET";let d=!1;const f=(i??"*").split("").map(y=>/\s/.test(y)&&!d?"":(y==='"'&&(d=!d),y)).join(""),{url:m,headers:v}=this.cloneRequestState();return m.searchParams.set("select",f),l&&v.append("Prefer",`count=${l}`),new Ei({method:u,url:m,headers:v,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(i,{count:n,defaultToNull:s=!0}={}){var l;const u="POST",{url:d,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),s||f.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(m.length>0){const v=[...new Set(m)].map(y=>`"${y}"`);d.searchParams.set("columns",v.join(","))}}return new Ei({method:u,url:d,headers:f,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(i,{onConflict:n,ignoreDuplicates:s=!1,count:l,defaultToNull:u=!0}={}){var d;const f="POST",{url:m,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),n!==void 0&&m.searchParams.set("on_conflict",n),l&&v.append("Prefer",`count=${l}`),u||v.append("Prefer","missing=default"),Array.isArray(i)){const y=i.reduce((b,E)=>b.concat(Object.keys(E)),[]);if(y.length>0){const b=[...new Set(y)].map(E=>`"${E}"`);m.searchParams.set("columns",b.join(","))}}return new Ei({method:f,url:m,headers:v,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}update(i,{count:n}={}){var s;const l="PATCH",{url:u,headers:d}=this.cloneRequestState();return n&&d.append("Prefer",`count=${n}`),new Ei({method:l,url:u,headers:d,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:i}={}){var n;const s="DELETE",{url:l,headers:u}=this.cloneRequestState();return i&&u.append("Prefer",`count=${i}`),new Ei({method:s,url:l,headers:u,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function js(i){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},js(i)}function fE(i,n){if(js(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var l=s.call(i,n);if(js(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function hE(i){var n=fE(i,"string");return js(n)=="symbol"?n:n+""}function mE(i,n,s){return(n=hE(n))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}function mv(i,n){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),s.push.apply(s,l)}return s}function ll(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?mv(Object(s),!0).forEach(function(l){mE(i,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):mv(Object(s)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(s,l))})}return i}var yE=class fg{constructor(n,{headers:s={},schema:l,fetch:u,timeout:d,urlLengthLimit:f=8e3}={}){this.url=n,this.headers=new Headers(s),this.schemaName=l,this.urlLengthLimit=f;const m=u??globalThis.fetch;d!==void 0&&d>0?this.fetch=(v,y)=>{const b=new AbortController,E=setTimeout(()=>b.abort(),d),T=y==null?void 0:y.signal;if(T){if(T.aborted)return clearTimeout(E),m(v,y);const _=()=>{clearTimeout(E),b.abort()};return T.addEventListener("abort",_,{once:!0}),m(v,ll(ll({},y),{},{signal:b.signal})).finally(()=>{clearTimeout(E),T.removeEventListener("abort",_)})}return m(v,ll(ll({},y),{},{signal:b.signal})).finally(()=>clearTimeout(E))}:this.fetch=m}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new dE(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new fg(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,s={},{head:l=!1,get:u=!1,count:d}={}){var f;let m;const v=new URL(`${this.url}/rpc/${n}`);let y;const b=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(b)),E=l&&Object.values(s).some(b);E?(m="POST",y=s):l||u?(m=l?"HEAD":"GET",Object.entries(s).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{v.searchParams.append(_,S)})):(m="POST",y=s);const T=new Headers(this.headers);return E?T.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&T.set("Prefer",`count=${d}`),new Ei({method:m,url:v,headers:T,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class vE{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const l=s.versions;if(l&&l.node){const u=l.node,d=parseInt(u.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const l=this.getWebSocketConstructor();return new l(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const gE="2.95.3",pE=`realtime-js/${gE}`,_E="1.0.0",hg="2.0.0",yv=hg,pc=1e4,bE=1e3,EE=100;var ta;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(ta||(ta={}));var tt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(tt||(tt={}));var sn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(sn||(sn={}));var _c;(function(i){i.websocket="websocket"})(_c||(_c={}));var xa;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(xa||(xa={}));class SE{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,s){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return s(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var s;return this._isArrayBuffer((s=n.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var s,l;const u=(l=(s=n.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(n){var s,l;const u=(l=(s=n.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,s,l){var u,d;const f=n.topic,m=(u=n.ref)!==null&&u!==void 0?u:"",v=(d=n.join_ref)!==null&&d!==void 0?d:"",y=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},E=Object.keys(b).length===0?"":JSON.stringify(b);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+m.length+f.length+y.length+E.length,_=new ArrayBuffer(this.HEADER_LENGTH+T);let S=new DataView(_),O=0;S.setUint8(O++,this.KINDS.userBroadcastPush),S.setUint8(O++,v.length),S.setUint8(O++,m.length),S.setUint8(O++,f.length),S.setUint8(O++,y.length),S.setUint8(O++,E.length),S.setUint8(O++,s),Array.from(v,M=>S.setUint8(O++,M.charCodeAt(0))),Array.from(m,M=>S.setUint8(O++,M.charCodeAt(0))),Array.from(f,M=>S.setUint8(O++,M.charCodeAt(0))),Array.from(y,M=>S.setUint8(O++,M.charCodeAt(0))),Array.from(E,M=>S.setUint8(O++,M.charCodeAt(0)));var N=new Uint8Array(_.byteLength+l.byteLength);return N.set(new Uint8Array(_),0),N.set(new Uint8Array(l),_.byteLength),N.buffer}decode(n,s){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return s(l)}if(typeof n=="string"){const l=JSON.parse(n),[u,d,f,m,v]=l;return s({join_ref:u,ref:d,topic:f,event:m,payload:v})}return s({})}_binaryDecode(n){const s=new DataView(n),l=s.getUint8(0),u=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,s,u)}}_decodeUserBroadcast(n,s,l){const u=s.getUint8(1),d=s.getUint8(2),f=s.getUint8(3),m=s.getUint8(4);let v=this.HEADER_LENGTH+4;const y=l.decode(n.slice(v,v+u));v=v+u;const b=l.decode(n.slice(v,v+d));v=v+d;const E=l.decode(n.slice(v,v+f));v=v+f;const T=n.slice(v,n.byteLength),_=m===this.JSON_ENCODING?JSON.parse(l.decode(T)):T,S={type:this.BROADCAST_EVENT,event:b,payload:_};return f>0&&(S.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(n){var s;return n instanceof ArrayBuffer||((s=n==null?void 0:n.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(n,s){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([l])=>s.includes(l)))}}class mg{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Le||(Le={}));const vv=(i,n,s={})=>{var l;const u=(l=s.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=wE(f,i,n,u),d),{}):{}},wE=(i,n,s,l)=>{const u=n.find(m=>m.name===i),d=u==null?void 0:u.type,f=s[i];return d&&!l.includes(d)?yg(d,f):bc(f)},yg=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return OE(n,s)}switch(i){case Le.bool:return TE(n);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return AE(n);case Le.json:case Le.jsonb:return xE(n);case Le.timestamp:return NE(n);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return bc(n);default:return bc(n)}},bc=i=>i,TE=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},AE=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},xE=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},OE=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,l=i[s];if(i[0]==="{"&&l==="}"){let d;const f=i.slice(1,s);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>yg(n,m))}return i},NE=i=>typeof i=="string"?i.replace(" ","T"):i,vg=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class tc{constructor(n,s,l={},u=pc){this.channel=n,this.event=s,this.payload=l,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var l;return this._hasReceived(n)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var gv;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(gv||(gv={}));class Rs{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rs.syncState(this.state,u,d,f),this.pendingDiffs.forEach(v=>{this.state=Rs.syncDiff(this.state,v,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Rs.syncDiff(this.state,u,d,f),m())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,l,u){const d=this.cloneDeep(n),f=this.transformState(s),m={},v={};return this.map(d,(y,b)=>{f[y]||(v[y]=b)}),this.map(f,(y,b)=>{const E=d[y];if(E){const T=b.map(N=>N.presence_ref),_=E.map(N=>N.presence_ref),S=b.filter(N=>_.indexOf(N.presence_ref)<0),O=E.filter(N=>T.indexOf(N.presence_ref)<0);S.length>0&&(m[y]=S),O.length>0&&(v[y]=O)}else m[y]=b}),this.syncDiff(d,{joins:m,leaves:v},l,u)}static syncDiff(n,s,l,u){const{joins:d,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),u||(u=()=>{}),this.map(d,(m,v)=>{var y;const b=(y=n[m])!==null&&y!==void 0?y:[];if(n[m]=this.cloneDeep(v),b.length>0){const E=n[m].map(_=>_.presence_ref),T=b.filter(_=>E.indexOf(_.presence_ref)<0);n[m].unshift(...T)}l(m,b,v)}),this.map(f,(m,v)=>{let y=n[m];if(!y)return;const b=v.map(E=>E.presence_ref);y=y.filter(E=>b.indexOf(E.presence_ref)<0),n[m]=y,u(m,y,v),y.length===0&&delete n[m]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(l=>s(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,l)=>{const u=n[l];return"metas"in u?s[l]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[l]=u,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pv;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(pv||(pv={}));var Cs;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Cs||(Cs={}));var Nn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Nn||(Nn={}));class Ai{constructor(n,s={config:{}},l){var u,d;if(this.topic=n,this.params=s,this.socket=l,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new tc(this,sn.join,this.params,this.timeout),this.rejoinTimer=new mg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sn.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Rs(this),this.broadcastEndpointURL=vg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var l,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==tt.closed){const{config:{broadcast:f,presence:m,private:v}}=this.params,y=(u=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(_=>_.filter))!==null&&u!==void 0?u:[],b=!!this.bindings[Cs.PRESENCE]&&this.bindings[Cs.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,E={},T={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:y,private:v};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(_=>n==null?void 0:n(Nn.CHANNEL_ERROR,_)),this._onClose(()=>n==null?void 0:n(Nn.CLOSED)),this.updateJoinPayload(Object.assign({config:T},E)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){n==null||n(Nn.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,N=(S=O==null?void 0:O.length)!==null&&S!==void 0?S:0,M=[];for(let G=0;G<N;G++){const H=O[G],{filter:{event:Y,schema:ce,table:ee,filter:V}}=H,Oe=_&&_[G];if(Oe&&Oe.event===Y&&Ai.isFilterValueEqual(Oe.schema,ce)&&Ai.isFilterValueEqual(Oe.table,ee)&&Ai.isFilterValueEqual(Oe.filter,V))M.push(Object.assign(Object.assign({},H),{id:Oe.id}));else{this.unsubscribe(),this.state=tt.errored,n==null||n(Nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,n&&n(Nn.SUBSCRIBED);return}}).receive("error",_=>{this.state=tt.errored,n==null||n(Nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,l){return this.state===tt.joined&&n===Cs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,s,l)}async httpSend(n,s,l={}){var u;if(s==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=l.timeout)!==null&&u!==void 0?u:this.timeout);if(m.status===202)return{success:!0};let v=m.statusText;try{const y=await m.json();v=y.error||y.message||v}catch{}return Promise.reject(new Error(v))}async send(n,s={}){var l,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,v;const y=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((v=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||v===void 0)&&v.ack)&&d("ok"),y.receive("ok",()=>d("ok")),y.receive("error",()=>d("error")),y.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=tt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(u=>{l=new tc(this,sn.leave,{},n),l.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tt.closed,this.bindings={}}async _fetchWithTimeout(n,s,l){const u=new AbortController,d=setTimeout(()=>u.abort(),l),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(d),f}_push(n,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new tc(this,n,s,l);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>EE){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,l){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,l){var u,d;const f=n.toLocaleLowerCase(),{close:m,error:v,leave:y,join:b}=sn;if(l&&[m,v,y,b].indexOf(f)>=0&&l!==this._joinRef())return;let T=this._onMessage(f,s,l);if(s&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(_=>{var S,O,N;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((N=(O=_.filter)===null||O===void 0?void 0:O.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===f}).map(_=>_.callback(T,l)):(d=this.bindings[f])===null||d===void 0||d.filter(_=>{var S,O,N,M,G,H;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const Y=_.id,ce=(S=_.filter)===null||S===void 0?void 0:S.event;return Y&&((O=s.ids)===null||O===void 0?void 0:O.includes(Y))&&(ce==="*"||(ce==null?void 0:ce.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const Y=(G=(M=_==null?void 0:_.filter)===null||M===void 0?void 0:M.event)===null||G===void 0?void 0:G.toLocaleLowerCase();return Y==="*"||Y===((H=s==null?void 0:s.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof T=="object"&&"ids"in T){const S=T.data,{schema:O,table:N,commit_timestamp:M,type:G,errors:H}=S;T=Object.assign(Object.assign({},{schema:O,table:N,commit_timestamp:M,eventType:G,new:{},old:{},errors:H}),this._getPayloadRecords(S))}_.callback(T,l)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,l){const u=n.toLocaleLowerCase(),d={type:u,filter:s,callback:l};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,s){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&Ai.isEqual(u.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const l in n)if(n[l]!==s[l])return!1;return!0}static isFilterValueEqual(n,s){return(n??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(sn.close,{},n)}_onError(n){this._on(sn.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=vv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=vv(n.columns,n.old_record)),s}}const nc=()=>{},ol={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RE=[1e3,2e3,5e3,1e4],CE=1e4,jE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DE{constructor(n,s){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pc,this.transport=null,this.heartbeatIntervalMs=ol.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nc,this.ref=0,this.reconnectTimer=null,this.vsn=yv,this.logger=nc,this.conn=null,this.sendBuffer=[],this.serializer=new SE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((l=s==null?void 0:s.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${_c.websocket}`,this.httpEndpoint=vg(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vE.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return s==="ok"&&this._remove(n),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,l){this.logger(n,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case ta.connecting:return xa.Connecting;case ta.open:return xa.Open;case ta.closing:return xa.Closing;default:return xa.Closed}}isConnected(){return this.connectionState()===xa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const l=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===l);if(u)return u;{const d=new Ai(`realtime:${n}`,s,this);return this.channels.push(d),d}}push(n){const{topic:s,event:l,payload:u,ref:d}=n,f=()=>{this.encode(n,m=>{var v;(v=this.conn)===null||v===void 0||v.send(m)})};this.log("push",`${s} ${l} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(bE,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},ol.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",y)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:u,payload:d,ref:f}=s,m=f?`(${f})`:"",v=d.status||"";this.log("receive",`${v} ${l} ${u} ${m}`.trim(),d),this.channels.filter(y=>y._isMember(l)).forEach(y=>y._trigger(u,d,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===ta.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ta.open||this.conn.readyState===ta.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(sn.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const l=n.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${n}${l}${u}`}_workerObjectUrl(n){let s;if(n)s=n;else{const l=new Blob([jE],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s,l=!1;if(n)s=n,l=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const d={access_token:s,version:pE};s&&u.updateJoinPayload(d),u.joinedOnce&&u._isJoined()&&u._push(sn.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(s)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new mg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ol.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,l,u,d,f,m,v,y,b,E,T,_;switch(this.transport=(s=n==null?void 0:n.transport)!==null&&s!==void 0?s:null,this.timeout=(l=n==null?void 0:n.timeout)!==null&&l!==void 0?l:pc,this.heartbeatIntervalMs=(u=n==null?void 0:n.heartbeatIntervalMs)!==null&&u!==void 0?u:ol.HEARTBEAT_INTERVAL,this.worker=(d=n==null?void 0:n.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n==null?void 0:n.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n==null?void 0:n.heartbeatCallback)!==null&&m!==void 0?m:nc,this.vsn=(v=n==null?void 0:n.vsn)!==null&&v!==void 0?v:yv,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n==null?void 0:n.reconnectAfterMs)!==null&&y!==void 0?y:(S=>RE[S-1]||CE),this.vsn){case _E:this.encode=(b=n==null?void 0:n.encode)!==null&&b!==void 0?b:((S,O)=>O(JSON.stringify(S))),this.decode=(E=n==null?void 0:n.decode)!==null&&E!==void 0?E:((S,O)=>O(JSON.parse(S)));break;case hg:this.encode=(T=n==null?void 0:n.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(_=n==null?void 0:n.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var Ds=class extends Error{constructor(i,n){var s;super(i),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((s=n.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function UE(i,n,s){const l=new URL(n,i);if(s)for(const[u,d]of Object.entries(s))d!==void 0&&l.searchParams.set(u,d);return l.toString()}async function IE(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function ME(i){const n=i.fetchImpl??globalThis.fetch;return{async request({method:s,path:l,query:u,body:d,headers:f}){const m=UE(i.baseUrl,l,u),v=await IE(i.auth),y=await n(m,{method:s,headers:{...d?{"Content-Type":"application/json"}:{},...v,...f},body:d?JSON.stringify(d):void 0}),b=await y.text(),E=(y.headers.get("content-type")||"").includes("application/json"),T=E&&b?JSON.parse(b):b;if(!y.ok){const _=E?T:void 0,S=_==null?void 0:_.error;throw new Ds((S==null?void 0:S.message)??`Request failed with status ${y.status}`,{status:y.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:_})}return{status:y.status,headers:y.headers,data:T}}}}function ul(i){return i.join("")}var LE=class{constructor(i,n=""){this.client=i,this.prefix=n}async listNamespaces(i){const n=i?{parent:ul(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(i,n){const s={namespace:i.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ul(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ul(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ul(i.namespace)}`}),!0}catch(n){if(n instanceof Ds&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(i,n){try{return await this.createNamespace(i,n)}catch(s){if(s instanceof Ds&&s.status===409)return;throw s}}};function mi(i){return i.join("")}var kE=class{constructor(i,n="",s){this.client=i,this.prefix=n,this.accessDelegation=s}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mi(i.namespace)}/tables`})).data.identifiers}async createTable(i,n){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mi(i.namespace)}/tables`,body:n,headers:s})).data.metadata}async updateTable(i,n){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mi(i.namespace)}/tables/${i.name}`,body:n});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(i,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${mi(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(i){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mi(i.namespace)}/tables/${i.name}`,headers:n})).data.metadata}async tableExists(i){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${mi(i.namespace)}/tables/${i.name}`,headers:n}),!0}catch(s){if(s instanceof Ds&&s.status===404)return!1;throw s}}async createTableIfNotExists(i,n){try{return await this.createTable(i,n)}catch(s){if(s instanceof Ds&&s.status===409)return await this.loadTable({namespace:i.namespace,name:n.name});throw s}}},zE=class{constructor(i){var l;let n="v1";i.catalogName&&(n+=`/${i.catalogName}`);const s=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=ME({baseUrl:s,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(l=i.accessDelegation)==null?void 0:l.join(","),this.namespaceOps=new LE(this.client,n),this.tableOps=new kE(this.client,n,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,n){return this.namespaceOps.createNamespace(i,n)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,n){return this.tableOps.createTable(i,n)}async updateTable(i,n){return this.tableOps.updateTable(i,n)}async dropTable(i,n){await this.tableOps.dropTable(i,n)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,n){return this.namespaceOps.createNamespaceIfNotExists(i,n)}async createTableIfNotExists(i,n){return this.tableOps.createTableIfNotExists(i,n)}},Al=class extends Error{constructor(i,n="storage",s,l){super(i),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=l}};function xl(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var cl=class extends Al{constructor(i,n,s,l="storage"){super(i,l,n,s),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},gg=class extends Al{constructor(i,n,s="storage"){super(i,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const BE=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),HE=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Ec=i=>{if(Array.isArray(i))return i.map(s=>Ec(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,l])=>{const u=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=Ec(l)}),n},GE=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function Us(i){"@babel/helpers - typeof";return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Us(i)}function qE(i,n){if(Us(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var l=s.call(i,n);if(Us(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function $E(i){var n=qE(i,"string");return Us(n)=="symbol"?n:n+""}function VE(i,n,s){return(n=$E(n))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}function _v(i,n){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),s.push.apply(s,l)}return s}function ie(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?_v(Object(s),!0).forEach(function(l){VE(i,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):_v(Object(s)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(s,l))})}return i}const bv=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},YE=async(i,n,s,l)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(s!=null&&s.noResolveJson)){const u=i,d=u.status||500;if(typeof u.json=="function")u.json().then(f=>{const m=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||d+"";n(new cl(bv(f),d,m,l))}).catch(()=>{if(l==="vectors"){const f=d+"";n(new cl(u.statusText||`HTTP ${d} error`,d,f,l))}else{const f=d+"";n(new cl(u.statusText||`HTTP ${d} error`,d,f,l))}});else{const f=d+"";n(new cl(u.statusText||`HTTP ${d} error`,d,f,l))}}else n(new gg(bv(i),i,l))},PE=(i,n,s,l)=>{const u={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"||i==="HEAD"||!l?ie(ie({},u),s):(HE(l)?(u.headers=ie({"Content-Type":"application/json"},n==null?void 0:n.headers),u.body=JSON.stringify(l)):u.body=l,n!=null&&n.duplex&&(u.duplex=n.duplex),ie(ie({},u),s))};async function Ts(i,n,s,l,u,d,f){return new Promise((m,v)=>{i(s,PE(n,l,u,d)).then(y=>{if(!y.ok)throw y;if(l!=null&&l.noResolveJson)return y;if(f==="vectors"){const b=y.headers.get("content-type");if(y.headers.get("content-length")==="0"||y.status===204)return{};if(!b||!b.includes("application/json"))return{}}return y.json()}).then(y=>m(y)).catch(y=>YE(y,v,l,f))})}function pg(i="storage"){return{get:async(n,s,l,u)=>Ts(n,"GET",s,l,u,void 0,i),post:async(n,s,l,u,d)=>Ts(n,"POST",s,u,d,l,i),put:async(n,s,l,u,d)=>Ts(n,"PUT",s,u,d,l,i),head:async(n,s,l,u)=>Ts(n,"HEAD",s,ie(ie({},l),{},{noResolveJson:!0}),u,void 0,i),remove:async(n,s,l,u,d)=>Ts(n,"DELETE",s,u,d,l,i)}}const KE=pg("storage"),{get:Is,post:an,put:Sc,head:JE,remove:zc}=KE,Ht=pg("vectors");var Ni=class{constructor(i,n={},s,l="storage"){this.shouldThrowOnError=!1,this.url=i,this.headers=n,this.fetch=BE(s),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(i){var n=this;try{return{data:await i(),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(xl(s))return{data:null,error:s};throw s}}},XE=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n}then(i,n){return this.execute().then(i,n)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(xl(n))return{data:null,error:n};throw n}}};let _g;_g=Symbol.toStringTag;var QE=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n,this[_g]="BlobDownloadBuilder",this.promise=null}asStream(){return new XE(this.downloadFn,this.shouldThrowOnError)}then(i,n){return this.getPromise().then(i,n)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(xl(n))return{data:null,error:n};throw n}}};const ZE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ev={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var FE=class extends Ni{constructor(i,n={},s,l){super(i,n,l,"storage"),this.bucketId=s}async uploadOrUpdate(i,n,s,l){var u=this;return u.handleOperation(async()=>{let d;const f=ie(ie({},Ev),l);let m=ie(ie({},u.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const v=f.metadata;typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),v&&d.append("metadata",u.encodeMetadata(v)),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),v&&!d.has("metadata")&&d.append("metadata",u.encodeMetadata(v))):(d=s,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,v&&(m["x-metadata"]=u.toBase64(u.encodeMetadata(v))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),l!=null&&l.headers&&(m=ie(ie({},m),l.headers));const y=u._removeEmptyFolders(n),b=u._getFinalPath(y),E=await(i=="PUT"?Sc:an)(u.fetch,`${u.url}/object/${b}`,d,ie({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{path:y,id:E.Id,fullPath:E.Key}})}async upload(i,n,s){return this.uploadOrUpdate("POST",i,n,s)}async uploadToSignedUrl(i,n,s,l){var u=this;const d=u._removeEmptyFolders(i),f=u._getFinalPath(d),m=new URL(u.url+`/object/upload/sign/${f}`);return m.searchParams.set("token",n),u.handleOperation(async()=>{let v;const y=ie({upsert:Ev.upsert},l),b=ie(ie({},u.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&s instanceof Blob?(v=new FormData,v.append("cacheControl",y.cacheControl),v.append("",s)):typeof FormData<"u"&&s instanceof FormData?(v=s,v.append("cacheControl",y.cacheControl)):(v=s,b["cache-control"]=`max-age=${y.cacheControl}`,b["content-type"]=y.contentType),{path:d,fullPath:(await Sc(u.fetch,m.toString(),v,{headers:b})).Key}})}async createSignedUploadUrl(i,n){var s=this;return s.handleOperation(async()=>{let l=s._getFinalPath(i);const u=ie({},s.headers);n!=null&&n.upsert&&(u["x-upsert"]="true");const d=await an(s.fetch,`${s.url}/object/upload/sign/${l}`,{},{headers:u}),f=new URL(s.url+d.url),m=f.searchParams.get("token");if(!m)throw new Al("No token returned by API");return{signedUrl:f.toString(),path:i,token:m}})}async update(i,n,s){return this.uploadOrUpdate("PUT",i,n,s)}async move(i,n,s){var l=this;return l.handleOperation(async()=>await an(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:i,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:l.headers}))}async copy(i,n,s){var l=this;return l.handleOperation(async()=>({path:(await an(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:i,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(i,n,s){var l=this;return l.handleOperation(async()=>{let u=l._getFinalPath(i),d=await an(l.fetch,`${l.url}/object/sign/${u}`,ie({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:l.headers});const f=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${l.url}${d.signedURL}${f}`)}})}async createSignedUrls(i,n,s){var l=this;return l.handleOperation(async()=>{const u=await an(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:n,paths:i},{headers:l.headers}),d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return u.map(f=>ie(ie({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${d}`):null}))})}download(i,n,s){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),d=u?`?${u}`:"",f=this._getFinalPath(i),m=()=>Is(this.fetch,`${this.url}/${l}/${f}${d}`,{headers:this.headers,noResolveJson:!0},s);return new QE(m,this.shouldThrowOnError)}async info(i){var n=this;const s=n._getFinalPath(i);return n.handleOperation(async()=>Ec(await Is(n.fetch,`${n.url}/object/info/${s}`,{headers:n.headers})))}async exists(i){var n=this;const s=n._getFinalPath(i);try{return await JE(n.fetch,`${n.url}/object/${s}`,{headers:n.headers}),{data:!0,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(xl(l)&&l instanceof gg){const u=l.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:l}}throw l}}getPublicUrl(i,n){const s=this._getFinalPath(i),l=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&l.push(f);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${m}`)}}}async remove(i){var n=this;return n.handleOperation(async()=>await zc(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:i},{headers:n.headers}))}async list(i,n,s){var l=this;return l.handleOperation(async()=>{const u=ie(ie(ie({},ZE),n),{},{prefix:i||""});return await an(l.fetch,`${l.url}/object/list/${l.bucketId}`,u,{headers:l.headers},s)})}async listV2(i,n){var s=this;return s.handleOperation(async()=>{const l=ie({},i);return await an(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,l,{headers:s.headers},n)})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const n=[];return i.width&&n.push(`width=${i.width}`),i.height&&n.push(`height=${i.height}`),i.resize&&n.push(`resize=${i.resize}`),i.format&&n.push(`format=${i.format}`),i.quality&&n.push(`quality=${i.quality}`),n.join("&")}};const WE="2.95.3",zs={"X-Client-Info":`storage-js/${WE}`};var eS=class extends Ni{constructor(i,n={},s,l){const u=new URL(i);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const d=u.href.replace(/\/$/,""),f=ie(ie({},zs),n);super(d,f,s,"storage")}async listBuckets(i){var n=this;return n.handleOperation(async()=>{const s=n.listBucketOptionsToQueryString(i);return await Is(n.fetch,`${n.url}/bucket${s}`,{headers:n.headers})})}async getBucket(i){var n=this;return n.handleOperation(async()=>await Is(n.fetch,`${n.url}/bucket/${i}`,{headers:n.headers}))}async createBucket(i,n={public:!1}){var s=this;return s.handleOperation(async()=>await an(s.fetch,`${s.url}/bucket`,{id:i,name:i,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:s.headers}))}async updateBucket(i,n){var s=this;return s.handleOperation(async()=>await Sc(s.fetch,`${s.url}/bucket/${i}`,{id:i,name:i,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(i){var n=this;return n.handleOperation(async()=>await an(n.fetch,`${n.url}/bucket/${i}/empty`,{},{headers:n.headers}))}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await zc(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(i){const n={};return i&&("limit"in i&&(n.limit=String(i.limit)),"offset"in i&&(n.offset=String(i.offset)),i.search&&(n.search=i.search),i.sortColumn&&(n.sortColumn=i.sortColumn),i.sortOrder&&(n.sortOrder=i.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},tS=class extends Ni{constructor(i,n={},s){const l=i.replace(/\/$/,""),u=ie(ie({},zs),n);super(l,u,s,"storage")}async createBucket(i){var n=this;return n.handleOperation(async()=>await an(n.fetch,`${n.url}/bucket`,{name:i},{headers:n.headers}))}async listBuckets(i){var n=this;return n.handleOperation(async()=>{const s=new URLSearchParams;(i==null?void 0:i.limit)!==void 0&&s.set("limit",i.limit.toString()),(i==null?void 0:i.offset)!==void 0&&s.set("offset",i.offset.toString()),i!=null&&i.sortColumn&&s.set("sortColumn",i.sortColumn),i!=null&&i.sortOrder&&s.set("sortOrder",i.sortOrder),i!=null&&i.search&&s.set("search",i.search);const l=s.toString(),u=l?`${n.url}/bucket?${l}`:`${n.url}/bucket`;return await Is(n.fetch,u,{headers:n.headers})})}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await zc(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}))}from(i){var n=this;if(!GE(i))throw new Al("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new zE({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(s,{get(u,d){const f=u[d];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(u,m),error:null}}catch(v){if(l)throw v;return{data:null,error:v}}}}})}},nS=class extends Ni{constructor(i,n={},s){const l=i.replace(/\/$/,""),u=ie(ie({},zs),{},{"Content-Type":"application/json"},n);super(l,u,s,"vectors")}async createIndex(i){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/CreateIndex`,i,{headers:n.headers})||{})}async getIndex(i,n){var s=this;return s.handleOperation(async()=>await Ht.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:i,indexName:n},{headers:s.headers}))}async listIndexes(i){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/ListIndexes`,i,{headers:n.headers}))}async deleteIndex(i,n){var s=this;return s.handleOperation(async()=>await Ht.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:i,indexName:n},{headers:s.headers})||{})}},aS=class extends Ni{constructor(i,n={},s){const l=i.replace(/\/$/,""),u=ie(ie({},zs),{},{"Content-Type":"application/json"},n);super(l,u,s,"vectors")}async putVectors(i){var n=this;if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/PutVectors`,i,{headers:n.headers})||{})}async getVectors(i){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/GetVectors`,i,{headers:n.headers}))}async listVectors(i){var n=this;if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/ListVectors`,i,{headers:n.headers}))}async queryVectors(i){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/QueryVectors`,i,{headers:n.headers}))}async deleteVectors(i){var n=this;if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/DeleteVectors`,i,{headers:n.headers})||{})}},iS=class extends Ni{constructor(i,n={},s){const l=i.replace(/\/$/,""),u=ie(ie({},zs),{},{"Content-Type":"application/json"},n);super(l,u,s,"vectors")}async createBucket(i){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{})}async getBucket(i){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:i},{headers:n.headers}))}async listBuckets(i={}){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/ListVectorBuckets`,i,{headers:n.headers}))}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await Ht.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{})}},sS=class extends iS{constructor(i,n={}){super(i,n.headers||{},n.fetch)}from(i){return new rS(this.url,this.headers,i,this.fetch)}async createBucket(i){var n=()=>super.createBucket,s=this;return n().call(s,i)}async getBucket(i){var n=()=>super.getBucket,s=this;return n().call(s,i)}async listBuckets(i={}){var n=()=>super.listBuckets,s=this;return n().call(s,i)}async deleteBucket(i){var n=()=>super.deleteBucket,s=this;return n().call(s,i)}},rS=class extends nS{constructor(i,n,s,l){super(i,n,l),this.vectorBucketName=s}async createIndex(i){var n=()=>super.createIndex,s=this;return n().call(s,ie(ie({},i),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(i={}){var n=()=>super.listIndexes,s=this;return n().call(s,ie(ie({},i),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(i){var n=()=>super.getIndex,s=this;return n().call(s,s.vectorBucketName,i)}async deleteIndex(i){var n=()=>super.deleteIndex,s=this;return n().call(s,s.vectorBucketName,i)}index(i){return new lS(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},lS=class extends aS{constructor(i,n,s,l,u){super(i,n,u),this.vectorBucketName=s,this.indexName=l}async putVectors(i){var n=()=>super.putVectors,s=this;return n().call(s,ie(ie({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(i){var n=()=>super.getVectors,s=this;return n().call(s,ie(ie({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(i={}){var n=()=>super.listVectors,s=this;return n().call(s,ie(ie({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(i){var n=()=>super.queryVectors,s=this;return n().call(s,ie(ie({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(i){var n=()=>super.deleteVectors,s=this;return n().call(s,ie(ie({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},oS=class extends eS{constructor(i,n={},s,l){super(i,n,s,l)}from(i){return new FE(this.url,this.headers,i,this.fetch)}get vectors(){return new sS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tS(this.url+"/iceberg",this.headers,this.fetch)}};const bg="2.95.3",Si=30*1e3,wc=3,ac=wc*Si,uS="http://localhost:9999",cS="supabase.auth.token",dS={"X-Client-Info":`gotrue-js/${bg}`},Tc="X-Supabase-Api-Version",Eg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hS=600*1e3;class Ms extends Error{constructor(n,s,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function Z(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class mS extends Ms{constructor(n,s,l){super(n,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function yS(i){return Z(i)&&i.name==="AuthApiError"}class Oa extends Ms{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class Rn extends Ms{constructor(n,s,l,u){super(n,l,u),this.name=s,this.status=l}}class Bt extends Rn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ic(i){return Z(i)&&i.name==="AuthSessionMissingError"}class yi extends Rn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dl extends Rn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class fl extends Rn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vS(i){return Z(i)&&i.name==="AuthImplicitGrantRedirectError"}class Sv extends Rn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gS extends Rn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ac extends Rn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function sc(i){return Z(i)&&i.name==="AuthRetryableFetchError"}class wv extends Rn{constructor(n,s,l){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class xc extends Rn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const gl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tv=` 	
\r=`.split(""),pS=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Tv.length;n+=1)i[Tv[n].charCodeAt(0)]=-2;for(let n=0;n<gl.length;n+=1)i[gl[n].charCodeAt(0)]=n;return i})();function Av(i,n,s){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;s(gl[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;s(gl[l]),n.queuedBits-=6}}function Sg(i,n,s){const l=pS[i];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function xv(i){const n=[],s=f=>{n.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{ES(f,l,s)};for(let f=0;f<i.length;f+=1)Sg(i.charCodeAt(f),u,d);return n.join("")}function _S(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function bS(i,n){for(let s=0;s<i.length;s+=1){let l=i.charCodeAt(s);if(l>55295&&l<=56319){const u=(l-55296)*1024&65535;l=(i.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}_S(l,n)}}function ES(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let l=1;l<6;l+=1)if((i>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function Oi(i){const n=[],s={queue:0,queuedBits:0},l=u=>{n.push(u)};for(let u=0;u<i.length;u+=1)Sg(i.charCodeAt(u),s,l);return new Uint8Array(n)}function SS(i){const n=[];return bS(i,s=>n.push(s)),new Uint8Array(n)}function Ra(i){const n=[],s={queue:0,queuedBits:0},l=u=>{n.push(u)};return i.forEach(u=>Av(u,s,l)),Av(null,s,l),n.join("")}function wS(i){return Math.round(Date.now()/1e3)+i}function TS(){return Symbol("auth-callback")}const ht=()=>typeof window<"u"&&typeof document<"u",Sa={tested:!1,writable:!1},wg=()=>{if(!ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sa.tested)return Sa.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Sa.tested=!0,Sa.writable=!0}catch{Sa.tested=!0,Sa.writable=!1}return Sa.writable};function AS(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return s.searchParams.forEach((l,u)=>{n[u]=l}),n}const Tg=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),xS=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",wi=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},wa=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},dt=async(i,n)=>{await i.removeItem(n)};class Ol{constructor(){this.promise=new Ol.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Ol.promiseConstructor=Promise;function hl(i){const n=i.split(".");if(n.length!==3)throw new xc("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!fS.test(n[l]))throw new xc("JWT not in base64url format");return{header:JSON.parse(xv(n[0])),payload:JSON.parse(xv(n[1])),signature:Oi(n[2]),raw:{header:n[0],payload:n[1]}}}async function OS(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function NS(i,n){return new Promise((l,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await i(d);if(!n(d,null,f)){l(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function RS(i){return("0"+i.toString(16)).substr(-2)}function CS(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let u="";for(let d=0;d<56;d++)u+=s.charAt(Math.floor(Math.random()*l));return u}return crypto.getRandomValues(n),Array.from(n,RS).join("")}async function jS(i){const s=new TextEncoder().encode(i),l=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(l);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function DS(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await jS(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vi(i,n,s=!1){const l=CS();let u=l;s&&(u+="/PASSWORD_RECOVERY"),await wi(i,`${n}-code-verifier`,u);const d=await DS(l);return[d,l===d?"plain":"s256"]}const US=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function IS(i){const n=i.headers.get(Tc);if(!n||!n.match(US))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function MS(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function LS(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gi(i){if(!kS.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rc(){const i={};return new Proxy(i,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zS(i,n){return new Proxy(i,{get:(s,l,u)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,l,u)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(s,l,u)}})}function Ov(i){return JSON.parse(JSON.stringify(i))}const Aa=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),BS=[502,503,504];async function Nv(i){var n;if(!xS(i))throw new Ac(Aa(i),0);if(BS.includes(i.status))throw new Ac(Aa(i),i.status);let s;try{s=await i.json()}catch(d){throw new Oa(Aa(d),d)}let l;const u=IS(i);if(u&&u.getTime()>=Eg["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new wv(Aa(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new Bt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new wv(Aa(s),i.status,s.weak_password.reasons);throw new mS(Aa(s),i.status||500,l)}const HS=(i,n,s,l)=>{const u={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),u.body=JSON.stringify(l),Object.assign(Object.assign({},u),s))};async function ae(i,n,s,l){var u;const d=Object.assign({},l==null?void 0:l.headers);d[Tc]||(d[Tc]=Eg["2024-01-01"].name),l!=null&&l.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const f=(u=l==null?void 0:l.query)!==null&&u!==void 0?u:{};l!=null&&l.redirectTo&&(f.redirect_to=l.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",v=await GS(i,n,s+m,{headers:d,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(v):{data:Object.assign({},v),error:null}}async function GS(i,n,s,l,u,d){const f=HS(n,l,u,d);let m;try{m=await i(s,Object.assign({},f))}catch(v){throw console.error(v),new Ac(Aa(v),0)}if(m.ok||await Nv(m),l!=null&&l.noResolveJson)return m;try{return await m.json()}catch(v){await Nv(v)}}function nn(i){var n;let s=null;VS(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=wS(i.expires_in)));const l=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:l},error:null}}function Rv(i){const n=nn(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(n.data.weak_password=i.weak_password),n}function na(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function qS(i){return{data:i,error:null}}function $S(i){const{action_link:n,email_otp:s,hashed_token:l,redirect_to:u,verification_type:d}=i,f=Tl(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:s,hashed_token:l,redirect_to:u,verification_type:d},v=Object.assign({},f);return{data:{properties:m,user:v},error:null}}function Cv(i){return i}function VS(i){return i.access_token&&i.refresh_token&&i.expires_in}const lc=["global","local","others"];class YS{constructor({url:n="",headers:s={},fetch:l}){this.url=n,this.headers=s,this.fetch=Tg(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=lc[0]){if(lc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lc.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Z(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,s={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:na})}catch(l){if(Z(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:s}=n,l=Tl(n,["options"]),u=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(u.new_email=l==null?void 0:l.newEmail,delete u.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:$S,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Z(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:na})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,l,u,d,f,m,v;try{const y={nextPage:null,lastPage:0,total:0},b=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(d=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Cv});if(b.error)throw b.error;const E=await b.json(),T=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(v=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&v!==void 0?v:[];return _.length>0&&(_.forEach(S=>{const O=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(S.split(";")[1].split("=")[1]);y[`${N}Page`]=O}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},E),y),error:null}}catch(y){if(Z(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){gi(n);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:na})}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){gi(n);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:na})}catch(l){if(Z(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,s=!1){gi(n);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:na})}catch(l){if(Z(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){gi(n.userId);try{const{data:s,error:l}=await ae(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:l}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _deleteFactor(n){gi(n.userId),gi(n.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,l,u,d,f,m,v;try{const y={nextPage:null,lastPage:0,total:0},b=await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(d=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Cv});if(b.error)throw b.error;const E=await b.json(),T=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(v=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&v!==void 0?v:[];return _.length>0&&(_.forEach(S=>{const O=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(S.split(";")[1].split("=")[1]);y[`${N}Page`]=O}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},E),y),error:null}}catch(y){if(Z(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _updateOAuthClient(n,s){try{return await ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Z(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Z(s))return{data:null,error:s};throw s}}}function jv(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}const pi={debug:!!(globalThis&&wg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ag extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class PS extends Ag{}async function KS(i,n,s){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async u=>{if(u){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,u.name);try{return await s()}finally{pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,u.name)}}else{if(n===0)throw pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new PS(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(pi.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function JS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xg(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function XS(i){return parseInt(i,16)}function QS(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function ZS(i){var n;const{chainId:s,domain:l,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:v,resources:y,scheme:b,uri:E,version:T}=i;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const _=xg(i.address),S=b?`${b}://${l}`:l,O=i.statement?`${i.statement}
`:"",N=`${S} wants you to sign in with your Ethereum account:
${_}

${O}`;let M=`URI: ${E}
Version: ${T}
Chain ID: ${s}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(M+=`
Expiration Time: ${u.toISOString()}`),m&&(M+=`
Not Before: ${m.toISOString()}`),v&&(M+=`
Request ID: ${v}`),y){let G=`
Resources:`;for(const H of y){if(!H||typeof H!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${H}`);G+=`
- ${H}`}M+=G}return`${N}
${M}`}class Fe extends Error{constructor({message:n,code:s,cause:l,name:u}){var d;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(d=u??(l instanceof Error?l.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=s}}class pl extends Fe{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function FS({error:i,options:n}){var s,l,u;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Fe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((s=d.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Fe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Fe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Fe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Fe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Fe({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Fe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Fe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const f=window.location.hostname;if(Og(f)){if(d.rp.id!==f)return new Fe({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Fe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Fe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function WS({error:i,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Fe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Fe({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const l=window.location.hostname;if(Og(l)){if(s.rpId!==l)return new Fe({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Fe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class ew{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const tw=new ew;function nw(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:s,excludeCredentials:l}=i,u=Tl(i,["challenge","user","excludeCredentials"]),d=Oi(n).buffer,f=Object.assign(Object.assign({},s),{id:Oi(s.id).buffer}),m=Object.assign(Object.assign({},u),{challenge:d,user:f});if(l&&l.length>0){m.excludeCredentials=new Array(l.length);for(let v=0;v<l.length;v++){const y=l[v];m.excludeCredentials[v]=Object.assign(Object.assign({},y),{id:Oi(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function aw(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:s}=i,l=Tl(i,["challenge","allowCredentials"]),u=Oi(n).buffer,d=Object.assign(Object.assign({},l),{challenge:u});if(s&&s.length>0){d.allowCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const m=s[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:Oi(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function iw(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i;return{id:i.id,rawId:i.id,response:{attestationObject:Ra(new Uint8Array(i.response.attestationObject)),clientDataJSON:Ra(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function sw(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i,l=i.getClientExtensionResults(),u=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Ra(new Uint8Array(u.authenticatorData)),clientDataJSON:Ra(new Uint8Array(u.clientDataJSON)),signature:Ra(new Uint8Array(u.signature)),userHandle:u.userHandle?Ra(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Og(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Dv(){var i,n;return!!(ht()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function rw(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new pl("Browser returned unexpected credential type",n)}:{data:null,error:new pl("Empty credential response",n)}}catch(n){return{data:null,error:FS({error:n,options:i})}}}async function lw(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new pl("Browser returned unexpected credential type",n)}:{data:null,error:new pl("Empty credential response",n)}}catch(n){return{data:null,error:WS({error:n,options:i})}}}const ow={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},uw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function _l(...i){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),l={};for(const u of i)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))l[d]=f;else if(s(f))l[d]=f;else if(n(f)){const m=l[d];n(m)?l[d]=_l(m,f):l[d]=_l(f)}else l[d]=f}return l}function cw(i,n){return _l(ow,i,n||{})}function dw(i,n){return _l(uw,i,n||{})}class fw{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:l,signal:u},d){var f;try{const{data:m,error:v}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!m)return{data:null,error:v};const y=u??tw.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:b}=m.webauthn.credential_options.publicKey;if(!b.name){const E=l;if(E)b.name=`${b.id}:${E}`;else{const _=(await this.client.getUser()).data.user,S=((f=_==null?void 0:_.user_metadata)===null||f===void 0?void 0:f.name)||(_==null?void 0:_.email)||(_==null?void 0:_.id)||"User";b.name=`${b.id}:${S}`}}b.displayName||(b.displayName=b.name)}switch(m.webauthn.type){case"create":{const b=cw(m.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:E,error:T}=await rw({publicKey:b,signal:y});return E?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:E}},error:null}:{data:null,error:T}}case"request":{const b=dw(m.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:E,error:T}=await lw(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:b,signal:y}));return E?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:E}},error:null}:{data:null,error:T}}}}catch(m){return Z(m)?{data:null,error:m}:{data:null,error:new Oa("Unexpected error in challenge",m)}}}async _verify({challengeId:n,factorId:s,webauthn:l}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!s)return{data:null,error:new Ms("rpId is required for WebAuthn authentication")};try{if(!Dv())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:l},signal:u},{request:d});if(!f)return{data:null,error:m};const{webauthn:v}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:v.type,rpId:s,rpOrigins:l,credential_response:v.credential_response}})}catch(f){return Z(f)?{data:null,error:f}:{data:null,error:new Oa("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!s)return{data:null,error:new Ms("rpId is required for WebAuthn registration")};try{if(!Dv())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var E;return(E=b.data)===null||E===void 0?void 0:E.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===n&&T.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:v,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:s,rpOrigins:l},signal:u},{create:d});return v?this._verify({factorId:f.id,challengeId:v.challengeId,webauthn:{rpId:s,rpOrigins:l,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:y}}catch(f){return Z(f)?{data:null,error:f}:{data:null,error:new Oa("Unexpected error in register",f)}}}}JS();const hw={url:uS,storageKey:cS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Uv(i,n,s){return await s()}const _i={};class Ls{get jwks(){var n,s;return(s=(n=_i[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){_i[this.storageKey]=Object.assign(Object.assign({},_i[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=_i[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){_i[this.storageKey]=Object.assign(Object.assign({},_i[this.storageKey]),{cachedAt:n})}constructor(n){var s,l,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},hw),n);if(this.storageKey=d.storageKey,this.instanceID=(s=Ls.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Ls.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&ht()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new YS({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Tg(d.fetch),this.lock=d.lock||Uv,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&ht()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=KS:this.lock=Uv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:wg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jv(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=jv(this.memoryStorage)),ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(m){this._debug("#broadcastChannel","error",m)}})}this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${bg}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let s={},l="none";if(ht()&&(s=AS(window.location.href),this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce")),ht()&&this.detectSessionInUrl&&l!=="none"){const{data:u,error:d}=await this._getSessionFromURL(s,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),vS(d)){const v=(n=d.details)===null||n===void 0?void 0:n.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:f,redirectType:m}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Z(s)?this._returnResult({error:s}):this._returnResult({error:new Oa("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,l,u;try{const d=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(u=n==null?void 0:n.options)===null||u===void 0?void 0:u.captchaToken}},xform:nn}),{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const v=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(d){if(Z(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(n){var s,l,u;try{let d;if("email"in n){const{email:b,password:E,options:T}=n;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await vi(this.storage,this.storageKey)),d=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:b,password:E,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:_,code_challenge_method:S},xform:nn})}else if("phone"in n){const{phone:b,password:E,options:T}=n;d=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:E,data:(l=T==null?void 0:T.data)!==null&&l!==void 0?l:{},channel:(u=T==null?void 0:T.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:nn})}else throw new dl("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return await dt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const v=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),Z(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(n){try{let s;if("email"in n){const{email:d,password:f,options:m}=n;s=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Rv})}else if("phone"in n){const{phone:d,password:f,options:m}=n;s=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Rv})}else throw new dl("You must provide either an email or phone number and a password");const{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new yi;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:u})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(n){var s,l,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,l,u,d,f,m,v,y,b,E,T;let _,S;if("message"in n)_=n.message,S=n.signature;else{const{chain:O,wallet:N,statement:M,options:G}=n;let H;if(ht())if(typeof N=="object")H=N;else{const Se=window;if("ethereum"in Se&&typeof Se.ethereum=="object"&&"request"in Se.ethereum&&typeof Se.ethereum.request=="function")H=Se.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=N}const Y=new URL((s=G==null?void 0:G.url)!==null&&s!==void 0?s:window.location.href),ce=await H.request({method:"eth_requestAccounts"}).then(Se=>Se).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ce||ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ee=xg(ce[0]);let V=(l=G==null?void 0:G.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!V){const Se=await H.request({method:"eth_chainId"});V=XS(Se)}const Oe={domain:Y.host,address:ee,statement:M,uri:Y.href,version:"1",chainId:V,nonce:(u=G==null?void 0:G.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=G==null?void 0:G.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=G==null?void 0:G.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(v=G==null?void 0:G.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(y=G==null?void 0:G.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(b=G==null?void 0:G.signInWithEthereum)===null||b===void 0?void 0:b.resources};_=ZS(Oe),S=await H.request({method:"personal_sign",params:[QS(_),ee]})}try{const{data:O,error:N}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:S},!((E=n.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(T=n.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:nn});if(N)throw N;if(!O||!O.session||!O.user){const M=new yi;return this._returnResult({data:{user:null,session:null},error:M})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:N})}catch(O){if(Z(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(n){var s,l,u,d,f,m,v,y,b,E,T,_;let S,O;if("message"in n)S=n.message,O=n.signature;else{const{chain:N,wallet:M,statement:G,options:H}=n;let Y;if(ht())if(typeof M=="object")Y=M;else{const ee=window;if("solana"in ee&&typeof ee.solana=="object"&&("signIn"in ee.solana&&typeof ee.solana.signIn=="function"||"signMessage"in ee.solana&&typeof ee.solana.signMessage=="function"))Y=ee.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=M}const ce=new URL((s=H==null?void 0:H.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in Y&&Y.signIn){const ee=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H==null?void 0:H.signInWithSolana),{version:"1",domain:ce.host,uri:ce.href}),G?{statement:G}:null));let V;if(Array.isArray(ee)&&ee[0]&&typeof ee[0]=="object")V=ee[0];else if(ee&&typeof ee=="object"&&"signedMessage"in ee&&"signature"in ee)V=ee;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)S=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),O=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${ce.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...G?["",G,""]:[""],"Version: 1",`URI: ${ce.href}`,`Issued At: ${(u=(l=H==null?void 0:H.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=H==null?void 0:H.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((f=H==null?void 0:H.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((m=H==null?void 0:H.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((v=H==null?void 0:H.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((y=H==null?void 0:H.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((E=(b=H==null?void 0:H.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||E===void 0)&&E.length?["Resources",...H.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const ee=await Y.signMessage(new TextEncoder().encode(S),"utf8");if(!ee||!(ee instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=ee}}try{const{data:N,error:M}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Ra(O)},!((T=n.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:nn});if(M)throw M;if(!N||!N.session||!N.user){const G=new yi;return this._returnResult({data:{user:null,session:null},error:G})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:M})}catch(N){if(Z(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(n){const s=await wa(this.storage,`${this.storageKey}-code-verifier`),[l,u]=(s??"").split("/");try{if(!l&&this.flowType==="pkce")throw new gS;const{data:d,error:f}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:nn});if(await dt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const m=new yi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),Z(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(n){try{const{options:s,provider:l,token:u,access_token:d,nonce:f}=n,m=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:nn}),{data:v,error:y}=m;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!v||!v.session||!v.user){const b=new yi;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:y})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(n){var s,l,u,d,f;try{if("email"in n){const{email:m,options:v}=n;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await vi(this.storage,this.storageKey));const{error:E}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=v==null?void 0:v.data)!==null&&s!==void 0?s:{},create_user:(l=v==null?void 0:v.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:b},redirectTo:v==null?void 0:v.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in n){const{phone:m,options:v}=n,{data:y,error:b}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(u=v==null?void 0:v.data)!==null&&u!==void 0?u:{},create_user:(d=v==null?void 0:v.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},channel:(f=v==null?void 0:v.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:b})}throw new dl("You must provide either an email or phone number.")}catch(m){if(await dt(this.storage,`${this.storageKey}-code-verifier`),Z(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(n){var s,l;try{let u,d;"options"in n&&(u=(s=n.options)===null||s===void 0?void 0:s.redirectTo,d=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:m}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:nn});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const v=f.session,y=f.user;return v!=null&&v.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(u){if(Z(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(n){var s,l,u,d,f;try{let m=null,v=null;this.flowType==="pkce"&&([m,v]=await vi(this.storage,this.storageKey));const y=await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((u=n==null?void 0:n.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:v}),headers:this.headers,xform:qS});return!((d=y.data)===null||d===void 0)&&d.url&&ht()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(m){if(await dt(this.storage,`${this.storageKey}-code-verifier`),Z(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:l}=n;if(l)throw l;if(!s)throw new Bt;const{error:u}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:l,type:u,options:d}=n,{error:f}=await ae(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:l,type:u,options:d}=n,{data:f,error:m}=await ae(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new dl("You must provide either an email or phone number and a type")}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await wa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<ac:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const f=await wa(this.userStorage,this.storageKey+"-user");f!=null&&f.user?n.user=f.user:n.user=rc()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=zS(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(n){try{return n?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:na}):await this._useSession(async s=>{var l,u,d;const{data:f,error:m}=s;if(m)throw m;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bt}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:na})})}catch(s){if(Z(s))return ic(s)&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async l=>{const{data:u,error:d}=l;if(d)throw d;if(!u.session)throw new Bt;const f=u.session;let m=null,v=null;this.flowType==="pkce"&&n.email!=null&&([m,v]=await vi(this.storage,this.storageKey));const{data:y,error:b}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:v}),jwt:f.access_token,xform:na});if(b)throw b;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await dt(this.storage,`${this.storageKey}-code-verifier`),Z(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Bt;const s=Date.now()/1e3;let l=s,u=!0,d=null;const{payload:f}=hl(n.access_token);if(f.exp&&(l=f.exp,u=l<=s),u){const{data:m,error:v}=await this._callRefreshToken(n.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:v}=await this._getUser(n.access_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});d={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(s){if(Z(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var l;if(!n){const{data:f,error:m}=s;if(m)throw m;n=(l=f.session)!==null&&l!==void 0?l:void 0}if(!(n!=null&&n.refresh_token))throw new Bt;const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(n,s){try{if(!ht())throw new fl("No browser detected.");if(n.error||n.error_description||n.error_code)throw new fl(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Sv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fl("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Sv("No code detected.");const{data:G,error:H}=await this._exchangeCodeForSession(n.code);if(H)throw H;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:G.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:m,expires_at:v,token_type:y}=n;if(!d||!m||!f||!y)throw new fl("No session defined in URL");const b=Math.round(Date.now()/1e3),E=parseInt(m);let T=b+E;v&&(T=parseInt(v));const _=T-b;_*1e3<=Si&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${E}s`);const S=T-E;b-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,T,b):b-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,T,b);const{data:O,error:N}=await this._getUser(d);if(N)throw N;const M={provider_token:l,provider_refresh_token:u,access_token:d,expires_in:E,expires_at:T,refresh_token:f,token_type:y,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:n.type},error:null})}catch(l){if(Z(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await wa(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:u,error:d}=s;if(d&&!ic(d))return this._returnResult({error:d});const f=(l=u.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(yS(m)&&(m.status===404||m.status===401||m.status===403)||ic(m)))return this._returnResult({error:m})}return n!=="others"&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const s=TS(),l={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async s=>{var l,u;try{const{data:{session:d},error:f}=s;if(f)throw f;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,s={}){let l=null,u=null;this.flowType==="pkce"&&([l,u]=await vi(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),Z(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var n;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:l,error:u}=await this._useSession(async d=>{var f,m,v,y,b;const{data:E,error:T}=d;if(T)throw T;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(v=n.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",_,{headers:this.headers,jwt:(b=(y=E.session)===null||y===void 0?void 0:y.access_token)!==null&&b!==void 0?b:void 0})});if(u)throw u;return ht()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),this._returnResult({data:{provider:n.provider,url:l==null?void 0:l.url},error:null})}catch(l){if(Z(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var l;try{const{error:u,data:{session:d}}=s;if(u)throw u;const{options:f,provider:m,token:v,access_token:y,nonce:b}=n,E=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=d==null?void 0:d.access_token)!==null&&l!==void 0?l:void 0,body:{provider:m,id_token:v,access_token:y,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:nn}),{data:T,error:_}=E;return _?this._returnResult({data:{user:null,session:null},error:_}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new yi}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:_}))}catch(u){if(await dt(this.storage,`${this.storageKey}-code-verifier`),Z(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var l,u;const{data:d,error:f}=s;if(f)throw f;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await NS(async u=>(u>0&&await OS(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:nn})),(u,d)=>{const f=200*Math.pow(2,u);return d&&sc(d)&&Date.now()+f-l<Si})}catch(l){if(this._debug(s,"error",l),Z(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",l),ht()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,s;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const u=await wa(this.storage,this.storageKey);if(u&&this.userStorage){let f=await wa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await wi(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f==null?void 0:f.user)!==null&&n!==void 0?n:rc()}else if(u&&!u.user&&!u.user){const f=await wa(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(u.user=f.user,await dt(this.storage,this.storageKey+"-user"),await wi(this.storage,this.storageKey,u)):u.user=rc()}if(this._debug(l,"session from storage",u),!this._isValidSession(u)){this._debug(l,"session is not valid"),u!==null&&await this._removeSession();return}const d=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<ac;if(this._debug(l,`session has${d?"":" not"} expired with margin of ${ac}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),sc(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(u.access_token);!m&&(f!=null&&f.user)?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(l,"error",u),console.error(u);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var s,l;if(!n)throw new Bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Ol;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new Bt;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(u,"error",d),Z(d)){const f={data:null,error:d};return sc(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,s,l=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:s});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,s)}catch(v){d.push(v)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await dt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},n),l=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&s.user&&await wi(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const d=Ov(u);await wi(this.storage,this.storageKey,d)}else{const u=Ov(s);await wi(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await dt(this.storage,this.storageKey),await dt(this.storage,this.storageKey+"-code-verifier"),await dt(this.storage,this.storageKey+"-user"),this.userStorage&&await dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Si);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((l.expires_at*1e3-n)/Si);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Si}ms, refresh threshold is ${wc} ticks`),u<=wc&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Ag)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,l){const u=[`provider=${encodeURIComponent(s)}`];if(l!=null&&l.redirectTo&&u.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&u.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,f]=await vi(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(m.toString())}if(l!=null&&l.queryParams){const d=new URLSearchParams(l.queryParams);u.push(d.toString())}return l!=null&&l.skipBrowserRedirect&&u.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var l;const{data:u,error:d}=s;return d?this._returnResult({data:null,error:d}):await ae(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(n){try{return await this._useSession(async s=>{var l,u;const{data:d,error:f}=s;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:v,error:y}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token});return y?this._returnResult({data:null,error:y}):(n.factorType==="totp"&&v.type==="totp"&&(!((u=v==null?void 0:v.totp)===null||u===void 0)&&u.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var l;const{data:u,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?iw(n.webauthn.credential_response):sw(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:v}=await ae(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:v}))})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var l;const{data:u,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=await ae(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:nw(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:aw(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(n){const{data:s,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:l}=await this.getUser();if(l)return{data:null,error:l};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=s==null?void 0:s.factors)!==null&&n!==void 0?n:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(n){var s,l,u,d;if(n)try{const{payload:_}=hl(n);let S=null;_.aal&&(S=_.aal);let O=S;const{data:{user:N},error:M}=await this.getUser(n);if(M)return this._returnResult({data:null,error:M});((l=(s=N==null?void 0:N.factors)===null||s===void 0?void 0:s.filter(Y=>Y.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(O="aal2");const H=_.amr||[];return{data:{currentLevel:S,nextLevel:O,currentAuthenticationMethods:H},error:null}}catch(_){if(Z(_))return this._returnResult({data:null,error:_});throw _}const{data:{session:f},error:m}=await this.getSession();if(m)return this._returnResult({data:null,error:m});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:v}=hl(f.access_token);let y=null;v.aal&&(y=v.aal);let b=y;((d=(u=f.user.factors)===null||u===void 0?void 0:u.filter(_=>_.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(b="aal2");const T=v.amr||[];return{data:{currentLevel:y,nextLevel:b,currentAuthenticationMethods:T},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async s=>{const{data:{session:l},error:u}=s;return u?this._returnResult({data:null,error:u}):l?await ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Bt})})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(n,s){try{return await this._useSession(async l=>{const{data:{session:u},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Bt});const f=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&ht()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(Z(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,s){try{return await this._useSession(async l=>{const{data:{session:u},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Bt});const f=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&ht()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(Z(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:s},error:l}=n;return l?this._returnResult({data:null,error:l}):s?await ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Bt})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async s=>{const{data:{session:l},error:u}=s;return u?this._returnResult({data:null,error:u}):l?(await ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Bt})})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(n,s={keys:[]}){let l=s.keys.find(m=>m.kid===n);if(l)return l;const u=Date.now();if(l=this.jwks.keys.find(m=>m.kid===n),l&&this.jwks_cached_at+hS>u)return l;const{data:d,error:f}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,l=d.keys.find(m=>m.kid===n),!l)?null:l}async getClaims(n,s={}){try{let l=n;if(!l){const{data:_,error:S}=await this.getSession();if(S||!_.session)return this._returnResult({data:null,error:S});l=_.session.access_token}const{header:u,payload:d,signature:f,raw:{header:m,payload:v}}=hl(l);s!=null&&s.allowExpired||MS(d.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!y){const{error:_}=await this.getUser(l);if(_)throw _;return{data:{claims:d,header:u,signature:f},error:null}}const b=LS(u.alg),E=await crypto.subtle.importKey("jwk",y,b,!0,["verify"]);if(!await crypto.subtle.verify(b,E,f,SS(`${m}.${v}`)))throw new xc("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(l){if(Z(l))return this._returnResult({data:null,error:l});throw l}}}Ls.nextInstanceID={};const mw=Ls,yw="2.95.3";let xs="";typeof Deno<"u"?xs="deno":typeof document<"u"?xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xs="react-native":xs="node";const vw={"X-Client-Info":`supabase-js-${xs}/${yw}`},gw={headers:vw},pw={schema:"public"},_w={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bw={};function ks(i){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ks(i)}function Ew(i,n){if(ks(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var l=s.call(i,n);if(ks(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Sw(i){var n=Ew(i,"string");return ks(n)=="symbol"?n:n+""}function ww(i,n,s){return(n=Sw(n))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}function Iv(i,n){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),s.push.apply(s,l)}return s}function Ye(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Iv(Object(s),!0).forEach(function(l){ww(i,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):Iv(Object(s)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(s,l))})}return i}const Tw=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Aw=()=>Headers,xw=(i,n,s)=>{const l=Tw(s),u=Aw();return async(d,f)=>{var m;const v=(m=await n())!==null&&m!==void 0?m:i;let y=new u(f==null?void 0:f.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${v}`),l(d,Ye(Ye({},f),{},{headers:y}))}};function Ow(i){return i.endsWith("/")?i:i+"/"}function Nw(i,n){var s,l;const{db:u,auth:d,realtime:f,global:m}=i,{db:v,auth:y,realtime:b,global:E}=n,T={db:Ye(Ye({},v),u),auth:Ye(Ye({},y),d),realtime:Ye(Ye({},b),f),storage:{},global:Ye(Ye(Ye({},E),m),{},{headers:Ye(Ye({},(s=E==null?void 0:E.headers)!==null&&s!==void 0?s:{}),(l=m==null?void 0:m.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return i.accessToken?T.accessToken=i.accessToken:delete T.accessToken,T}function Rw(i){const n=i==null?void 0:i.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ow(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Cw=class extends mw{constructor(i){super(i)}},jw=class{constructor(i,n,s){var l,u;this.supabaseUrl=i,this.supabaseKey=n;const d=Rw(i);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:pw,realtime:bw,auth:Ye(Ye({},_w),{},{storageKey:f}),global:gw},v=Nw(s??{},m);if(this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=v.auth)!==null&&y!==void 0?y:{},this.headers,v.global.fetch)}this.fetch=xw(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Ye({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new yE(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch,timeout:v.db.timeout,urlLengthLimit:v.db.urlLengthLimit}),this.storage=new oS(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new lE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,n,s)}channel(i,n={config:{}}){return this.realtime.channel(i,n)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,n,s;if(i.accessToken)return await i.accessToken();const{data:l}=await i.auth.getSession();return(n=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:n,detectSessionInUrl:s,storage:l,userStorage:u,storageKey:d,flowType:f,lock:m,debug:v,throwOnError:y},b,E){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cw({url:this.authUrl.href,headers:Ye(Ye({},T),b),storageKey:d,autoRefreshToken:i,persistSession:n,detectSessionInUrl:s,storage:l,userStorage:u,flowType:f,lock:m,debug:v,throwOnError:y,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new DE(this.realtimeUrl.href,Ye(Ye({},i),{},{params:Ye(Ye({},{apikey:this.supabaseKey}),i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,n)=>{this._handleTokenChanged(i,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(i,n,s){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Dw=(i,n,s)=>new jw(i,n,s);function Uw(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const n=i.version;if(n==null)return!1;const s=n.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Uw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Iw="https://eqehfwlwhnhoqnsfcewm.supabase.co",Mw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxZWhmd2x3aG5ob3Fuc2ZjZXdtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5MTk0ODgsImV4cCI6MjA4NjQ5NTQ4OH0.1KEFMCJxHZ4yxhrSXs2Jn7ebvAthZnZXr1VFrXKHE2k",je=Dw(Iw,Mw),Lw=async i=>{const{data:n,error:s}=await je.from("users").upsert({id:i.id,username:i.username,avatar:i.avatar||null,status:i.status}).select().single();if(s)throw s;return n},kw=async(i,n)=>{const{data:s,error:l}=await je.from("servers").insert({id:i.id,name:i.name,icon:i.icon||null,password:i.password||null,owner_id:n}).select().single();if(l)throw l;for(const u of i.roles)await je.from("roles").insert({id:u.id,server_id:i.id,name:u.name,color:u.color,permissions:u.permissions,position:u.position});for(const u of i.channels)await je.from("channels").insert({id:u.id,server_id:i.id,name:u.name,type:u.type,position:i.channels.indexOf(u)});return await je.from("server_members").insert({server_id:i.id,user_id:n,roles:i.members[0].roles}),s},zw=async i=>{const{data:n,error:s}=await je.from("servers").select("*").eq("name",i).maybeSingle();if(s)throw s;if(!n)return null;const{data:l}=await je.from("channels").select("*").eq("server_id",n.id).order("position"),{data:u}=await je.from("roles").select("*").eq("server_id",n.id).order("position"),{data:d}=await je.from("server_members").select("*, users(username, avatar)").eq("server_id",n.id),f=(l||[]).map(y=>({id:y.id,name:y.name,type:y.type,messages:[]})),m=(u||[]).map(y=>({id:y.id,name:y.name,color:y.color,permissions:y.permissions,position:y.position})),v=(d||[]).map(y=>{var b,E;return{userId:y.user_id,username:((b=y.users)==null?void 0:b.username)||"Unknown",avatar:((E=y.users)==null?void 0:E.avatar)||"",roles:y.roles}});return{id:n.id,name:n.name,icon:n.icon,password:n.password,ownerId:n.owner_id,channels:f,roles:m,members:v}},Bw=async(i,n,s=["r-everyone"])=>{const{data:l,error:u}=await je.from("server_members").insert({server_id:i,user_id:n,roles:s}).select();if(u)throw u;return l},Hw=async i=>{const{data:n,error:s}=await je.from("server_members").select("server_id").eq("user_id",i);if(s)throw s;if(!n||n.length===0)return[];const l=n.map(m=>m.server_id),{data:u,error:d}=await je.from("servers").select("*").in("id",l);if(d)throw d;if(!u)return[];const f=[];for(const m of u){const{data:v}=await je.from("channels").select("*").eq("server_id",m.id).order("position"),{data:y}=await je.from("roles").select("*").eq("server_id",m.id).order("position"),{data:b}=await je.from("server_members").select("*, users(username, avatar)").eq("server_id",m.id),E=(v||[]).map(S=>({id:S.id,name:S.name,type:S.type,messages:[]}));for(const S of E)if(S.type==="text"){const{data:O}=await je.from("messages").select("*, users(username, avatar)").eq("channel_id",S.id).order("created_at",{ascending:!0}).limit(100);S.messages=(O||[]).map(N=>{var M,G;return{id:N.id,channelId:N.channel_id,content:N.content,senderId:N.user_id,senderName:((M=N.users)==null?void 0:M.username)||"Unknown",senderAvatar:(G=N.users)==null?void 0:G.avatar,timestamp:new Date(N.created_at).getTime(),isSystem:N.is_system}})}const T=(y||[]).map(S=>({id:S.id,name:S.name,color:S.color,permissions:S.permissions,position:S.position})),_=(b||[]).map(S=>{var O,N;return{userId:S.user_id,username:((O=S.users)==null?void 0:O.username)||"Unknown",avatar:((N=S.users)==null?void 0:N.avatar)||"",roles:S.roles}});f.push({id:m.id,name:m.name,icon:m.icon,password:m.password,ownerId:m.owner_id,channels:E,roles:T,members:_})}return f},Gw=async i=>{const{data:n,error:s}=await je.from("messages").insert({id:i.id,channel_id:i.channelId,user_id:i.senderId,content:i.content,is_system:i.isSystem||!1}).select().single();if(s)throw s;return n},qw=(i,n)=>je.channel(`channel-${i}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`channel_id=eq.${i}`},async l=>{const u=l.new,{data:d}=await je.from("users").select("username, avatar").eq("id",u.user_id).maybeSingle(),f={id:u.id,channelId:u.channel_id,content:u.content,senderId:u.user_id,senderName:(d==null?void 0:d.username)||"Unknown",senderAvatar:d==null?void 0:d.avatar,timestamp:new Date(u.created_at||Date.now()).getTime(),isSystem:u.is_system};n(f)}).subscribe(),oc=i=>{je.removeChannel(i)},$w=(i,n)=>je.channel(`server-members-${i}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"server_members",filter:`server_id=eq.${i}`},async l=>{const u=l.new,{data:d}=await je.from("users").select("username, avatar").eq("id",u.user_id).maybeSingle(),f={userId:u.user_id,username:(d==null?void 0:d.username)||"Unknown",avatar:(d==null?void 0:d.avatar)||"",roles:u.roles};n(f)}).subscribe(),Vw=async(i,n)=>{const{error:s}=await je.from("channel_presence").upsert({channel_id:i,user_id:n,last_seen_at:new Date().toISOString()},{onConflict:"channel_id,user_id"});if(s)throw s},Yw=async(i,n)=>{const{error:s}=await je.from("channel_presence").delete().eq("channel_id",i).eq("user_id",n);if(s)throw s},Pw=async i=>{const{data:n,error:s}=await je.from("channel_presence").select(`
      user_id,
      users:user_id (username, avatar)
    `).eq("channel_id",i);if(s)throw s;return(n==null?void 0:n.map(l=>{var u,d;return{userId:l.user_id,username:((u=l.users)==null?void 0:u.username)||"Unknown",avatar:((d=l.users)==null?void 0:d.avatar)||""}}))||[]},Kw=(i,n)=>je.channel(`channel-presence-${i}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"channel_presence",filter:`channel_id=eq.${i}`},async l=>{const u=l.new,{data:d}=await je.from("users").select("username, avatar").eq("id",u.user_id).maybeSingle();n(u.user_id,!0,d||void 0)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"channel_presence",filter:`channel_id=eq.${i}`},l=>{const u=l.old;n(u.user_id,!1)}).subscribe();class Jw{constructor(n,s,l){this.localStream=null,this.peers=new Map,this.signalChannel=null,this.configuration={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},this.channelId=n,this.userId=s,this.onRemoteStream=l}async initialize(n){this.localStream=n,this.signalChannel=je.channel(`webrtc:${this.channelId}`,{config:{broadcast:{self:!1}}}),this.signalChannel.on("broadcast",{event:"signal"},async({payload:s})=>{await this.handleSignal(s)}).subscribe(async s=>{s==="SUBSCRIBED"&&console.log("[WebRTC] Signaling channel ready")})}async connectToPeer(n){if(this.peers.has(n)){console.log(`[WebRTC] Already connected to ${n}`);return}console.log(`[WebRTC] Connecting to peer: ${n}`);const s=this.createPeerConnection(n);this.peers.set(n,{connection:s}),this.localStream&&this.localStream.getTracks().forEach(u=>{s.addTrack(u,this.localStream)});const l=await s.createOffer();await s.setLocalDescription(l),this.sendSignal({type:"offer",from:this.userId,to:n,data:l})}createPeerConnection(n){const s=new RTCPeerConnection(this.configuration);return s.onicecandidate=l=>{l.candidate&&this.sendSignal({type:"ice-candidate",from:this.userId,to:n,data:l.candidate})},s.ontrack=l=>{console.log(`[WebRTC] Received remote track from ${n}`);const[u]=l.streams,d=this.peers.get(n);d&&(d.stream=u),this.onRemoteStream&&u&&this.onRemoteStream(n,u)},s.oniceconnectionstatechange=()=>{console.log(`[WebRTC] ICE connection state with ${n}: ${s.iceConnectionState}`),(s.iceConnectionState==="disconnected"||s.iceConnectionState==="failed")&&this.removePeer(n)},s}async handleSignal(n){if(n.to===this.userId)switch(console.log(`[WebRTC] Received ${n.type} from ${n.from}`),n.type){case"offer":await this.handleOffer(n.from,n.data);break;case"answer":await this.handleAnswer(n.from,n.data);break;case"ice-candidate":await this.handleIceCandidate(n.from,n.data);break}}async handleOffer(n,s){var d;let l=(d=this.peers.get(n))==null?void 0:d.connection;l||(l=this.createPeerConnection(n),this.peers.set(n,{connection:l}),this.localStream&&this.localStream.getTracks().forEach(f=>{l.addTrack(f,this.localStream)})),await l.setRemoteDescription(new RTCSessionDescription(s));const u=await l.createAnswer();await l.setLocalDescription(u),this.sendSignal({type:"answer",from:this.userId,to:n,data:u})}async handleAnswer(n,s){const l=this.peers.get(n);l&&await l.connection.setRemoteDescription(new RTCSessionDescription(s))}async handleIceCandidate(n,s){const l=this.peers.get(n);l&&l.connection.remoteDescription&&await l.connection.addIceCandidate(new RTCIceCandidate(s))}sendSignal(n){this.signalChannel&&this.signalChannel.send({type:"broadcast",event:"signal",payload:n})}removePeer(n){const s=this.peers.get(n);s&&(s.connection.close(),this.peers.delete(n),console.log(`[WebRTC] Removed peer: ${n}`))}updateLocalStream(n){this.localStream=n,this.peers.forEach(s=>{const l=s.connection.getSenders(),u=n.getAudioTracks()[0],d=l.find(f=>{var m;return((m=f.track)==null?void 0:m.kind)==="audio"});d&&u&&d.replaceTrack(u)})}destroy(){this.peers.forEach(n=>{n.connection.close()}),this.peers.clear(),this.signalChannel&&(je.removeChannel(this.signalChannel),this.signalChannel=null),console.log("[WebRTC] Manager destroyed")}}const Xw=({channel:i,currentUser:n,channelUsers:s,onLeave:l,isMuted:u,toggleMute:d,isDeafened:f,toggleDeafen:m,noiseSuppression:v,inputVolume:y,outputVolume:b})=>{const[E,T]=J.useState(0),[_,S]=J.useState(null),[O,N]=J.useState(null),[M,G]=J.useState(null),[H,Y]=J.useState(new Map),ce=J.useRef(null),ee=J.useRef(null),V=J.useRef(null),Oe=J.useRef(null),Se=J.useRef(null),yt=J.useRef(null),nt=J.useRef(new Map);J.useEffect(()=>((async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){G("Audio not supported in this browser.");return}try{const fe={audio:{echoCancellation:!0,noiseSuppression:v,autoGainControl:!0},video:!1},be=await navigator.mediaDevices.getUserMedia(fe);S(be),G(null);const I=new Jw(i.id,n.id,(A,z)=>{console.log(`[VoiceStage] Received remote stream from ${A}`),Y($=>{const P=new Map($);return P.set(A,z),P})});await I.initialize(be),yt.current=I,ce.current=new(window.AudioContext||window.webkitAudioContext),ee.current=ce.current.createAnalyser(),V.current=ce.current.createGain(),V.current.gain.value=y/100,ce.current.createMediaStreamSource(be).connect(V.current),V.current.connect(ee.current),ee.current.fftSize=256;const F=ee.current.frequencyBinCount,ge=new Uint8Array(F),we=()=>{if(ee.current){ee.current.getByteFrequencyData(ge);let A=0;for(let $=0;$<F;$++)A+=ge[$];const z=A/F;T(z)}Oe.current=requestAnimationFrame(we)};we()}catch(fe){console.error("Error accessing microphone",fe),G("Microphone access denied. You are in listener mode.")}})(),()=>{Oe.current&&cancelAnimationFrame(Oe.current),_&&_.getTracks().forEach(fe=>fe.stop()),O&&O.getTracks().forEach(fe=>fe.stop()),ce.current&&ce.current.state!=="closed"&&ce.current.close().catch(fe=>console.error("Error closing audio context",fe)),yt.current&&(yt.current.destroy(),yt.current=null)}),[]),J.useEffect(()=>{if(!yt.current)return;const le=s.filter(fe=>fe.userId!==n.id);le.forEach(fe=>{var be;H.has(fe.userId)||(console.log(`[VoiceStage] Connecting to peer: ${fe.userId}`),(be=yt.current)==null||be.connectToPeer(fe.userId))}),H.forEach((fe,be)=>{var I;le.find(q=>q.userId===be)||(console.log(`[VoiceStage] Removing peer: ${be}`),(I=yt.current)==null||I.removePeer(be),Y(q=>{const F=new Map(q);return F.delete(be),F}))})},[s,n.id]),J.useEffect(()=>{H.forEach((le,fe)=>{let be=nt.current.get(fe);be||(be=new Audio,be.autoplay=!0,nt.current.set(fe,be)),be.srcObject=le,be.volume=f?0:b/100,console.log(`[VoiceStage] Playing audio from ${fe}, volume: ${be.volume}`)}),nt.current.forEach((le,fe)=>{H.has(fe)||(le.pause(),le.srcObject=null,nt.current.delete(fe),console.log(`[VoiceStage] Stopped audio from ${fe}`))})},[H,b,f]),J.useEffect(()=>{V.current&&(V.current.gain.value=y/100)},[y]),J.useEffect(()=>{_&&_.getAudioTracks().forEach(le=>{le.enabled=!u})},[u,_]),J.useEffect(()=>{if(_){const le=_.getAudioTracks()[0];le&&le.getCapabilities().noiseSuppression&&le.applyConstraints({noiseSuppression:v}).catch(fe=>console.warn("Failed to apply noise suppression",fe))}},[v,_]),J.useEffect(()=>{Se.current&&O&&(Se.current.srcObject=O)},[O]);const at=async()=>{if(O)O.getTracks().forEach(le=>le.stop()),N(null);else try{if(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia){G("Screen sharing not supported.");return}const le=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});N(le),G(null),le.getVideoTracks()[0].onended=()=>{N(null)}}catch(le){console.error("Error sharing screen:",le),le.name==="NotAllowedError"?G("Screen share permission denied."):G("Failed to share screen. "+(le.message||""))}};return g.jsxs("div",{className:"flex-1 bg-black flex flex-col items-center justify-between p-4 h-full relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-discord-dark opacity-50 z-0"}),g.jsx("div",{className:"w-full flex justify-between items-center z-10",children:g.jsxs("div",{className:"text-discord-textMuted text-sm font-bold flex items-center",children:[g.jsx("span",{className:"text-discord-green mr-2",children:""})," Connected to ",g.jsx("span",{className:"text-white ml-1",children:i.name}),g.jsx("span",{className:"ml-2 px-2 py-0.5 bg-discord-blurple rounded text-xs text-white",children:"Gemini Voice Compatible"})]})}),M&&g.jsxs("div",{className:"w-full max-w-md bg-discord-red/90 text-white px-4 py-2 rounded mb-4 z-20 flex items-center shadow-lg absolute top-16 transition-all animate-bounce",children:[g.jsx(C_,{size:20,className:"mr-2"}),g.jsx("span",{className:"text-sm font-medium",children:M}),g.jsx("button",{onClick:()=>G(null),className:"ml-auto hover:text-black/50",children:g.jsx("div",{className:"text-xs font-bold border border-white/50 px-1 rounded",children:"X"})})]}),g.jsxs("div",{className:"flex-1 w-full flex flex-col items-center justify-center z-10 gap-4 overflow-y-auto",children:[O&&g.jsxs("div",{className:"w-full max-w-4xl aspect-video bg-black rounded-xl border border-discord-darker shadow-2xl relative overflow-hidden group mb-4 shrink-0",children:[g.jsx("video",{ref:Se,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain"}),g.jsxs("div",{className:"absolute top-4 left-4 bg-discord-red px-2 py-1 rounded text-white text-xs font-bold uppercase shadow-sm flex items-center animate-pulse",children:[g.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-2"}),"Live"]}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsxs("span",{className:"text-white font-bold",children:[n.username,"'s Screen"]})})]}),g.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[g.jsxs("div",{className:`relative w-48 h-48 rounded-2xl bg-discord-dark border-2 transition-all duration-100 flex flex-col items-center justify-center
                        ${E>10&&!u?"border-discord-green shadow-[0_0_15px_rgba(35,165,89,0.5)]":"border-transparent"}
                    `,children:[g.jsxs("div",{className:"w-24 h-24 rounded-full overflow-hidden mb-4 relative",children:[g.jsx("img",{src:n.avatar,alt:"Me",className:"w-full h-full object-cover"}),(u||M||f)&&g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:f?g.jsx(Os,{className:"text-red-500 w-10 h-10"}):g.jsx(ml,{className:"text-red-500 w-10 h-10"})})]}),g.jsx("span",{className:"text-white font-bold text-lg",children:n.username}),E>10&&!u&&g.jsx("span",{className:"text-discord-green text-xs font-bold animate-pulse",children:"Speaking..."}),M&&!O&&g.jsx("span",{className:"text-discord-red text-[10px] font-bold mt-1",children:"NO MIC"}),O&&g.jsx("span",{className:"text-discord-blurple text-[10px] font-bold mt-1 uppercase",children:"Streaming"})]}),s.filter(le=>le.userId!==n.id).map(le=>g.jsxs("div",{className:"relative w-48 h-48 rounded-2xl bg-discord-dark border-2 border-transparent flex flex-col items-center justify-center",children:[g.jsxs("div",{className:"w-24 h-24 rounded-full overflow-hidden mb-4 relative",children:[g.jsx("img",{src:le.avatar,alt:le.username,className:"w-full h-full object-cover"}),f&&g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:g.jsx(Os,{className:"text-red-500 w-10 h-10"})})]}),g.jsx("span",{className:"text-white font-bold text-lg",children:le.username})]},le.userId)),s.filter(le=>le.userId!==n.id).length===0&&g.jsxs("div",{className:"relative w-48 h-48 rounded-2xl bg-discord-dark border-2 border-transparent flex flex-col items-center justify-center opacity-50",children:[g.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden mb-4 bg-gray-600 relative",children:f&&g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:g.jsx("div",{className:"text-white text-xs font-bold px-2 text-center",children:"You are deafened"})})}),g.jsx("span",{className:"text-discord-textMuted font-bold",children:"Waiting for friends..."})]})]})]}),g.jsxs("div",{className:"w-full max-w-2xl bg-[#1e1f22] rounded-xl p-3 flex items-center justify-between z-20 shadow-2xl mb-4",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("div",{className:"text-white font-bold text-sm px-3",children:"Voice Connected"}),g.jsx("div",{className:"text-discord-textMuted text-xs",children:"/ RTC Connected"}),v&&g.jsx("div",{className:"px-2 py-0.5 bg-discord-green text-white text-[10px] rounded uppercase font-bold ml-2",children:"Noise Supp. On"})]}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("button",{onClick:d,disabled:!!M&&!O,title:u?"Unmute":"Mute",className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors 
                        ${M&&M.includes("Microphone")?"bg-discord-dark opacity-50 cursor-not-allowed":u?"bg-white text-black":"bg-discord-dark hover:bg-discord-active text-white"}`,children:u||M&&M.includes("Microphone")?g.jsx(ml,{size:24}):g.jsx(Uc,{size:24})}),g.jsx("button",{onClick:m,title:f?"Undeafen":"Deafen",className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors 
                            ${f?"bg-white text-black":"bg-discord-dark hover:bg-discord-active text-white"}`,children:f?g.jsx(Os,{size:24}):g.jsx(qv,{size:24})}),g.jsx("button",{className:"w-12 h-12 rounded-full bg-discord-dark hover:bg-discord-active text-white flex items-center justify-center transition-colors",children:g.jsx(hb,{size:24})}),g.jsx("button",{onClick:at,title:O?"Stop Streaming":"Share Screen",className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors 
                         ${O?"bg-discord-green text-white":"bg-discord-dark hover:bg-discord-active text-white"}`,children:O?g.jsx(P_,{size:24}):g.jsx(J_,{size:24})}),g.jsx("button",{onClick:l,className:"w-14 h-12 rounded-full bg-discord-red hover:bg-red-700 text-white flex items-center justify-center transition-colors",children:g.jsx(Q_,{size:28})})]}),g.jsx("div",{className:"flex items-center",children:g.jsx("button",{className:"p-2 text-white hover:bg-discord-active rounded-full",children:g.jsx(z_,{})})})]}),g.jsx("div",{className:"absolute bottom-2 right-4 text-xs text-discord-textMuted opacity-50 z-0",children:"Peer-to-Peer Audio Demo (Simulated)"})]})},Qw=({isOpen:i,onClose:n,noiseSuppression:s,onToggleNoiseSuppression:l,inputVolume:u,setInputVolume:d,outputVolume:f,setOutputVolume:m})=>i?g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in",children:g.jsxs("div",{className:"bg-discord-dark w-[800px] h-[600px] rounded-lg flex overflow-hidden shadow-2xl relative",children:[g.jsxs("div",{className:"w-[230px] bg-discord-sidebar flex flex-col pt-10 px-2 space-y-0.5",children:[g.jsx("div",{className:"px-2.5 py-1.5 text-xs font-bold text-discord-textMuted uppercase mb-1",children:"User Settings"}),g.jsx("div",{className:"px-2.5 py-1.5 rounded bg-discord-active text-white font-medium cursor-pointer",children:"Voice & Video"}),g.jsx("div",{className:"px-2.5 py-1.5 rounded text-discord-textMuted hover:bg-discord-active hover:text-discord-text cursor-pointer",children:"Appearance"}),g.jsx("div",{className:"px-2.5 py-1.5 rounded text-discord-textMuted hover:bg-discord-active hover:text-discord-text cursor-pointer",children:"Keybinds"}),g.jsx("div",{className:"my-2 border-b border-discord-divider"}),g.jsxs("div",{onClick:n,className:"px-2.5 py-1.5 rounded text-discord-red hover:bg-discord-active cursor-pointer font-medium flex justify-between items-center group",children:["Log Out",g.jsx(N_,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),g.jsxs("div",{className:"flex-1 bg-discord-dark p-10 overflow-y-auto relative",children:[g.jsxs("button",{onClick:n,className:"absolute top-4 right-4 text-discord-textMuted hover:text-discord-text flex flex-col items-center",children:[g.jsx("div",{className:"w-9 h-9 border-2 border-discord-textMuted rounded-full flex items-center justify-center mb-1",children:g.jsx(Ic,{size:20})}),g.jsx("span",{className:"text-xs font-bold uppercase",children:"ESC"})]}),g.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Voice Settings"}),g.jsxs("div",{className:"mb-8",children:[g.jsx("div",{className:"flex items-center justify-between mb-2",children:g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase",children:"Advanced"})}),g.jsxs("div",{className:"flex items-center justify-between p-4 bg-discord-light rounded mb-4",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-white font-medium mb-1 flex items-center",children:["Noise Suppression",g.jsx("span",{className:"ml-2 bg-discord-blurple text-[10px] text-white px-1.5 rounded font-bold uppercase",children:"Beta"})]}),g.jsx("div",{className:"text-sm text-discord-textMuted",children:"Suppress background noise from your microphone."})]}),g.jsx("div",{onClick:()=>l(!s),className:`w-10 h-6 rounded-full cursor-pointer relative transition-colors ${s?"bg-discord-green":"bg-gray-500"}`,children:g.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${s?"left-5":"left-1"}`})})]}),g.jsxs("div",{className:"space-y-8 mt-8",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase block",children:"Input Volume"}),g.jsxs("span",{className:"text-xs font-bold text-white",children:[u,"%"]})]}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx(Uc,{size:20,className:"text-discord-textMuted"}),g.jsx("input",{type:"range",min:"0",max:"200",value:u,onChange:v=>d(Number(v.target.value)),className:"w-full h-2 bg-discord-light rounded-lg appearance-none cursor-pointer accent-discord-blurple"})]})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase block",children:"Output Volume"}),g.jsxs("span",{className:"text-xs font-bold text-white",children:[f,"%"]})]}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx(Yv,{size:20,className:"text-discord-textMuted"}),g.jsx("input",{type:"range",min:"0",max:"200",value:f,onChange:v=>m(Number(v.target.value)),className:"w-full h-2 bg-discord-light rounded-lg appearance-none cursor-pointer accent-discord-blurple"})]})]})]})]})]})]})}):null,Zw=({isOpen:i,onClose:n,onSubmit:s})=>{const[l,u]=J.useState(""),[d,f]=J.useState("");return i?g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white text-black rounded-lg w-[440px] overflow-hidden flex flex-col transition-all animate-fade-in-up",children:[g.jsxs("div",{className:"p-6 text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-[#060607] mb-2",children:"Customize Your Server"}),g.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Give your new server a personality with a name and an icon. You can always change it later."}),g.jsx("div",{className:"flex justify-center mb-6",children:g.jsxs("div",{className:"w-20 h-20 border-2 border-dashed border-gray-300 rounded-full flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50",children:[g.jsx(cb,{size:24,className:"text-gray-400 mb-1"}),g.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Upload"})]})}),g.jsxs("div",{className:"text-left mb-4",children:[g.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1.5 block",children:"Server Name"}),g.jsx("input",{value:l,onChange:m=>u(m.target.value),className:"w-full bg-[#E3E5E8] p-2.5 rounded text-black outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"My Awesome Server"})]}),g.jsxs("div",{className:"text-left",children:[g.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1.5 block",children:"Password (Optional)"}),g.jsx("input",{value:d,onChange:m=>f(m.target.value),type:"password",className:"w-full bg-[#E3E5E8] p-2.5 rounded text-black outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Secret key"})]})]}),g.jsxs("div",{className:"bg-[#F2F3F5] p-4 flex justify-between items-center",children:[g.jsx("button",{onClick:n,className:"text-sm font-medium hover:underline px-4",children:"Back"}),g.jsx("button",{onClick:()=>{l&&(s({name:l,password:d}),n(),u(""),f(""))},className:"bg-[#5865F2] hover:bg-[#4752C4] text-white px-8 py-2.5 rounded text-sm font-medium transition-colors",children:"Create"})]})]})}):null},Fw=({isOpen:i,onClose:n,onSubmit:s})=>{const[l,u]=J.useState(""),[d,f]=J.useState("");return i?g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-discord-dark rounded-lg w-[440px] overflow-hidden flex flex-col shadow-2xl",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-2 text-center",children:"Join a Server"}),g.jsx("p",{className:"text-discord-textMuted text-sm mb-6 text-center",children:"Enter the name and password of the server you want to join."}),g.jsxs("div",{className:"text-left mb-4",children:[g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase mb-1.5 block",children:"Server Name"}),g.jsx("input",{value:l,onChange:m=>u(m.target.value),className:"w-full bg-discord-darker p-2.5 rounded text-white outline-none focus:ring-2 focus:ring-indigo-500 border border-black/20"})]}),g.jsxs("div",{className:"text-left",children:[g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase mb-1.5 block",children:"Password"}),g.jsx("input",{value:d,onChange:m=>f(m.target.value),type:"password",className:"w-full bg-discord-darker p-2.5 rounded text-white outline-none focus:ring-2 focus:ring-indigo-500 border border-black/20"})]})]}),g.jsxs("div",{className:"bg-discord-light p-4 flex justify-between items-center",children:[g.jsx("button",{onClick:n,className:"text-sm font-medium text-white hover:underline px-4",children:"Back"}),g.jsx("button",{onClick:()=>{s({name:l,password:d}),n()},className:"bg-discord-green hover:bg-emerald-600 text-white px-6 py-2.5 rounded text-sm font-medium transition-colors",children:"Join Server"})]})]})}):null},Ww=[{id:"ADMINISTRATOR",label:"Administrator",description:"Members with this permission have every permission and can bypass channel specific permissions."},{id:"MANAGE_CHANNELS",label:"Manage Channels",description:"Allows members to create, edit, or delete channels."},{id:"MANAGE_ROLES",label:"Manage Roles",description:"Allows members to create new roles and edit/delete roles lower than their highest role."},{id:"KICK_MEMBERS",label:"Kick Members",description:"Allows members to remove other members from this server."},{id:"SEND_MESSAGES",label:"Send Messages",description:"Allows members to send messages in text channels."},{id:"VIEW_CHANNELS",label:"View Channels",description:"Allows members to view channels by default."}],eT=["#99AAB5","#1ABC9C","#2ECC71","#3498DB","#9B59B6","#E91E63","#F1C40F","#E67E22","#E74C3C","#95A5A6","#607D8B"],tT=({isOpen:i,server:n,onClose:s,onUpdateServer:l})=>{const[u,d]=J.useState("overview"),[f,m]=J.useState(n.roles[0]||null);if(!i)return null;const v=()=>{const _={id:Na(),name:"New Role",color:"#99AAB5",permissions:["SEND_MESSAGES","VIEW_CHANNELS"],position:n.roles.length},S=[...n.roles,_],O={...n,roles:S};l(O),m(_)},y=_=>{if(_==="r-everyone")return;const S=n.roles.filter(N=>N.id!==_),O=n.members.map(N=>({...N,roles:N.roles.filter(M=>M!==_)}));l({...n,roles:S,members:O}),(f==null?void 0:f.id)===_&&m(S[0])},b=(_,S)=>{const O=n.roles.map(N=>N.id===_?{...N,...S}:N);l({...n,roles:O}),(f==null?void 0:f.id)===_&&m({...f,...S})},E=(_,S)=>{const O=_.permissions.includes(S);let N;O?N=_.permissions.filter(M=>M!==S):N=[..._.permissions,S],b(_.id,{permissions:N})},T=(_,S)=>{const O=n.members.find(H=>H.userId===_);if(!O)return;const N=O.roles.includes(S);let M;N?M=O.roles.filter(H=>H!==S):M=[...O.roles,S];const G=n.members.map(H=>H.userId===_?{...H,roles:M}:H);l({...n,members:G})};return g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in",children:g.jsxs("div",{className:"bg-discord-dark w-[800px] h-[600px] rounded-lg flex overflow-hidden shadow-2xl relative",children:[g.jsxs("div",{className:"w-[230px] bg-discord-sidebar flex flex-col pt-10 px-2 space-y-0.5",children:[g.jsx("div",{className:"px-2.5 py-1.5 text-xs font-bold text-discord-textMuted uppercase mb-1",children:n.name}),g.jsx("div",{onClick:()=>d("overview"),className:`px-2.5 py-1.5 rounded font-medium cursor-pointer ${u==="overview"?"bg-discord-active text-white":"text-discord-textMuted hover:bg-discord-active hover:text-discord-text"}`,children:"Overview"}),g.jsxs("div",{onClick:()=>d("roles"),className:`px-2.5 py-1.5 rounded font-medium cursor-pointer flex justify-between items-center ${u==="roles"?"bg-discord-active text-white":"text-discord-textMuted hover:bg-discord-active hover:text-discord-text"}`,children:["Roles",g.jsx(ib,{size:14})]}),g.jsxs("div",{onClick:()=>d("members"),className:`px-2.5 py-1.5 rounded font-medium cursor-pointer flex justify-between items-center ${u==="members"?"bg-discord-active text-white":"text-discord-textMuted hover:bg-discord-active hover:text-discord-text"}`,children:["Members",g.jsx(Vv,{size:14})]}),g.jsx("div",{className:"my-2 border-b border-discord-divider"}),g.jsxs("div",{onClick:s,className:"px-2.5 py-1.5 rounded text-discord-textMuted hover:bg-discord-active hover:text-discord-text cursor-pointer font-medium flex justify-between items-center group",children:["Exit",g.jsx(Ic,{size:14})]})]}),g.jsxs("div",{className:"flex-1 bg-discord-dark flex flex-col min-w-0",children:[u==="overview"&&g.jsxs("div",{className:"p-10",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Server Overview"}),g.jsxs("div",{className:"flex space-x-8",children:[g.jsxs("div",{className:"w-24 h-24 rounded-full bg-discord-active flex-shrink-0 overflow-hidden relative group cursor-pointer",children:[n.icon?g.jsx("img",{src:n.icon,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:n.name.substring(0,2)}),g.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-xs font-bold text-white uppercase",children:"Change Icon"})]}),g.jsx("div",{className:"flex-1 space-y-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase mb-1.5 block",children:"Server Name"}),g.jsx("input",{value:n.name,onChange:_=>l({...n,name:_.target.value}),className:"w-full bg-discord-darker p-2.5 rounded text-white outline-none focus:ring-2 focus:ring-indigo-500 border border-black/20"})]})})]})]}),u==="roles"&&g.jsxs("div",{className:"flex h-full",children:[g.jsxs("div",{className:"w-48 bg-discord-darker flex flex-col border-r border-discord-divider",children:[g.jsxs("div",{className:"p-3 border-b border-discord-divider flex justify-between items-center",children:[g.jsx("span",{className:"text-xs font-bold text-discord-textMuted uppercase",children:"Roles"}),g.jsx("button",{onClick:v,className:"text-discord-textMuted hover:text-white",children:g.jsx($v,{size:16})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:n.roles.map(_=>g.jsx("div",{onClick:()=>m(_),className:`px-2 py-1.5 rounded cursor-pointer flex items-center justify-between group ${(f==null?void 0:f.id)===_.id?"bg-discord-active":"hover:bg-discord-active/50"}`,children:g.jsxs("div",{className:"flex items-center truncate",children:[g.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:_.color}}),g.jsx("span",{className:`text-sm font-medium truncate ${(f==null?void 0:f.id)===_.id?"text-white":"text-discord-textMuted"}`,children:_.name})]})},_.id))})]}),f&&g.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("h2",{className:"text-xl font-bold text-white",children:["Edit Role - ",f.name]}),f.id!=="r-everyone"&&g.jsx("button",{onClick:()=>y(f.id),className:"text-discord-red hover:bg-discord-red/10 px-3 py-1.5 rounded text-xs font-bold border border-discord-red",children:"Delete Role"})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase mb-1.5 block",children:"Role Name"}),g.jsx("input",{value:f.name,onChange:_=>b(f.id,{name:_.target.value}),className:"w-full bg-discord-darker p-2.5 rounded text-white outline-none border border-black/20",disabled:f.id==="r-everyone"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-discord-textMuted uppercase mb-1.5 block",children:"Role Color"}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("div",{onClick:()=>b(f.id,{color:"#99AAB5"}),className:`w-8 h-8 rounded-full cursor-pointer border-2 flex items-center justify-center bg-[#99AAB5] ${f.color==="#99AAB5"?"border-white":"border-transparent"}`}),eT.filter(_=>_!=="#99AAB5").map(_=>g.jsx("div",{onClick:()=>b(f.id,{color:_}),className:`w-8 h-8 rounded-full cursor-pointer border-2 flex items-center justify-center ${f.color===_?"border-white":"border-transparent"}`,style:{backgroundColor:_}},_))]})]})]}),g.jsx("div",{className:"border-b border-discord-divider"}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-white font-bold mb-4",children:"Permissions"}),g.jsx("div",{className:"space-y-4",children:(()=>{const _=f.permissions.includes("ADMINISTRATOR");return Ww.map(S=>{const O=S.id==="ADMINISTRATOR",N=f.permissions.includes(S.id),M=_&&!O,G=O?N:_||N;return g.jsxs("div",{className:`flex items-center justify-between ${M?"opacity-50":""}`,children:[g.jsxs("div",{className:"pr-4",children:[g.jsx("div",{className:"text-white font-medium",children:S.label}),g.jsx("div",{className:"text-sm text-discord-textMuted",children:S.description})]}),g.jsx("div",{onClick:()=>!M&&E(f,S.id),className:`w-10 h-6 rounded-full relative transition-colors flex-shrink-0 
                                                                        ${M?"cursor-not-allowed":"cursor-pointer"} 
                                                                        ${G?"bg-discord-green":"bg-gray-500"}`,children:g.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${G?"left-5":"left-1"}`})})]},S.id)})})()})]})]})]})]}),u==="members"&&g.jsxs("div",{className:"p-6 h-full overflow-hidden flex flex-col",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Members"}),g.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:n.members.map(_=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-discord-light rounded hover:bg-discord-active/50 group",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("img",{src:_.avatar,className:"w-10 h-10 rounded-full mr-3"}),g.jsxs("div",{children:[g.jsxs("div",{className:"text-white font-medium flex items-center",children:[_.username,n.ownerId===_.userId&&g.jsx(nT,{})]}),g.jsx("div",{className:"text-xs text-discord-textMuted flex items-center gap-1 mt-0.5",children:_.roles.map(S=>{const O=n.roles.find(N=>N.id===S);return!O||O.name==="@everyone"?null:g.jsxs("span",{className:"flex items-center px-1.5 rounded bg-discord-darker text-[10px]",style:{color:O.color},children:[g.jsx("div",{className:"w-1.5 h-1.5 rounded-full mr-1",style:{backgroundColor:O.color}}),O.name]},O.id)})})]})]}),g.jsx("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.roles.filter(S=>S.name!=="@everyone").map(S=>g.jsx("div",{onClick:()=>T(_.userId,S.id),className:`w-6 h-6 rounded-full border border-gray-600 flex items-center justify-center cursor-pointer ${_.roles.includes(S.id)?"bg-discord-blurple border-discord-blurple":"bg-transparent"}`,title:`Toggle ${S.name}`,children:_.roles.includes(S.id)&&g.jsx(T_,{size:14,className:"text-white"})},S.id))})]},_.userId))}),g.jsx("div",{className:"mt-4 text-xs text-discord-textMuted",children:"* Hover over a member to assign roles using the circles on the right."})]})]})]})})},nT=()=>g.jsx("svg",{className:"w-3 h-3 text-[#F1C40F] ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M10 2l2.5 5h5L15 10l2 6h-14l2-6-2.5-3h5L10 2z"})}),aT=({onLogin:i})=>{const[n,s]=J.useState(""),[l,u]=J.useState(!1),d=()=>{u(!0),setTimeout(()=>{const m={id:Na(),username:"Alex from Google",avatar:"https://lh3.googleusercontent.com/a/default-user=s100",status:"online",isBot:!1};i(m)},1500)},f=m=>{if(m.preventDefault(),!n.trim())return;const v={id:Na(),username:n,avatar:`https://ui-avatars.com/api/?background=random&name=${n}`,status:"online",isBot:!1};i(v)};return g.jsxs("div",{className:"w-full h-screen flex items-center justify-center bg-[url('https://cdn.discordapp.com/attachments/886981320491069480/1094017586071060591/Login_Background.png')] bg-cover bg-center relative",children:[g.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),g.jsxs("div",{className:"bg-discord-dark p-8 rounded shadow-2xl w-full max-w-[480px] z-10 animate-fade-in-up",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome back!"}),g.jsx("p",{className:"text-discord-textMuted",children:"We're so excited to see you again!"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("button",{onClick:d,disabled:l,className:"w-full bg-white hover:bg-gray-100 text-[#3c4043] font-medium py-2.5 px-4 rounded transition-colors flex items-center justify-center relative overflow-hidden group",children:l?g.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-blue-500 rounded-full animate-spin"}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"absolute left-4",children:g.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",children:g.jsxs("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[g.jsx("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),g.jsx("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.464 63.239 -14.754 63.239 Z"}),g.jsx("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.734 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),g.jsx("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.799 L -6.734 42.379 C -8.804 40.449 -11.514 39.239 -14.754 39.239 C -19.464 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})})}),g.jsx("span",{children:"Sign in with Google"})]})}),g.jsxs("div",{className:"relative flex py-2 items-center",children:[g.jsx("div",{className:"flex-grow border-t border-gray-600"}),g.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs font-bold uppercase",children:"Or"}),g.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),g.jsxs("form",{onSubmit:f,children:[g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-discord-textMuted text-xs font-bold uppercase mb-2",children:"Display Name"}),g.jsx("input",{type:"text",value:n,onChange:m=>s(m.target.value),className:"w-full bg-discord-darker text-white p-2.5 rounded border border-transparent focus:border-discord-blurple outline-none transition-colors",placeholder:"How should we call you?"})]}),g.jsx("button",{type:"submit",className:"w-full bg-discord-blurple hover:bg-discord-blurpleHover text-white font-medium py-2.5 px-4 rounded transition-colors",children:"Continue as Guest"})]})]})]})]})},Oc=(i,n)=>n.some(s=>i instanceof s);let Mv,Lv;function iT(){return Mv||(Mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sT(){return Lv||(Lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nc=new WeakMap,uc=new WeakMap,Nl=new WeakMap;function rT(i){const n=new Promise((s,l)=>{const u=()=>{i.removeEventListener("success",d),i.removeEventListener("error",f)},d=()=>{s(bl(i.result)),u()},f=()=>{l(i.error),u()};i.addEventListener("success",d),i.addEventListener("error",f)});return Nl.set(n,i),n}function lT(i){if(Nc.has(i))return;const n=new Promise((s,l)=>{const u=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",f),i.removeEventListener("abort",f)},d=()=>{s(),u()},f=()=>{l(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",d),i.addEventListener("error",f),i.addEventListener("abort",f)});Nc.set(i,n)}let Rc={get(i,n,s){if(i instanceof IDBTransaction){if(n==="done")return Nc.get(i);if(n==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return bl(i[n])},set(i,n,s){return i[n]=s,!0},has(i,n){return i instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in i}};function Ng(i){Rc=i(Rc)}function oT(i){return sT().includes(i)?function(...n){return i.apply(Cc(this),n),bl(this.request)}:function(...n){return bl(i.apply(Cc(this),n))}}function uT(i){return typeof i=="function"?oT(i):(i instanceof IDBTransaction&&lT(i),Oc(i,iT())?new Proxy(i,Rc):i)}function bl(i){if(i instanceof IDBRequest)return rT(i);if(uc.has(i))return uc.get(i);const n=uT(i);return n!==i&&(uc.set(i,n),Nl.set(n,i)),n}const Cc=i=>Nl.get(i),cT=["get","getKey","getAll","getAllKeys","count"],dT=["put","add","delete","clear"],cc=new Map;function kv(i,n){if(!(i instanceof IDBDatabase&&!(n in i)&&typeof n=="string"))return;if(cc.get(n))return cc.get(n);const s=n.replace(/FromIndex$/,""),l=n!==s,u=dT.includes(s);if(!(s in(l?IDBIndex:IDBObjectStore).prototype)||!(u||cT.includes(s)))return;const d=async function(f,...m){const v=this.transaction(f,u?"readwrite":"readonly");let y=v.store;return l&&(y=y.index(m.shift())),(await Promise.all([y[s](...m),u&&v.done]))[0]};return cc.set(n,d),d}Ng(i=>({...i,get:(n,s,l)=>kv(n,s)||i.get(n,s,l),has:(n,s)=>!!kv(n,s)||i.has(n,s)}));const fT=["continue","continuePrimaryKey","advance"],zv={},jc=new WeakMap,Rg=new WeakMap,hT={get(i,n){if(!fT.includes(n))return i[n];let s=zv[n];return s||(s=zv[n]=function(...l){jc.set(this,Rg.get(this)[n](...l))}),s}};async function*mT(...i){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...i)),!n)return;n=n;const s=new Proxy(n,hT);for(Rg.set(s,n),Nl.set(s,Cc(n));n;)yield s,n=await(jc.get(s)||n.continue()),jc.delete(s)}function Bv(i,n){return n===Symbol.asyncIterator&&Oc(i,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&Oc(i,[IDBIndex,IDBObjectStore])}Ng(i=>({...i,get(n,s,l){return Bv(n,s)?mT:i.get(n,s,l)},has(n,s){return Bv(n,s)||i.has(n,s)}}));const yT=[{id:"c-gen",name:"general",type:"text",messages:[]},{id:"c-meme",name:"memes",type:"text",messages:[]},{id:"c-voice-1",name:"General Voice",type:"voice"},{id:"c-voice-2",name:"Gaming",type:"voice"}],vT=[{id:"r-everyone",name:"@everyone",color:"#99AAB5",permissions:["SEND_MESSAGES","VIEW_CHANNELS"],position:0},{id:"r-admin",name:"Admin",color:"#E91E63",permissions:["ADMINISTRATOR","MANAGE_CHANNELS","MANAGE_ROLES","KICK_MEMBERS","SEND_MESSAGES","VIEW_CHANNELS"],position:1}],gT=()=>JSON.parse(JSON.stringify(yT)),pT=()=>JSON.parse(JSON.stringify(vT));function _T(){const[i,n]=J.useState(null),[s,l]=J.useState([]),[u,d]=J.useState(null),[f,m]=J.useState(null),[v,y]=J.useState(!1),[b,E]=J.useState(!0),[T,_]=J.useState(!1),[S,O]=J.useState(!1),[N,M]=J.useState(!0),[G,H]=J.useState(100),[Y,ce]=J.useState(100),[ee,V]=J.useState(!1),[Oe,Se]=J.useState(!1),[yt,nt]=J.useState(!1),[at,le]=J.useState(!1),fe=J.useRef(new Map),be=J.useRef(new Map),I=J.useRef(new Map),[q,F]=J.useState([]),ge=async Q=>{try{const te=await Hw(Q);l(te),te.length>0&&!u&&(d(te[0].id),m(te[0].channels[0].id))}catch(te){console.error("Failed to load servers:",te)}};J.useEffect(()=>{const Q=localStorage.getItem("discordia_user");if(Q){const te=JSON.parse(Q);n(te),ge(te.id)}E(!1)},[]),J.useEffect(()=>{const Q=te=>{const{channelId:me,content:We}=te.detail,Ge={id:Na()};A(me,We,Ge.id,!0)};return window.addEventListener("gemini-response",Q),()=>window.removeEventListener("gemini-response",Q)},[i]),J.useEffect(()=>{if(!f)return;if(console.log(`Subscribing to channel: ${f}`),fe.current.get(f)){console.log(`Already subscribed to channel: ${f}`);return}const te=qw(f,me=>{console.log("New message received:",me),l(We=>We.map(Ge=>Ge.channels.find(vt=>vt.id===me.channelId)?{...Ge,channels:Ge.channels.map(vt=>{var Ft;return vt.id===me.channelId?(Ft=vt.messages)!=null&&Ft.find(aa=>aa.id===me.id)?vt:{...vt,messages:[...vt.messages||[],me]}:vt})}:Ge))});return fe.current.set(f,te),()=>{console.log(`Unsubscribing from channel: ${f}`),te&&(oc(te),fe.current.delete(f))}},[f]),J.useEffect(()=>{if(!u)return;if(console.log(`Subscribing to server members: ${u}`),be.current.get(u)){console.log(`Already subscribed to server members: ${u}`);return}const te=$w(u,me=>{console.log("New member joined:",me),l(We=>We.map(Ge=>Ge.id!==u||Ge.members.find(pt=>pt.userId===me.userId)?Ge:{...Ge,members:[...Ge.members,me]}))});return be.current.set(u,te),()=>{console.log(`Unsubscribing from server members: ${u}`),te&&(oc(te),be.current.delete(u))}},[u]),J.useEffect(()=>!f||!i?void 0:((async()=>{try{console.log(`Joining channel presence: ${f}`),await Vw(f,i.id);const te=await Pw(f);if(console.log("Existing users in channel:",te),F(te),!I.current.get(f)){const We=Kw(f,(Ge,pt,vt)=>{console.log(`User ${Ge} ${pt?"joined":"left"} channel`),F(Ft=>pt&&vt?Ft.find(aa=>aa.userId===Ge)?Ft:[...Ft,{userId:Ge,username:vt.username,avatar:vt.avatar}]:Ft.filter(aa=>aa.userId!==Ge))});I.current.set(f,We)}}catch(te){console.error("Failed to setup channel presence:",te)}})(),()=>{if(i&&f){console.log(`Leaving channel presence: ${f}`),Yw(f,i.id).catch(console.error);const te=I.current.get(f);te&&(oc(te),I.current.delete(f))}}),[f,i]);const we=async Q=>{try{await Lw(Q),n(Q),localStorage.setItem("discordia_user",JSON.stringify(Q)),await ge(Q.id)}catch(te){console.error("Failed to login:",te),alert("Login failed. Please try again.")}},A=async(Q,te,me,We)=>{if(!i)return;const Ge={id:me||Na(),channelId:Q,content:te,senderId:i.id,senderName:i.username,senderAvatar:i.avatar,timestamp:Date.now(),isSystem:We||!1};try{await Gw(Ge)}catch(pt){console.error("Failed to send message:",pt)}},z=async({name:Q,password:te})=>{if(!i)return;const me={id:Na(),name:Q,password:te,ownerId:i.id,channels:gT().map(We=>({...We,id:Na(),messages:[]})),roles:pT(),members:[{userId:i.id,username:i.username,avatar:i.avatar||"",roles:["r-admin"]}]};try{await kw(me,i.id),await ge(i.id),d(me.id),m(me.channels[0].id)}catch(We){console.error("Failed to create server:",We),alert("Failed to create server. Please try again.")}},$=Q=>{const te=s.map(me=>me.id===Q.id?Q:me);l(te)},P=async({name:Q,password:te})=>{if(i)try{const me=await zw(Q);if(!me){alert("Server not found.");return}if(me.password&&me.password!==te){alert("Incorrect password!");return}me.members.find(We=>We.userId===i.id)||(await Bw(me.id,i.id),await ge(i.id)),d(me.id),m(me.channels[0].id)}catch(me){console.error("Failed to join server:",me),alert("Failed to join server. Please try again.")}},se=()=>{_(!T)},he=()=>{S?(O(!1),_(!1)):(O(!0),_(!0))};if(b)return g.jsxs("div",{className:"w-full h-screen bg-discord-dark flex flex-col items-center justify-center text-white",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-discord-blurple mb-4"}),g.jsx("p",{className:"font-bold text-lg animate-pulse",children:"Loading Discordia..."})]});if(!i)return g.jsx(aT,{onLogin:we});const oe=s.find(Q=>Q.id===u),He=oe==null?void 0:oe.channels.find(Q=>Q.id===f);return g.jsxs("div",{className:"flex w-full h-screen overflow-hidden",children:[g.jsx(gb,{servers:s,activeServerId:u,onSelectServer:Q=>{d(Q);const te=s.find(me=>me.id===Q);te&&m(te.channels[0].id),y(!1)},onCreateServer:()=>V(!0),onJoinServer:()=>Se(!0)}),oe?g.jsx(pb,{server:oe,activeChannelId:f,currentUser:i,channelUsers:q,onSelectChannel:Q=>{const te=oe.channels.find(me=>me.id===Q);m(Q),(te==null?void 0:te.type)==="voice"?y(!0):y(!1)},isMuted:T,toggleMute:se,isDeafened:S,toggleDeafen:he,onOpenSettings:()=>nt(!0),onOpenServerSettings:()=>le(!0)}):g.jsx("div",{className:"w-60 bg-discord-light border-r border-discord-darker"}),g.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-discord-dark",children:[He&&!v&&He.type==="text"&&g.jsx(aE,{channel:He,currentUser:i,onSendMessage:A,messages:He.messages||[]}),He&&v&&He.type==="voice"&&g.jsx(Xw,{channel:He,currentUser:i,channelUsers:q,onLeave:()=>{y(!1);const Q=oe==null?void 0:oe.channels.find(te=>te.type==="text");Q&&m(Q.id)},isMuted:T,toggleMute:se,isDeafened:S,toggleDeafen:he,noiseSuppression:N,inputVolume:G,outputVolume:Y}),!oe&&g.jsx("div",{className:"flex-1 flex items-center justify-center text-discord-textMuted",children:"Select a server to start chatting."})]}),g.jsx(Zw,{isOpen:ee,onClose:()=>V(!1),onSubmit:z}),g.jsx(Fw,{isOpen:Oe,onClose:()=>Se(!1),onSubmit:P}),g.jsx(Qw,{isOpen:yt,onClose:()=>nt(!1),noiseSuppression:N,onToggleNoiseSuppression:M,inputVolume:G,setInputVolume:H,outputVolume:Y,setOutputVolume:ce}),oe&&g.jsx(tT,{isOpen:at,server:oe,onClose:()=>le(!1),onUpdateServer:$})]})}const Cg=document.getElementById("root");if(!Cg)throw new Error("Could not find root element to mount to");const bT=c_.createRoot(Cg);bT.render(g.jsx(n_.StrictMode,{children:g.jsx(_T,{})}));
